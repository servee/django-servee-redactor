(function(b){if(typeof exports=="object"&&typeof module=="object"){module.exports=b();}else{if(typeof define=="function"&&define.amd){return define([],b);}else{this.CodeMirror=b();}}})(function(){var i4=/gecko\/\d/i.test(navigator.userAgent);var gz=/MSIE \d/.test(navigator.userAgent);var l2=gz&&(document.documentMode==null||document.documentMode<8);var kN=gz&&(document.documentMode==null||document.documentMode<9);var kQ=gz&&(document.documentMode==null||document.documentMode<10);var jl=/Trident\/([7-9]|\d{2,})\./.test(navigator.userAgent);var hp=gz||jl;var ki=/WebKit\//.test(navigator.userAgent);var hi=ki&&/Qt\/\d+\.\d+/.test(navigator.userAgent);var jz=/Chrome\//.test(navigator.userAgent);var i5=/Opera\//.test(navigator.userAgent);var kM=/Apple Computer/.test(navigator.vendor);var fW=/KHTML\//.test(navigator.userAgent);var jZ=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent);var ii=/PhantomJS/.test(navigator.userAgent);var hK=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent);var il=hK||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent);var k0=hK||/Mac/.test(navigator.platform);var mc=/win/i.test(navigator.platform);var l3=i5&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);if(l3){l3=Number(l3[1]);}if(l3&&l3>=15){i5=false;ki=true;}var ly=k0&&(hi||i5&&(l3==null||l3<12.11));var gS=i4||(hp&&!kN);var gL=false,lL=false;function km(c,b){if(!(this instanceof km)){return new km(c,b);}this.options=b=b||{};me(hH,b,false);lW(b);var e=b.value;if(typeof e=="string"){e=new ld(e,b.mode);}this.doc=e;var a=this.display=new gC(c,e);a.wrapper.CodeMirror=this;iD(this);kG(this);if(b.lineWrapping){this.display.wrapper.className+=" CodeMirror-wrap";}if(b.autofocus&&!il){gT(this);}this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:false,focused:false,suppressEdits:false,pasteIncoming:false,cutIncoming:false,draggingText:false,highlight:new gB()};if(gz){setTimeout(iI(g4,this,true),20);}f7(this);fP();var d=this;hR(this,function(){d.curOp.forceUpdate=true;iF(d,e);if((b.autofocus&&!il)||hf()==a.input){setTimeout(iI(ir,d),20);}else{l7(d);}for(var f in fT){if(fT.hasOwnProperty(f)){fT[f](d,b[f],l0);}}for(var g=0;g<lK.length;++g){lK[g](d);}});}function gC(d,b){var a=this;var c=a.input=f0("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none");if(ki){c.style.width="1000px";}else{c.setAttribute("wrap","off");}if(hK){c.style.border="1px solid black";}c.setAttribute("autocorrect","off");c.setAttribute("autocapitalize","off");c.setAttribute("spellcheck","false");a.inputDiv=f0("div",[c],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");a.scrollbarH=f0("div",[f0("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");a.scrollbarV=f0("div",[f0("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar");a.scrollbarFiller=f0("div",null,"CodeMirror-scrollbar-filler");a.gutterFiller=f0("div",null,"CodeMirror-gutter-filler");a.lineDiv=f0("div",null,"CodeMirror-code");a.selectionDiv=f0("div",null,null,"position: relative; z-index: 1");a.cursorDiv=f0("div",null,"CodeMirror-cursors");a.measure=f0("div",null,"CodeMirror-measure");a.lineMeasure=f0("div",null,"CodeMirror-measure");a.lineSpace=f0("div",[a.measure,a.lineMeasure,a.selectionDiv,a.cursorDiv,a.lineDiv],null,"position: relative; outline: none");a.mover=f0("div",[f0("div",[a.lineSpace],"CodeMirror-lines")],null,"position: relative");a.sizer=f0("div",[a.mover],"CodeMirror-sizer");a.heightForcer=f0("div",null,null,"position: absolute; height: "+kE+"px; width: 1px;");a.gutters=f0("div",null,"CodeMirror-gutters");a.lineGutter=null;a.scroller=f0("div",[a.sizer,a.heightForcer,a.gutters],"CodeMirror-scroll");a.scroller.setAttribute("tabIndex","-1");a.wrapper=f0("div",[a.inputDiv,a.scrollbarH,a.scrollbarV,a.scrollbarFiller,a.gutterFiller,a.scroller],"CodeMirror");if(l2){a.gutters.style.zIndex=-1;a.scroller.style.paddingRight=0;}if(hK){c.style.width="0px";}if(!ki){a.scroller.draggable=true;}if(fW){a.inputDiv.style.height="1px";a.inputDiv.style.position="absolute";}if(l2){a.scrollbarH.style.minHeight=a.scrollbarV.style.minWidth="18px";}if(d.appendChild){d.appendChild(a.wrapper);}else{d(a.wrapper);}a.viewFrom=a.viewTo=b.first;a.view=[];a.externalMeasured=null;a.viewOffset=0;a.lastSizeC=0;a.updateLineNumbers=null;a.lineNumWidth=a.lineNumInnerWidth=a.lineNumChars=null;a.prevInput="";a.alignWidgets=false;a.pollingFast=false;a.poll=new gB();a.cachedCharWidth=a.cachedTextHeight=a.cachedPaddingH=null;a.inaccurateSelection=false;a.maxLine=null;a.maxLineLength=0;a.maxLineChanged=false;a.wheelDX=a.wheelDY=a.wheelStartX=a.wheelStartY=null;a.shift=false;a.selForContextMenu=null;}function kl(a){a.doc.mode=km.getMode(a.options,a.doc.modeOption);h1(a);}function h1(a){a.doc.iter(function(b){if(b.stateAfter){b.stateAfter=null;}if(b.styles){b.styles=null;}});a.doc.frontier=a.doc.first;ip(a,100);a.state.modeGen++;if(a.curOp){lx(a);}}function gG(a){if(a.options.lineWrapping){gm(a.display.wrapper,"CodeMirror-wrap");a.display.sizer.style.minWidth="";}else{i0(a.display.wrapper,"CodeMirror-wrap");iZ(a);}jw(a);lx(a);lq(a);setTimeout(function(){hP(a);},100);}function fU(d){var b=l5(d.display),c=d.options.lineWrapping;var a=c&&Math.max(5,d.display.scroller.clientWidth/hy(d.display)-3);return function(f){if(h9(d.doc,f)){return 0;}var g=0;if(f.widgets){for(var e=0;e<f.widgets.length;e++){if(f.widgets[e].height){g+=f.widgets[e].height;}}}if(c){return g+(Math.ceil(f.text.length/a)||1)*b;}else{return g+b;}};}function jw(c){var a=c.doc,b=fU(c);a.iter(function(d){var e=b(d);if(e!=d.height){gZ(d,e);}});}function gF(c){var a=hx[c.options.keyMap],b=a.style;c.display.wrapper.className=c.display.wrapper.className.replace(/\s*cm-keymap-\S+/g,"")+(b?" cm-keymap-"+b:"");}function kG(a){a.display.wrapper.className=a.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+a.options.theme.replace(/(^|\s)\s*/g," cm-s-");lq(a);}function hN(a){iD(a);lx(a);setTimeout(function(){gK(a);},20);}function iD(d){var c=d.display.gutters,e=d.options.gutters;i6(c);for(var b=0;b<e.length;++b){var a=e[b];var f=c.appendChild(f0("div",null,"CodeMirror-gutter "+a));if(a=="CodeMirror-linenumbers"){d.display.lineGutter=f;f.style.width=(d.display.lineNumWidth||1)+"px";}}c.style.display=b?"":"none";j5(d);}function j5(b){var a=b.display.gutters.offsetWidth;b.display.sizer.style.marginLeft=a+"px";b.display.scrollbarH.style.left=b.options.fixedGutter?a+"px":0;}function hX(b){if(b.height==0){return 0;}var c=b.text.length,d,e=b;while(d=gw(e)){var a=d.find(0,true);e=a.from.line;c+=a.from.ch-a.to.ch;}e=b;while(d=jB(e)){var a=d.find(0,true);c-=e.text.length-a.from.ch;e=a.to.line;c+=e.text.length-a.to.ch;}return c;}function iZ(c){var a=c.display,b=c.doc;a.maxLine=hn(b,b.first);a.maxLineLength=hX(a.maxLine);a.maxLineChanged=true;b.iter(function(e){var d=hX(e);if(d>a.maxLineLength){a.maxLineLength=d;a.maxLine=e;}});}function lW(b){var a=lc(b.gutters,"CodeMirror-linenumbers");if(a==-1&&b.lineNumbers){b.gutters=b.gutters.concat(["CodeMirror-linenumbers"]);}else{if(a>-1&&!b.lineNumbers){b.gutters=b.gutters.slice(0);b.gutters.splice(a,1);}}}function hF(a){var b=a.display.scroller;return{clientHeight:b.clientHeight,barHeight:a.display.scrollbarV.clientHeight,scrollWidth:b.scrollWidth,clientWidth:b.clientWidth,barWidth:a.display.scrollbarH.clientWidth,docHeight:Math.round(a.doc.height+jo(a.display))};}function hP(d,g){if(!g){g=hF(d);}var e=d.display;var h=g.docHeight+kE;var f=g.scrollWidth>g.clientWidth;var b=h>g.clientHeight;if(b){e.scrollbarV.style.display="block";e.scrollbarV.style.bottom=f?iL(e.measure)+"px":"0";e.scrollbarV.firstChild.style.height=Math.max(0,h-g.clientHeight+(g.barHeight||e.scrollbarV.clientHeight))+"px";}else{e.scrollbarV.style.display="";e.scrollbarV.firstChild.style.height="0";}if(f){e.scrollbarH.style.display="block";e.scrollbarH.style.right=b?iL(e.measure)+"px":"0";e.scrollbarH.firstChild.style.width=(g.scrollWidth-g.clientWidth+(g.barWidth||e.scrollbarH.clientWidth))+"px";}else{e.scrollbarH.style.display="";e.scrollbarH.firstChild.style.width="0";}if(f&&b){e.scrollbarFiller.style.display="block";e.scrollbarFiller.style.height=e.scrollbarFiller.style.width=iL(e.measure)+"px";}else{e.scrollbarFiller.style.display="";}if(f&&d.options.coverGutterNextToScrollbar&&d.options.fixedGutter){e.gutterFiller.style.display="block";e.gutterFiller.style.height=iL(e.measure)+"px";e.gutterFiller.style.width=e.gutters.offsetWidth+"px";}else{e.gutterFiller.style.display="";}if(!d.state.checkedOverlayScrollbar&&g.clientHeight>0){if(iL(e.measure)===0){var c=k0&&!jZ?"12px":"18px";e.scrollbarV.style.minWidth=e.scrollbarH.style.minHeight=c;var a=function(i){if(ke(i)!=e.scrollbarV&&ke(i)!=e.scrollbarH){kb(d,jJ)(i);}};lk(e.scrollbarV,"mousedown",a);lk(e.scrollbarH,"mousedown",a);}d.state.checkedOverlayScrollbar=true;}}function k1(i,e,c){var h=c&&c.top!=null?Math.max(0,c.top):i.scroller.scrollTop;h=Math.floor(h-hA(i));var b=c&&c.bottom!=null?c.bottom:h+i.wrapper.clientHeight;var g=jv(e,h),f=jv(e,b);if(c&&c.ensure){var a=c.ensure.from.line,d=c.ensure.to.line;if(a<g){return{from:a,to:jv(e,lG(hn(e,a))+i.wrapper.clientHeight)};}if(Math.min(d,e.lastLine())>=f){return{from:jv(e,lG(hn(e,d))-i.wrapper.clientHeight),to:d};}}return{from:g,to:Math.max(f,g+1)};}function gK(c){var e=c.display,d=e.view;if(!e.alignWidgets&&(!e.gutters.firstChild||!c.options.fixedGutter)){return;}var g=jj(e)-e.scroller.scrollLeft+c.doc.scrollLeft;var b=e.gutters.offsetWidth,a=g+"px";for(var h=0;h<d.length;h++){if(!d[h].hidden){if(c.options.fixedGutter&&d[h].gutter){d[h].gutter.style.left=a;}var f=d[h].alignable;if(f){for(var i=0;i<f.length;i++){f[i].style.left=a;}}}}if(c.options.fixedGutter){e.gutters.style.left=(g+b)+"px";}}function iW(d){if(!d.options.lineNumbers){return false;}var f=d.doc,c=jN(d.options,f.first+f.size-1),g=d.display;if(c.length!=g.lineNumChars){var e=g.measure.appendChild(f0("div",[f0("div",c)],"CodeMirror-linenumber CodeMirror-gutter-elt"));var b=e.firstChild.offsetWidth,a=e.offsetWidth-b;g.lineGutter.style.width="";g.lineNumInnerWidth=Math.max(b,g.lineGutter.offsetWidth-a);g.lineNumWidth=g.lineNumInnerWidth+a;g.lineNumChars=g.lineNumInnerWidth?c.length:-1;g.lineGutter.style.width=g.lineNumWidth+"px";j5(d);return true;}return false;}function jN(b,a){return String(b.lineNumberFormatter(a+b.firstLineNumber));}function jj(a){return a.scroller.getBoundingClientRect().left-a.sizer.getBoundingClientRect().left;}function hm(g,d,c){var e=g.display.viewFrom,f=g.display.viewTo,i;var b=k1(g.display,g.doc,d);for(var j=true;;j=false){var a=g.display.scroller.clientWidth;if(!jm(g,b,c)){break;}i=true;if(g.display.maxLineChanged&&!g.options.lineWrapping){jg(g);}var h=hF(g);jL(g);hG(g,h);hP(g,h);if(ki&&g.options.lineWrapping){g1(g,h);}if(j&&g.options.lineWrapping&&a!=g.display.scroller.clientWidth){c=true;continue;}c=false;if(d&&d.top!=null){d={top:Math.min(h.docHeight-kE-h.clientHeight,d.top)};}b=k1(g.display,g.doc,d);if(b.from>=g.display.viewFrom&&b.to<=g.display.viewTo){break;}}g.display.updateLineNumbers=null;if(i){lD(g,"update",g);if(g.display.viewFrom!=e||g.display.viewTo!=f){lD(g,"viewportChange",g,g.display.viewFrom,g.display.viewTo);}}return i;}function jm(d,l,c){var j=d.display,e=d.doc;if(!j.wrapper.offsetWidth){jr(d);return;}if(!c&&l.from>=j.viewFrom&&l.to<=j.viewTo&&jE(d)==0){return;}if(iW(d)){jr(d);}var f=hs(d);var k=e.first+e.size;var g=Math.max(l.from-d.options.viewportMargin,e.first);var h=Math.min(k,l.to+d.options.viewportMargin);if(j.viewFrom<g&&g-j.viewFrom<20){g=Math.max(e.first,j.viewFrom);}if(j.viewTo>h&&j.viewTo-h<20){h=Math.min(k,j.viewTo);}if(lL){g=l6(d.doc,g);h=i2(d.doc,h);}var a=g!=j.viewFrom||h!=j.viewTo||j.lastSizeC!=j.wrapper.clientHeight;kz(d,g,h);j.viewOffset=lG(hn(d.doc,j.viewFrom));d.display.mover.style.top=j.viewOffset+"px";var b=jE(d);if(!a&&b==0&&!c){return;}var i=hf();if(b>4){j.lineDiv.style.display="none";}ja(d,j.updateLineNumbers,f);if(b>4){j.lineDiv.style.display="";}if(i&&hf()!=i&&i.offsetHeight){i.focus();}i6(j.cursorDiv);i6(j.selectionDiv);if(a){j.lastSizeC=j.wrapper.clientHeight;ip(d,400);}lJ(d);return true;}function jg(d){var e=d.display;var b=ih(d,e.maxLine,e.maxLine.text.length).left;e.maxLineChanged=false;var c=Math.max(0,b+3);var a=Math.max(0,e.sizer.offsetLeft+c+kE-e.scroller.clientWidth);e.sizer.style.minWidth=c+"px";if(a<d.doc.scrollLeft){jF(d,Math.min(e.scroller.scrollLeft,a),true);}}function hG(b,a){b.display.sizer.style.minHeight=b.display.heightForcer.style.top=a.docHeight+"px";b.display.gutters.style.height=Math.max(a.docHeight,a.clientHeight-kE)+"px";}function g1(b,a){if(b.display.sizer.offsetWidth+b.display.gutters.offsetWidth<b.display.scroller.clientWidth-1){b.display.sizer.style.minHeight=b.display.heightForcer.style.top="0px";b.display.gutters.style.height=a.docHeight+"px";}}function lJ(e){var g=e.display;var a=g.lineDiv.offsetTop;for(var j=0;j<g.view.length;j++){var d=g.view[j],c;if(d.hidden){continue;}if(l2){var h=d.node.offsetTop+d.node.offsetHeight;c=h-a;a=h;}else{var i=d.node.getBoundingClientRect();c=i.bottom-i.top;}var f=d.line.height-c;if(c<2){c=l5(g);}if(f>0.001||f<-0.001){gZ(d.line,c);l4(d.line);if(d.rest){for(var b=0;b<d.rest.length;b++){l4(d.rest[b]);}}}}}function l4(b){if(b.widgets){for(var a=0;a<b.widgets.length;++a){b.widgets[a].height=b.widgets[a].node.offsetHeight;}}}function hs(d){var f=d.display,a={},b={};for(var e=f.gutters.firstChild,c=0;e;e=e.nextSibling,++c){a[d.options.gutters[c]]=e.offsetLeft;b[d.options.gutters[c]]=e.offsetWidth;}return{fixedPos:jj(f),gutterTotalWidth:f.gutters.offsetWidth,gutterLeft:a,gutterWidth:b,wrapperWidth:f.wrapper.clientWidth};}function ja(e,n,f){var i=e.display,c=e.options.lineNumbers;var b=i.lineDiv,d=b.firstChild;function j(o){var p=o.nextSibling;if(ki&&k0&&e.display.currentWheelTarget==o){o.style.display="none";}else{o.parentNode.removeChild(o);}return p;}var h=i.view,k=i.viewFrom;for(var m=0;m<h.length;m++){var l=h[m];if(l.hidden){}else{if(!l.node){var a=mi(e,l,k,f);b.insertBefore(a,d);}else{while(d!=l.node){d=j(d);}var g=c&&n!=null&&n<=k&&l.lineNumber;if(l.changes){if(lc(l.changes,"gutter")>-1){g=false;}jn(e,l,k,f);}if(g){i6(l.lineNumber);l.lineNumber.appendChild(document.createTextNode(jN(e.options,k)));}d=l.node.nextSibling;}}k+=l.size;}while(d){d=j(d);}}function jn(d,b,f,e){for(var c=0;c<b.changes.length;c++){var a=b.changes[c];if(a=="text"){hb(d,b);}else{if(a=="gutter"){jp(d,b,f,e);}else{if(a=="class"){ht(b);}else{if(a=="widget"){ll(b,e);}}}}}b.changes=null;}function ge(a){if(a.node==a.text){a.node=f0("div",null,null,"position: relative");if(a.text.parentNode){a.text.parentNode.replaceChild(a.node,a.text);}a.node.appendChild(a.text);if(l2){a.node.style.zIndex=2;}}return a.node;}function jD(b){var c=b.bgClass?b.bgClass+" "+(b.line.bgClass||""):b.line.bgClass;if(c){c+=" CodeMirror-linebackground";}if(b.background){if(c){b.background.className=c;}else{b.background.parentNode.removeChild(b.background);b.background=null;}}else{if(c){var a=ge(b);b.background=a.insertBefore(f0("div",null,c),a.firstChild);}}}function g3(c,b){var a=c.display.externalMeasured;if(a&&a.line==b.line){c.display.externalMeasured=null;b.measure=a.measure;return a.built;}return gs(c,b);}function hb(d,a){var c=a.text.className;var b=g3(d,a);if(a.text==a.node){a.node=b.pre;}a.text.parentNode.replaceChild(b.pre,a.text);a.text=b.pre;if(b.bgClass!=a.bgClass||b.textClass!=a.textClass){a.bgClass=b.bgClass;a.textClass=b.textClass;ht(a);}else{if(c){a.text.className=c;}}}function ht(a){jD(a);if(a.line.wrapClass){ge(a).className=a.line.wrapClass;}else{if(a.node!=a.text){a.node.className="";}}var b=a.textClass?a.textClass+" "+(a.line.textClass||""):a.line.textClass;a.text.className=b||"";}function jp(d,f,g,e){if(f.gutter){f.node.removeChild(f.gutter);f.gutter=null;}var i=f.line.gutterMarkers;if(d.options.lineNumbers||i){var a=ge(f);var h=f.gutter=a.insertBefore(f0("div",null,"CodeMirror-gutter-wrapper","position: absolute; left: "+(d.options.fixedGutter?e.fixedPos:-e.gutterTotalWidth)+"px"),f.text);if(d.options.lineNumbers&&(!i||!i["CodeMirror-linenumbers"])){f.lineNumber=h.appendChild(f0("div",jN(d.options,g),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+e.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+d.display.lineNumInnerWidth+"px"));}if(i){for(var j=0;j<d.options.gutters.length;++j){var b=d.options.gutters[j],c=i.hasOwnProperty(b)&&i[b];if(c){h.appendChild(f0("div",[c],"CodeMirror-gutter-elt","left: "+e.gutterLeft[b]+"px; width: "+e.gutterWidth[b]+"px"));}}}}}function ll(d,a){if(d.alignable){d.alignable=null;}for(var b=d.node.firstChild,c;b;b=c){var c=b.nextSibling;if(b.className=="CodeMirror-linewidget"){d.node.removeChild(b);}}im(d,a);}function mi(d,b,a,e){var c=g3(d,b);b.text=b.node=c.pre;if(c.bgClass){b.bgClass=c.bgClass;}if(c.textClass){b.textClass=c.textClass;}ht(b);jp(d,b,a,e);im(b,e);return b.node;}function im(b,a){gX(b.line,b,a,true);if(b.rest){for(var c=0;c<b.rest.length;c++){gX(b.rest[c],b,a,false);}}}function gX(c,f,d,h){if(!c.widgets){return;}var b=ge(f);for(var i=0,e=c.widgets;i<e.length;++i){var g=e[i],a=f0("div",[g.node],"CodeMirror-linewidget");if(!g.handleMouseEvents){a.ignoreEvents=true;}jA(g,a,f,d);if(h&&g.above){b.insertBefore(a,f.gutter||f.text);}else{b.appendChild(a);}lD(g,"redraw");}}function jA(a,b,d,e){if(a.noHScroll){(d.alignable||(d.alignable=[])).push(b);var c=e.wrapperWidth;b.style.left=e.fixedPos+"px";if(!a.coverGutter){c-=e.gutterTotalWidth;b.style.paddingLeft=e.gutterTotalWidth+"px";}b.style.width=c+"px";}if(a.coverGutter){b.style.zIndex=5;b.style.position="relative";if(!a.noHScroll){b.style.marginLeft=-e.gutterTotalWidth+"px";}}}var jy=km.Pos=function(b,a){if(!(this instanceof jy)){return new jy(b,a);}this.line=b;this.ch=a;};var lT=km.cmpPos=function(a,b){return a.line-b.line||a.ch-b.ch;};function lM(a){return jy(a.line,a.ch);}function j2(a,b){return lT(a,b)<0?b:a;}function lj(a,b){return lT(a,b)<0?a:b;}function fZ(b,a){this.ranges=b;this.primIndex=a;}fZ.prototype={primary:function(){return this.ranges[this.primIndex];},equals:function(d){if(d==this){return true;}if(d.primIndex!=this.primIndex||d.ranges.length!=this.ranges.length){return false;}for(var b=0;b<this.ranges.length;b++){var c=this.ranges[b],a=d.ranges[b];if(lT(c.anchor,a.anchor)!=0||lT(c.head,a.head)!=0){return false;}}return true;},deepCopy:function(){for(var b=[],a=0;a<this.ranges.length;a++){b[a]=new jh(lM(this.ranges[a].anchor),lM(this.ranges[a].head));}return new fZ(b,this.primIndex);},somethingSelected:function(){for(var a=0;a<this.ranges.length;a++){if(!this.ranges[a].empty()){return true;}}return false;},contains:function(a,d){if(!d){d=a;}for(var b=0;b<this.ranges.length;b++){var c=this.ranges[b];if(lT(d,c.from())>=0&&lT(a,c.to())<=0){return b;}}return -1;}};function jh(b,a){this.anchor=b;this.head=a;}jh.prototype={from:function(){return lj(this.anchor,this.head);},to:function(){return j2(this.anchor,this.head);},empty:function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch;}};function iH(b,d){var i=b[d];b.sort(function(j,k){return lT(j.from(),k.from());});d=lc(b,i);for(var g=1;g<b.length;g++){var c=b[g],a=b[g-1];if(lT(a.to(),c.from())>=0){var f=lj(a.from(),c.from()),e=j2(a.to(),c.to());var h=a.empty()?c.from()==c.head:a.from()==a.head;if(g<=d){--d;}b.splice(--g,2,new jh(h?e:f,h?f:e));}}return new fZ(b,d);}function gt(b,a){return new fZ([new jh(b,a||b)],0);}function j1(b,a){return Math.max(b.first,Math.min(a,b.first+b.size-1));}function gd(b,a){if(a.line<b.first){return jy(b.first,0);}var c=b.first+b.size-1;if(a.line>c){return jy(c,hn(b,c).text.length);}return iq(a,hn(b,a.line).text.length);}function iq(a,b){var c=a.ch;if(c==null||c>b){return jy(a.line,b);}else{if(c<0){return jy(a.line,0);}else{return a;}}}function kS(a,b){return b>=a.first&&b<a.first+a.size;}function je(b,a){for(var d=[],c=0;c<a.length;c++){d[c]=gd(b,a[c]);}return d;}function ic(e,c,f,d){if(e.cm&&e.cm.display.shift||e.extend){var a=c.anchor;if(d){var b=lT(f,a)<0;if(b!=(lT(d,a)<0)){a=f;f=d;}else{if(b!=(lT(f,d)<0)){f=d;}}}return new jh(a,f);}else{return new jh(d||f,f);}}function f3(a,b,d,c){lr(a,new fZ([ic(a,a.sel.primary(),b,d)],0),c);}function kZ(e,f,b){for(var c=[],a=0;a<e.sel.ranges.length;a++){c[a]=ic(e,e.sel.ranges[a],f[a],null);}var d=iH(c,e.sel.primIndex);lr(e,d,b);}function i3(e,a,c,b){var d=e.sel.ranges.slice(0);d[a]=c;lr(e,iH(d,e.sel.primIndex),b);}function ku(a,c,b,d){lr(a,gt(c,b),d);}function i9(a,c){var b={ranges:c.ranges,update:function(d){this.ranges=[];for(var e=0;e<d.length;e++){this.ranges[e]=new jh(gd(a,d[e].anchor),gd(a,d[e].head));}}};kK(a,"beforeSelectionChange",a,b);if(a.cm){kK(a.cm,"beforeSelectionChange",a.cm,b);}if(b.ranges!=c.ranges){return iH(b.ranges,b.ranges.length-1);}else{return c;}}function hD(e,a,c){var d=e.history.done,b=gf(d);if(b&&b.ranges){d[d.length-1]=a;jY(e,a,c);}else{lr(e,a,c);}}function lr(a,b,c){jY(a,b,c);gN(a,a.sel,a.cm?a.cm.curOp.id:NaN,c);}function jY(a,b,c){if(hh(a,"beforeSelectionChange")||a.cm&&hh(a.cm,"beforeSelectionChange")){b=i9(a,b);}var d=c&&c.bias||(lT(b.primary().head,a.sel.primary().head)<0?-1:1);jM(a,iC(a,b,d,true));if(!(c&&c.scroll===false)&&a.cm){gg(a.cm);}}function jM(a,b){if(b.equals(a.sel)){return;}a.sel=b;if(a.cm){a.cm.curOp.updateInput=a.cm.curOp.selectionChanged=true;jC(a.cm);}lD(a,"cursorActivity",a);}function g0(a){jM(a,iC(a,a.sel,null,false),jq);}function iC(c,b,f,e){var i;for(var h=0;h<b.ranges.length;h++){var g=b.ranges[h];var d=lp(c,g.anchor,f,e);var a=lp(c,g.head,f,e);if(i||d!=g.anchor||a!=g.head){if(!i){i=b.ranges.slice(0,h);}i[h]=new jh(d,a);}}return i?iH(i,b.primIndex):b;}function lp(e,f,i,h){var d=false,l=f;var k=i||1;e.cantEdit=false;search:for(;;){var c=hn(e,l.line);if(c.markedSpans){for(var j=0;j<c.markedSpans.length;++j){var b=c.markedSpans[j],a=b.marker;if((b.from==null||(a.inclusiveLeft?b.from<=l.ch:b.from<l.ch))&&(b.to==null||(a.inclusiveRight?b.to>=l.ch:b.to>l.ch))){if(h){kK(a,"beforeCursorEnter");if(a.explicitlyCleared){if(!c.markedSpans){break;}else{--j;continue;}}}if(!a.atomic){continue;}var g=a.find(k<0?-1:1);if(lT(g,l)==0){g.ch+=k;if(g.ch<0){if(g.line>e.first){g=gd(e,jy(g.line-1));}else{g=null;}}else{if(g.ch>c.text.length){if(g.line<e.first+e.size-1){g=jy(g.line+1,0);}else{g=null;}}}if(!g){if(d){if(!h){return lp(e,f,i,true);}e.cantEdit=true;return jy(e.first,0);}d=true;g=f;k=-k;}}l=g;continue search;}}}return l;}}function jL(c){var h=c.display,d=c.doc;var f=document.createDocumentFragment();var l=document.createDocumentFragment();for(var j=0;j<d.sel.ranges.length;j++){var i=d.sel.ranges[j];var k=i.empty();if(k||c.options.showCursorWhenSelecting){kI(c,i,f);}if(!k){jI(c,i,l);}}if(c.options.moveInputWithCursor){var g=g5(c,d.sel.primary().head,"div");var b=h.wrapper.getBoundingClientRect(),m=h.lineDiv.getBoundingClientRect();var e=Math.max(0,Math.min(h.wrapper.clientHeight-10,g.top+m.top-b.top));var a=Math.max(0,Math.min(h.wrapper.clientWidth-10,g.left+m.left-b.left));h.inputDiv.style.top=e+"px";h.inputDiv.style.left=a+"px";}lw(h.cursorDiv,f);lw(h.selectionDiv,l);}function kI(d,a,b){var e=g5(d,a.head,"div");var f=b.appendChild(f0("div","\u00a0","CodeMirror-cursor"));f.style.left=e.left+"px";f.style.top=e.top+"px";f.style.height=Math.max(0,e.bottom-e.top)*d.options.cursorHeight+"px";if(e.other){var c=b.appendChild(f0("div","\u00a0","CodeMirror-cursor CodeMirror-secondarycursor"));c.style.display="";c.style.left=e.other.left+"px";c.style.top=e.other.top+"px";c.style.height=(e.other.bottom-e.other.top)*0.85+"px";}}function jI(p,j,o){var g=p.display,c=p.doc;var b=document.createDocumentFragment();var k=hE(p.display),q=k.left,f=g.lineSpace.offsetWidth-k.right;function i(s,t,u,v){if(t<0){t=0;}t=Math.round(t);v=Math.round(v);b.appendChild(f0("div",null,"CodeMirror-selected","position: absolute; left: "+s+"px; top: "+t+"px; width: "+(u==null?f-s:u)+"px; height: "+(v-t)+"px"));}function a(u,s,x){var t=hn(c,u);var z=t.text.length;var w,v;function y(A,B){return hW(p,jy(u,A),"div",t,B);}iX(ji(t),s||0,x==null?z:x,function(G,H,F){var C=y(G,"left"),B,A,D;if(G==H){B=C;A=D=C.left;}else{B=y(H-1,"right");if(F=="rtl"){var E=C;C=B;B=E;}A=C.left;D=B.right;}if(s==null&&G==0){A=q;}if(B.top-C.top>3){i(A,C.top,null,C.bottom);A=q;if(C.bottom<B.top){i(A,C.bottom,null,B.top);}}if(x==null&&H==z){D=f;}if(!w||C.top<w.top||C.top==w.top&&C.left<w.left){w=C;}if(!v||B.bottom>v.bottom||B.bottom==v.bottom&&B.right>v.right){v=B;}if(A<q+1){A=q;}i(A,B.top,D-A,B.bottom);});return{start:w,end:v};}var d=j.from(),e=j.to();if(d.line==e.line){a(d.line,d.ch,e.ch);}else{var r=hn(c,d.line),m=hn(c,e.line);var n=hS(r)==hS(m);var l=a(d.line,d.ch,n?r.text.length+1:null).end;var h=a(e.line,n?0:null,e.ch).start;if(n){if(l.top<h.top-2){i(l.right,l.top,null,l.bottom);i(q,h.top,h.left,h.bottom);}else{i(l.right,l.top,h.left-l.right,l.bottom);}}if(l.bottom<h.top){i(q,l.bottom,null,h.top);}}o.appendChild(b);}function iy(c){if(!c.state.focused){return;}var a=c.display;clearInterval(a.blinker);var b=true;a.cursorDiv.style.visibility="";if(c.options.cursorBlinkRate>0){a.blinker=setInterval(function(){a.cursorDiv.style.visibility=(b=!b)?"":"hidden";},c.options.cursorBlinkRate);}}function ip(b,a){if(b.doc.mode.startState&&b.doc.frontier<b.display.viewTo){b.state.highlight.set(a,iI(kD,b));}}function kD(d){var a=d.doc;if(a.frontier<a.first){a.frontier=a.first;}if(a.frontier>=d.display.viewTo){return;}var c=+new Date+d.options.workTime;var b=k8(a.mode,hC(d,a.frontier));hR(d,function(){a.iter(a.frontier,Math.min(a.first+a.size,d.display.viewTo+500),function(i){if(a.frontier>=d.display.viewFrom){var g=i.styles;var f=gn(d,i,b,true);i.styles=f.styles;if(f.classes){i.styleClasses=f.classes;}else{if(i.styleClasses){i.styleClasses=null;}}var e=!g||g.length!=i.styles.length;for(var h=0;!e&&h<g.length;++h){e=g[h]!=i.styles[h];}if(e){jU(d,a.frontier,"text");}i.stateAfter=k8(a.mode,b);}else{hL(d,i.text,b);i.stateAfter=a.frontier%5==0?k8(a.mode,b):null;}++a.frontier;if(+new Date>c){ip(d,d.options.workDelay);return true;}});});}function iz(f,b,i){var a,h,g=f.doc;var j=i?-1:b-(f.doc.mode.innerMode?1000:100);for(var c=b;c>j;--c){if(c<=g.first){return g.first;}var d=hn(g,c-1);if(d.stateAfter&&(!i||c<=g.frontier)){return c;}var e=ls(d.text,null,f.options.tabSize);if(h==null||a>e){h=c-1;a=e;}}return h;}function hC(d,e,c){var g=d.doc,a=d.display;if(!g.mode.startState){return true;}var f=iz(d,e,c),b=f>g.first&&hn(g,f-1).stateAfter;if(!b){b=le(g.mode);}else{b=k8(g.mode,b);}g.iter(f,e,function(i){hL(d,i.text,b);var h=f==e-1||f%5==0||f>=a.viewFrom&&f<a.viewTo;i.stateAfter=h?k8(g.mode,b):null;++f;});if(c){g.frontier=f;}return b;}function hA(a){return a.lineSpace.offsetTop;}function jo(a){return a.mover.offsetHeight-a.lineSpace.offsetHeight;}function hE(a){if(a.cachedPaddingH){return a.cachedPaddingH;}var b=lw(a.measure,f0("pre","x"));var d=window.getComputedStyle?window.getComputedStyle(b):b.currentStyle;var c={left:parseInt(d.paddingLeft),right:parseInt(d.paddingRight)};if(!isNaN(c.left)&&!isNaN(c.right)){a.cachedPaddingH=c;}return c;}function lN(e,i,f){var j=e.options.lineWrapping;var h=j&&e.display.scroller.clientWidth;if(!i.measure.heights||j&&i.measure.width!=h){var g=i.measure.heights=[];if(j){i.measure.width=h;var c=i.text.firstChild.getClientRects();for(var b=0;b<c.length-1;b++){var d=c[b],a=c[b+1];if(Math.abs(d.bottom-a.bottom)>2){g.push((d.bottom+a.top)/2-f.top);}}}g.push(f.bottom-f.top);}}function iQ(b,d,a){if(b.line==d){return{map:b.measure.map,cache:b.measure.cache};}for(var c=0;c<b.rest.length;c++){if(b.rest[c]==d){return{map:b.measure.maps[c],cache:b.measure.caches[c]};}}for(var c=0;c<b.rest.length;c++){if(lE(b.rest[c])>a){return{map:b.measure.maps[c],cache:b.measure.caches[c],before:true};}}}function kf(d,b){b=hS(b);var e=lE(b);var c=d.display.externalMeasured=new j8(d.doc,b,e);c.lineN=e;var a=c.built=gs(d,c);c.text=a.pre;lw(d.display.lineMeasure,a.pre);return c;}function ih(d,c,a,b){return kC(d,lR(d,c),a,b);}function hu(c,a){if(a>=c.display.viewFrom&&a<c.display.viewTo){return c.display.view[kV(c,a)];}var b=c.display.externalMeasured;if(b&&a>=b.lineN&&a<b.lineN+b.size){return b;}}function lR(d,b){var a=lE(b);var c=hu(d,a);if(c&&!c.text){c=null;}else{if(c&&c.changes){jn(d,c,a,hs(d));}}if(!c){c=kf(d,b);}var e=iQ(c,b,a);return{line:b,view:c,rect:null,map:e.map,cache:e.cache,before:e.before,hasHeights:false};}function kC(d,e,a,c){if(e.before){a=-1;}var b=a+(c||""),f;if(e.cache.hasOwnProperty(b)){f=e.cache[b];}else{if(!e.rect){e.rect=e.view.text.getBoundingClientRect();}if(!e.hasHeights){lN(d,e.view,e.rect);e.hasHeights=true;}f=iP(d,e,a,c);if(!f.bogus){e.cache[b]=f;}}return{left:f.left,right:f.right,top:f.top,bottom:f.bottom};}var gR={left:0,right:0,top:0,bottom:0};function iP(n,f,l,p){var c=f.map;var i,q,r,b;for(var g=0;g<c.length;g+=3){var d=c[g],h=c[g+1];if(l<d){q=0;r=1;b="left";}else{if(l<h){q=l-d;r=q+1;}else{if(g==c.length-3||l==h&&c[g+3]>l){r=h-d;q=r-1;if(l>=h){b="right";}}}}if(q!=null){i=c[g+2];if(d==h&&p==(i.insertLeft?"left":"right")){b=p;}if(p=="left"&&q==0){while(g&&c[g-2]==c[g-3]&&c[g-1].insertLeft){i=c[(g-=3)+2];b="left";}}if(p=="right"&&q==h-d){while(g<c.length-3&&c[g+3]==c[g+4]&&!c[g+5].insertLeft){i=c[(g+=3)+2];b="right";}}break;}}var a;if(i.nodeType==3){while(q&&iB(f.line.text.charAt(d+q))){--q;}while(d+r<h&&iB(f.line.text.charAt(d+r))){++r;}if(kN&&q==0&&r==h-d){a=i.parentNode.getBoundingClientRect();}else{if(hp&&n.options.lineWrapping){var s=jc(i,q,r).getClientRects();if(s.length){a=s[p=="right"?s.length-1:0];}else{a=gR;}}else{a=jc(i,q,r).getBoundingClientRect()||gR;}}}else{if(q>0){b=p="right";}var s;if(n.options.lineWrapping&&(s=i.getClientRects()).length>1){a=s[p=="right"?s.length-1:0];}else{a=i.getBoundingClientRect();}}if(kN&&!q&&(!a||!a.left&&!a.right)){var o=i.parentNode.getClientRects()[0];if(o){a={left:o.left,right:o.left+hy(n.display),top:o.top,bottom:o.bottom};}else{a=gR;}}var j,k=(a.bottom+a.top)/2-f.rect.top;var e=f.view.measure.heights;for(var g=0;g<e.length-1;g++){if(k<e[g]){break;}}j=g?e[g-1]:0;k=e[g];var m={left:(b=="right"?a.right:a.left)-f.rect.left,right:(b=="left"?a.left:a.right)-f.rect.left,top:j,bottom:k};if(!a.left&&!a.right){m.bogus=true;}return m;}function k9(a){if(a.measure){a.measure.cache={};a.measure.heights=null;if(a.rest){for(var b=0;b<a.rest.length;b++){a.measure.caches[b]={};}}}}function md(b){b.display.externalMeasure=null;i6(b.display.lineMeasure);for(var a=0;a<b.display.view.length;a++){k9(b.display.view[a]);}}function lq(a){md(a);a.display.cachedCharWidth=a.display.cachedTextHeight=a.display.cachedPaddingH=null;if(!a.options.lineWrapping){a.display.maxLineChanged=true;}a.display.lineNumChars=null;}function iN(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft;}function iS(){return window.pageYOffset||(document.documentElement||document.body).scrollTop;}function gu(e,h,f,a){if(h.widgets){for(var i=0;i<h.widgets.length;++i){if(h.widgets[i].above){var c=ko(h.widgets[i]);f.top+=c;f.bottom+=c;}}}if(a=="line"){return f;}if(!a){a="local";}var g=lG(h);if(a=="local"){g+=hA(e.display);}else{g-=e.display.viewOffset;}if(a=="page"||a=="window"){var b=e.display.lineSpace.getBoundingClientRect();g+=b.top+(a=="window"?0:iS());var d=b.left+(a=="window"?0:iN());f.left+=d;f.right+=d;}f.top+=g;f.bottom+=g;return f;}function gH(c,g,b){if(b=="div"){return g;}var e=g.left,f=g.top;if(b=="page"){e-=iN();f-=iS();}else{if(b=="local"||!b){var a=c.display.sizer.getBoundingClientRect();e+=a.left;f+=a.top;}}var d=c.display.lineSpace.getBoundingClientRect();return{left:e-d.left,top:f-d.top};}function hW(d,e,a,b,c){if(!b){b=hn(d.doc,e.line);}return gu(d,b,ih(d,b,e.ch,c),a);}function g5(e,f,k,g,c){g=g||hn(e.doc,f.line);if(!c){c=lR(e,g);}function i(l,m){var n=kC(e,c,l,m?"right":"left");if(m){n.left=n.right;}else{n.right=n.left;}return gu(e,g,n,k);}function d(o,n){var m=h[n],l=m.level%2;if(o==hJ(m)&&n&&m.level<h[n-1].level){m=h[--n];o=gJ(m)-(m.level%2?0:1);l=true;}else{if(o==gJ(m)&&n<h.length-1&&m.level<h[n+1].level){m=h[++n];o=hJ(m)-m.level%2;l=false;}}if(l&&o==m.to&&o>m.from){return i(o-1);}return i(o,l);}var h=ji(g),b=f.ch;if(!h){return i(b);}var a=mh(h,b);var j=d(b,a);if(hI!=null){j.other=d(b,hI);}return j;}function hq(d,e){var a=0,e=gd(d.doc,e);if(!d.options.lineWrapping){a=hy(d.display)*e.ch;}var c=hn(d.doc,e.line);var b=lG(c)+hA(d.display);return{left:a,right:a,top:b,bottom:b+c.height};}function f1(d,c,b,e){var a=jy(d,c);a.xRel=e;if(b){a.outside=true;}return a;}function f8(e,h,i){var f=e.doc;i+=e.display.viewOffset;if(i<0){return f1(f.first,0,true,-1);}var j=jv(f,i),d=f.first+f.size-1;if(j>d){return f1(f.first+f.size-1,hn(f,d).text.length,true,1);}if(h<0){h=0;}var a=hn(f,j);for(;;){var c=kk(e,a,j,h,i);var g=jB(a);var b=g&&g.find(0,true);if(g&&(c.ch>b.from.ch||c.ch==b.from.ch&&c.xRel>0)){j=lE(a=b.to.line);}else{return c;}}}function kk(n,y,k,l,m){var o=m-lG(y);var r=false,e=2*n.display.wrapper.clientWidth;var h=lR(n,y);function w(A){var z=g5(n,jy(k,A),"line",y,h);r=true;if(o>z.bottom){return z.left-e;}else{if(o<z.top){return z.left+e;}else{r=false;}}return z.left;}var i=ji(y),f=y.text.length;var d=ia(y),v=kv(y);var g=w(d),b=r,a=w(v),s=r;if(l>a){return f1(k,v,s,1);}for(;;){if(i?v==d||v==h6(y,d,1):v-d<=1){var j=l<g||l-g<=a-l?d:v;var x=l-(j==d?g:a);while(iB(y.text.charAt(j))){++j;}var p=f1(k,j,j==d?b:s,x<-1?-1:x>1?1:0);return p;}var q=Math.ceil(f/2),u=d+q;if(i){u=d;for(var c=0;c<q;++c){u=h6(y,u,1);}}var t=w(u);if(t>l){v=u;a=t;if(s=r){a+=1000;}f=q;}else{d=u;g=t;b=r;f-=q;}}}var mg;function l5(a){if(a.cachedTextHeight!=null){return a.cachedTextHeight;}if(mg==null){mg=f0("pre");for(var b=0;b<49;++b){mg.appendChild(document.createTextNode("x"));mg.appendChild(f0("br"));}mg.appendChild(document.createTextNode("x"));}lw(a.measure,mg);var c=mg.offsetHeight/50;if(c>3){a.cachedTextHeight=c;}i6(a.measure);return c||1;}function hy(e){if(e.cachedCharWidth!=null){return e.cachedCharWidth;}var d=f0("span","xxxxxxxxxx");var a=f0("pre",[d]);lw(e.measure,a);var b=d.getBoundingClientRect(),c=(b.right-b.left)/10;if(c>2){e.cachedCharWidth=c;}return c||10;}var iM=0;function h0(a){a.curOp={viewChanged:false,startHeight:a.doc.height,forceUpdate:false,updateInput:null,typing:false,changeObjs:null,cursorActivityHandlers:null,selectionChanged:false,updateMaxLine:false,scrollLeft:null,scrollTop:null,scrollToPos:null,id:++iM};if(!iU++){kt=[];}}function lo(c){var h=c.curOp,d=c.doc,g=c.display;c.curOp=null;if(h.updateMaxLine){iZ(c);}if(h.viewChanged||h.forceUpdate||h.scrollTop!=null||h.scrollToPos&&(h.scrollToPos.from.line<g.viewFrom||h.scrollToPos.to.line>=g.viewTo)||g.maxLineChanged&&c.options.lineWrapping){var j=hm(c,{top:h.scrollTop,ensure:h.scrollToPos},h.forceUpdate);if(c.display.scroller.offsetHeight){c.doc.scrollTop=c.display.scroller.scrollTop;}}if(!j&&h.selectionChanged){jL(c);}if(!j&&h.startHeight!=c.doc.height){hP(c);}if(g.wheelStartX!=null&&(h.scrollTop!=null||h.scrollLeft!=null||h.scrollToPos)){g.wheelStartX=g.wheelStartY=null;}if(h.scrollTop!=null&&g.scroller.scrollTop!=h.scrollTop){var f=Math.max(0,Math.min(g.scroller.scrollHeight-g.scroller.clientHeight,h.scrollTop));g.scroller.scrollTop=g.scrollbarV.scrollTop=d.scrollTop=f;}if(h.scrollLeft!=null&&g.scroller.scrollLeft!=h.scrollLeft){var a=Math.max(0,Math.min(g.scroller.scrollWidth-g.scroller.clientWidth,h.scrollLeft));g.scroller.scrollLeft=g.scrollbarH.scrollLeft=d.scrollLeft=a;gK(c);}if(h.scrollToPos){var e=ky(c,gd(c.doc,h.scrollToPos.from),gd(c.doc,h.scrollToPos.to),h.scrollToPos.margin);if(h.scrollToPos.isCursor&&c.state.focused){iT(c,e);}}if(h.selectionChanged){iy(c);}if(c.state.focused&&h.updateInput){g4(c,h.typing);}var i=h.maybeHiddenMarkers,b=h.maybeUnhiddenMarkers;if(i){for(var k=0;k<i.length;++k){if(!i[k].lines.length){kK(i[k],"hide");}}}if(b){for(var k=0;k<b.length;++k){if(b[k].lines.length){kK(b[k],"unhide");}}}var l;if(!--iU){l=kt;kt=null;}if(h.changeObjs){kK(c,"changes",c,h.changeObjs);}if(l){for(var k=0;k<l.length;++k){l[k]();}}if(h.cursorActivityHandlers){for(var k=0;k<h.cursorActivityHandlers.length;k++){h.cursorActivityHandlers[k](c);}}}function hR(b,a){if(b.curOp){return a();}h0(b);try{return a();}finally{lo(b);}}function kb(b,a){return function(){if(b.curOp){return a.apply(b,arguments);}h0(b);try{return a.apply(b,arguments);}finally{lo(b);}};}function jQ(a){return function(){if(this.curOp){return a.apply(this,arguments);}h0(this);try{return a.apply(this,arguments);}finally{lo(this);}};}function ig(a){return function(){var b=this.cm;if(!b||b.curOp){return a.apply(this,arguments);}h0(b);try{return a.apply(this,arguments);}finally{lo(b);}};}function j8(a,c,b){this.line=c;this.rest=iV(c);this.size=this.rest?lE(gf(this.rest))-b+1:1;this.node=this.text=null;this.hidden=h9(a,c);}function gp(d,e,f){var g=[],b;for(var a=e;a<f;a=b){var c=new j8(d.doc,hn(d.doc,a),a);b=a+c.size;g.push(c);}return g;}function lx(d,f,e,c){if(f==null){f=d.doc.first;}if(e==null){e=d.doc.first+d.doc.size;}if(!c){c=0;}var i=d.display;if(c&&e<i.viewTo&&(i.updateLineNumbers==null||i.updateLineNumbers>f)){i.updateLineNumbers=f;}d.curOp.viewChanged=true;if(f>=i.viewTo){if(lL&&l6(d.doc,f)<i.viewTo){jr(d);}}else{if(e<=i.viewFrom){if(lL&&i2(d.doc,e+c)>i.viewFrom){jr(d);}else{i.viewFrom+=c;i.viewTo+=c;}}else{if(f<=i.viewFrom&&e>=i.viewTo){jr(d);}else{if(f<=i.viewFrom){var g=js(d,e,e+c,1);if(g){i.view=i.view.slice(g.index);i.viewFrom=g.lineN;i.viewTo+=c;}else{jr(d);}}else{if(e>=i.viewTo){var g=js(d,f,f,-1);if(g){i.view=i.view.slice(0,g.index);i.viewTo=g.lineN;}else{jr(d);}}else{var h=js(d,f,f,-1);var a=js(d,e,e+c,1);if(h&&a){i.view=i.view.slice(0,h.index).concat(gp(d,h.lineN,a.lineN)).concat(i.view.slice(a.index));i.viewTo+=c;}else{jr(d);}}}}}}var b=i.externalMeasured;if(b){if(e<b.lineN){b.lineN+=c;}else{if(f<b.lineN+b.size){i.externalMeasured=null;}}}}function jU(c,b,f){c.curOp.viewChanged=true;var e=c.display,g=c.display.externalMeasured;if(g&&b>=g.lineN&&b<g.lineN+g.size){e.externalMeasured=null;}if(b<e.viewFrom||b>=e.viewTo){return;}var a=e.view[kV(c,b)];if(a.node==null){return;}var d=a.changes||(a.changes=[]);if(lc(d,f)==-1){d.push(f);}}function jr(a){a.display.viewFrom=a.display.viewTo=a.doc.first;a.display.view=[];a.display.viewOffset=0;}function kV(d,a){if(a>=d.display.viewTo){return null;}a-=d.display.viewFrom;if(a<0){return null;}var c=d.display.view;for(var b=0;b<c.length;b++){a-=c[b].size;if(a<0){return b;}}}function js(c,i,g,a){var f=kV(c,i),d,e=c.display.view;if(!lL||g==c.doc.first+c.doc.size){return{index:f,lineN:g};}for(var h=0,b=c.display.viewFrom;h<f;h++){b+=e[h].size;}if(b!=i){if(a>0){if(f==e.length-1){return null;}d=(b+e[f].size)-i;f++;}else{d=b-i;}i+=d;g+=d;}while(l6(c.doc,g)!=g){if(f==(a<0?0:e.length-1)){return null;}g+=a*e[f-(a<0?1:0)].size;f+=a;}return{index:f,lineN:g};}function kz(d,e,a){var b=d.display,c=b.view;if(c.length==0||e>=b.viewTo||a<=b.viewFrom){b.view=gp(d,e,a);b.viewFrom=e;}else{if(b.viewFrom>e){b.view=gp(d,e,b.viewFrom).concat(b.view);}else{if(b.viewFrom<e){b.view=b.view.slice(kV(d,e));}}b.viewFrom=e;if(b.viewTo<a){b.view=b.view.concat(gp(d,b.viewTo,a));}else{if(b.viewTo>a){b.view=b.view.slice(0,kV(d,a));}}}b.viewTo=a;}function jE(d){var c=d.display.view,e=0;for(var a=0;a<c.length;a++){var b=c[a];if(!b.hidden&&(!b.node||b.changes)){++e;}}return e;}function kA(a){if(a.display.pollingFast){return;}a.display.poll.set(a.options.pollInterval,function(){lP(a);if(a.state.focused){kA(a);}});}function kF(c){var b=false;c.display.pollingFast=true;function a(){var d=lP(c);if(!d&&!b){b=true;c.display.poll.set(60,a);}else{c.display.pollingFast=false;kA(c);}}c.display.poll.set(20,a);}function lP(r){var q=r.display.input,n=r.display.prevInput,c=r.doc;if(!r.state.focused||(kg(q)&&!n)||lt(r)||r.options.disableInput){return false;}if(r.state.pasteIncoming&&r.state.fakedLastChar){q.value=q.value.substring(0,q.value.length-1);r.state.fakedLastChar=false;}var o=q.value;if(o==n&&!r.somethingSelected()){return false;}if(hp&&!kN&&r.display.inputHasSelection===o){g4(r);return false;}var g=!r.curOp;if(g){h0(r);}r.display.shift=false;if(o.charCodeAt(0)==8203&&c.sel==r.display.selForContextMenu&&!n){n="\u200b";}var h=0,k=Math.min(n.length,o.length);while(h<k&&n.charCodeAt(h)==o.charCodeAt(h)){++h;}var a=o.slice(h),m=lZ(a);var d=r.state.pasteIncoming&&m.length>1&&c.sel.ranges.length==m.length;for(var f=c.sel.ranges.length-1;f>=0;f--){var l=c.sel.ranges[f];var j=l.from(),b=l.to();if(h<n.length){j=jy(j.line,j.ch-(n.length-h));}else{if(r.state.overwrite&&l.empty()&&!r.state.pasteIncoming){b=jy(b.line,Math.min(hn(c,b.line).text.length,b.ch+gf(m).length));}}var s=r.curOp.updateInput;var e={from:j,to:b,text:d?[m[f]]:m,origin:r.state.pasteIncoming?"paste":r.state.cutIncoming?"cut":"+input"};fS(r.doc,e);lD(r,"inputRead",r,e);if(a&&!r.state.pasteIncoming&&r.options.electricChars&&r.options.smartIndent&&l.head.ch<100&&(!f||c.sel.ranges[f-1].head.line!=l.head.line)){var p=r.getModeAt(l.head);if(p.electricChars){for(var i=0;i<p.electricChars.length;i++){if(a.indexOf(p.electricChars.charAt(i))>-1){lF(r,l.head.line,"smart");break;}}}else{if(p.electricInput){var t=kr(e);if(p.electricInput.test(hn(c,t.line).text.slice(0,t.ch))){lF(r,l.head.line,"smart");}}}}}gg(r);r.curOp.updateInput=s;r.curOp.typing=true;if(o.length>1000||o.indexOf("\n")>-1){q.value=r.display.prevInput="";}else{r.display.prevInput=o;}if(g){lo(r);}r.state.pasteIncoming=r.state.cutIncoming=false;return true;}function g4(d,g){var c,a,e=d.doc;if(d.somethingSelected()){d.display.prevInput="";var b=e.sel.primary();c=jG&&(b.to().line-b.from().line>100||(a=d.getSelection()).length>1000);var f=c?"-":a||d.getSelection();d.display.input.value=f;if(d.state.focused){hj(d.display.input);}if(hp&&!kN){d.display.inputHasSelection=f;}}else{if(!g){d.display.prevInput=d.display.input.value="";if(hp&&!kN){d.display.inputHasSelection=null;}}}d.display.inaccurateSelection=c;}function gT(a){if(a.options.readOnly!="nocursor"&&(!il||hf()!=a.display.input)){a.display.input.focus();}}function ik(a){if(!a.state.focused){gT(a);ir(a);}}function lt(a){return a.options.readOnly||a.doc.cantEdit;}function f7(d){var b=d.display;lk(b.scroller,"mousedown",kb(d,jJ));if(gz){lk(b.scroller,"dblclick",kb(d,function(g){if(ma(d,g)){return;}var f=i8(d,g);if(!f||iJ(d,g)||fX(d.display,g)){return;}h7(g);var h=k5(d,f);f3(d.doc,h.anchor,h.head);}));}else{lk(b.scroller,"dblclick",function(f){ma(d,f)||h7(f);});}lk(b.lineSpace,"selectstart",function(f){if(!fX(b,f)){h7(f);}});if(!gS){lk(b.scroller,"contextmenu",function(f){kT(d,f);});}lk(b.scroller,"scroll",function(){if(b.scroller.clientHeight){j7(d,b.scroller.scrollTop);jF(d,b.scroller.scrollLeft,true);kK(d,"scroll",d);}});lk(b.scrollbarV,"scroll",function(){if(b.scroller.clientHeight){j7(d,b.scrollbarV.scrollTop);}});lk(b.scrollbarH,"scroll",function(){if(b.scroller.clientHeight){jF(d,b.scrollbarH.scrollLeft);}});lk(b.scroller,"mousewheel",function(f){jd(d,f);});lk(b.scroller,"DOMMouseScroll",function(f){jd(d,f);});function e(){if(d.state.focused){setTimeout(iI(gT,d),0);}}lk(b.scrollbarH,"mousedown",e);lk(b.scrollbarV,"mousedown",e);lk(b.wrapper,"scroll",function(){b.wrapper.scrollTop=b.wrapper.scrollLeft=0;});lk(b.input,"keyup",kb(d,fQ));lk(b.input,"input",function(){if(hp&&!kN&&d.display.inputHasSelection){d.display.inputHasSelection=null;}kF(d);});lk(b.input,"keydown",kb(d,iu));lk(b.input,"keypress",kb(d,iE));lk(b.input,"focus",iI(ir,d));lk(b.input,"blur",iI(l7,d));function c(f){if(!ma(d,f)){jP(f);}}if(d.options.dragDrop){lk(b.scroller,"dragstart",function(f){jX(d,f);});lk(b.scroller,"dragenter",c);lk(b.scroller,"dragover",c);lk(b.scroller,"drop",kb(d,fO));}lk(b.scroller,"paste",function(f){if(fX(b,f)){return;}d.state.pasteIncoming=true;gT(d);kF(d);});lk(b.input,"paste",function(){if(ki&&!d.state.fakedLastChar&&!(new Date-d.state.lastMiddleDown<200)){var f=b.input.selectionStart,g=b.input.selectionEnd;b.input.value+="$";b.input.selectionStart=f;b.input.selectionEnd=g;d.state.fakedLastChar=true;}d.state.pasteIncoming=true;kF(d);});function a(g){if(d.somethingSelected()){if(b.inaccurateSelection){b.prevInput="";b.inaccurateSelection=false;b.input.value=d.getSelection();hj(b.input);}}else{var f="",j=[];for(var i=0;i<d.doc.sel.ranges.length;i++){var k=d.doc.sel.ranges[i].head.line;var h={anchor:jy(k,0),head:jy(k+1,0)};j.push(h);f+=d.getRange(h.anchor,h.head);}if(g.type=="cut"){d.setSelections(j,null,jq);}else{b.prevInput="";b.input.value=f;hj(b.input);}}if(g.type=="cut"){d.state.cutIncoming=true;}}lk(b.input,"cut",a);lk(b.input,"copy",a);if(fW){lk(b.sizer,"mouseup",function(){if(hf()==b.input){b.input.blur();}gT(d);});}}function l8(b){var a=b.display;a.cachedCharWidth=a.cachedTextHeight=a.cachedPaddingH=null;b.setSize();}function fX(b,c){for(var a=ke(c);a!=b.wrapper;a=a.parentNode){if(!a||a.ignoreEvents||a.parentNode==b.sizer&&a!=b.mover){return true;}}}function i8(d,j,a,l){var h=d.display;if(!a){var i=ke(j);if(i==h.scrollbarH||i==h.scrollbarV||i==h.scrollbarFiller||i==h.gutterFiller){return null;}}var e,g,b=h.lineSpace.getBoundingClientRect();try{e=j.clientX-b.left;g=j.clientY-b.top;}catch(j){return null;}var f=f8(d,e,g),c;if(l&&f.xRel==1&&(c=hn(d.doc,f.line).text).length==f.ch){var k=ls(c,c.length,d.options.tabSize)-c.length;f=jy(f.line,Math.max(0,Math.round((e-hE(d.display).left)/hy(d.display))-k));}return f;}function jJ(b){if(ma(this,b)){return;}var d=this,c=d.display;c.shift=b.shiftKey;if(fX(c,b)){if(!ki){c.scroller.draggable=false;setTimeout(function(){c.scroller.draggable=true;},100);}return;}if(iJ(d,b)){return;}var a=i8(d,b);window.focus();switch(f9(b)){case 1:if(a){kW(d,b,a);}else{if(ke(b)==c.scroller){h7(b);}}break;case 2:if(ki){d.state.lastMiddleDown=+new Date;}if(a){f3(d.doc,a);}setTimeout(iI(gT,d),20);h7(b);break;case 3:if(gS){kT(d,b);}break;}}var k4,jx;function kW(c,f,e){setTimeout(iI(ik,c),0);var b=+new Date,a;if(jx&&jx.time>b-400&&lT(jx.pos,e)==0){a="triple";}else{if(k4&&k4.time>b-400&&lT(k4.pos,e)==0){a="double";jx={time:b,pos:e};}else{a="single";k4={time:b,pos:e};}}var g=c.doc.sel,d=k0?f.metaKey:f.ctrlKey;if(c.options.dragDrop&&gy&&!lt(c)&&a=="single"&&g.contains(e)>-1&&g.somethingSelected()){lU(c,f,e,d);}else{iG(c,f,e,a,d);}}function lU(b,f,e,c){var a=b.display;var d=kb(b,function(g){if(ki){a.scroller.draggable=false;}b.state.draggingText=false;ix(document,"mouseup",d);ix(a.scroller,"drop",d);if(Math.abs(f.clientX-g.clientX)+Math.abs(f.clientY-g.clientY)<10){h7(g);if(!c){f3(b.doc,e);}gT(b);if(gz&&!kN){setTimeout(function(){document.body.focus();gT(b);},20);}}});if(ki){a.scroller.draggable=true;}b.state.draggingText=d;if(a.scroller.dragDrop){a.scroller.dragDrop();}lk(document,"mouseup",d);lk(a.scroller,"drop",d);}function iG(s,e,t,b,q){var h=s.display,c=s.doc;h7(e);var a,d,r=c.sel;if(q&&!e.shiftKey){d=c.sel.contains(t);if(d>-1){a=c.sel.ranges[d];}else{a=new jh(t,t);}}else{a=c.sel.primary();}if(e.altKey){b="rect";if(!q){a=new jh(t,t);}t=i8(s,e,true,true);d=-1;}else{if(b=="double"){var g=k5(s,t);if(s.display.shift||c.extend){a=ic(c,a,g.anchor,g.head);}else{a=g;}}else{if(b=="triple"){var n=new jh(jy(t.line,0),gd(c,jy(t.line+1,0)));if(s.display.shift||c.extend){a=ic(c,a,n.anchor,n.head);}else{a=n;}}else{a=ic(c,a,t);}}}if(!q){d=0;lr(c,new fZ([a],0),ka);r=c.sel;}else{if(d>-1){i3(c,d,a,ka);}else{d=c.sel.ranges.length;lr(c,iH(c.sel.ranges.concat([a]),d),{scroll:false,origin:"*mouse"});}}var i=t;function j(A){if(lT(i,A)==0){return;}i=A;if(b=="rect"){var u=[],D=s.options.tabSize;var v=ls(hn(c,t.line).text,t.ch,D);var x=ls(hn(c,A.line).text,A.ch,D);var I=Math.min(v,x),z=Math.max(v,x);for(var w=Math.min(t.line,A.line),G=Math.min(s.lastLine(),Math.max(t.line,A.line));w<=G;w++){var y=hn(c,w).text,H=jS(y,I,D);if(I==z){u.push(new jh(jy(w,H),jy(w,H)));}else{if(y.length>H){u.push(new jh(jy(w,H),jy(w,jS(y,z,D))));}}}if(!u.length){u.push(new jh(t,t));}lr(c,iH(r.ranges.slice(0,d).concat(u),d),{origin:"*mouse",scroll:false});s.scrollIntoView(A);}else{var C=a;var F=C.anchor,B=A;if(b!="single"){if(b=="double"){var E=k5(s,A);}else{var E=new jh(jy(A.line,0),gd(c,jy(A.line+1,0)));}if(lT(E.anchor,F)>0){B=E.head;F=lj(C.from(),E.anchor);}else{B=E.anchor;F=j2(C.to(),E.head);}}var u=r.ranges.slice(0);u[d]=new jh(gd(c,F),B);lr(c,iH(u,d),ka);}}var l=h.wrapper.getBoundingClientRect();var p=0;function f(y){var v=++p;var w=i8(s,y,true,b=="rect");if(!w){return;}if(lT(w,i)!=0){ik(s);j(w);var x=k1(h,c);if(w.line>=x.to||w.line<x.from){setTimeout(kb(s,function(){if(p==v){f(y);}}),150);}}else{var u=y.clientY<l.top?-20:y.clientY>l.bottom?20:0;if(u){setTimeout(kb(s,function(){if(p!=v){return;}h.scroller.scrollTop+=u;f(y);}),50);}}}function m(u){p=Infinity;h7(u);gT(s);ix(document,"mousemove",k);ix(document,"mouseup",o);c.history.lastSelOrigin=null;}var k=kb(s,function(u){if((hp&&!kQ)?!u.buttons:!f9(u)){m(u);}else{f(u);}});var o=kb(s,m);lk(document,"mousemove",k);lk(document,"mouseup",o);}function gD(d,h,f,e,l){try{var a=h.clientX,b=h.clientY;}catch(h){return false;}if(a>=Math.floor(d.display.gutters.getBoundingClientRect().right)){return false;}if(e){h7(h);}var g=d.display;var i=g.lineDiv.getBoundingClientRect();if(b>i.bottom||!hh(d,f)){return lI(h);}b-=i.top-g.viewOffset;for(var k=0;k<d.options.gutters.length;++k){var j=g.gutters.childNodes[k];if(j&&j.getBoundingClientRect().right>=a){var c=jv(d.doc,b);var m=d.options.gutters[k];l(d,f,d,c,m,h);return lI(h);}}}function iJ(b,a){return gD(b,a,"gutterClick",true,lD);}var lz=0;function fO(f){var d=this;if(ma(d,f)||fX(d.display,f)){return;}h7(f);if(hp){lz=+new Date;}var e=i8(d,f,true),b=f.dataTransfer.files;if(!e||lt(d)){return;}if(b&&b.length&&window.FileReader&&window.File){var j=b.length,c=Array(j),a=0;var h=function(k,l){var m=new FileReader;m.onload=kb(d,function(){c[l]=m.result;if(++a==j){e=gd(d.doc,e);var n={from:e,to:e,text:lZ(c.join("\n")),origin:"paste"};fS(d.doc,n);hD(d.doc,gt(e,kr(n)));}});m.readAsText(k);};for(var g=0;g<j;++g){h(b[g],g);}}else{if(d.state.draggingText&&d.doc.sel.contains(e)>-1){d.state.draggingText(f);setTimeout(iI(gT,d),20);return;}try{var c=f.dataTransfer.getData("Text");if(c){if(d.state.draggingText&&!(k0?f.metaKey:f.ctrlKey)){var i=d.listSelections();}jY(d.doc,gt(e,e));if(i){for(var g=0;g<i.length;++g){lX(d.doc,"",i[g].anchor,i[g].head,"drag");}}d.replaceSelection(c,"around","paste");gT(d);}}catch(f){}}}function jX(c,a){if(hp&&(!c.state.draggingText||+new Date-lz<100)){jP(a);return;}if(ma(c,a)||fX(c.display,a)){return;}a.dataTransfer.setData("Text",c.getSelection());if(a.dataTransfer.setDragImage&&!kM){var b=f0("img",null,null,"position: fixed; left: 0; top: 0;");b.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";if(i5){b.width=b.height=1;c.display.wrapper.appendChild(b);b._top=b.offsetTop;}a.dataTransfer.setDragImage(b,0,0);if(i5){b.parentNode.removeChild(b);}}}function j7(b,a){if(Math.abs(b.doc.scrollTop-a)<2){return;}b.doc.scrollTop=a;if(!i4){hm(b,{top:a});}if(b.display.scroller.scrollTop!=a){b.display.scroller.scrollTop=a;}if(b.display.scrollbarV.scrollTop!=a){b.display.scrollbarV.scrollTop=a;}if(i4){hm(b);}ip(b,100);}function jF(c,a,b){if(b?a==c.doc.scrollLeft:Math.abs(c.doc.scrollLeft-a)<2){return;}a=Math.min(a,c.display.scroller.scrollWidth-c.display.scroller.clientWidth);c.doc.scrollLeft=a;gK(c);if(c.display.scroller.scrollLeft!=a){c.display.scroller.scrollLeft=a;}if(c.display.scrollbarH.scrollLeft!=a){c.display.scrollbarH.scrollLeft=a;}}var g9=0,lS=null;if(hp){lS=-0.53;}else{if(i4){lS=15;}else{if(jz){lS=-0.7;}else{if(kM){lS=-1/3;}}}}function jd(f,l){var c=l.wheelDeltaX,d=l.wheelDeltaY;if(c==null&&l.detail&&l.axis==l.HORIZONTAL_AXIS){c=l.detail;}if(d==null&&l.detail&&l.axis==l.VERTICAL_AXIS){d=l.detail;}else{if(d==null){d=l.wheelDelta;}}var j=f.display,g=j.scroller;if(!(c&&g.scrollWidth>g.clientWidth||d&&g.scrollHeight>g.clientHeight)){return;}if(d&&k0&&ki){outer:for(var e=l.target,h=j.view;e!=g;e=e.parentNode){for(var a=0;a<h.length;a++){if(h[a].node==e){f.display.currentWheelTarget=e;break outer;}}}}if(c&&!i4&&!i5&&lS!=null){if(d){j7(f,Math.max(0,Math.min(g.scrollTop+d*lS,g.scrollHeight-g.clientHeight)));}jF(f,Math.max(0,Math.min(g.scrollLeft+c*lS,g.scrollWidth-g.clientWidth)));h7(l);j.wheelStartX=null;return;}if(d&&lS!=null){var b=d*lS;var i=f.doc.scrollTop,k=i+j.wrapper.clientHeight;if(b<0){i=Math.max(0,i+b-50);}else{k=Math.min(f.doc.height,k+b+50);}hm(f,{top:i,bottom:k});}if(g9<20){if(j.wheelStartX==null){j.wheelStartX=g.scrollLeft;j.wheelStartY=g.scrollTop;j.wheelDX=c;j.wheelDY=d;setTimeout(function(){if(j.wheelStartX==null){return;}var n=g.scrollLeft-j.wheelStartX;var o=g.scrollTop-j.wheelStartY;var m=(o&&j.wheelDY&&o/j.wheelDY)||(n&&j.wheelDX&&n/j.wheelDX);j.wheelStartX=j.wheelStartY=null;if(!m){return;}lS=(lS*g9+m)/(g9+1);++g9;},200);}else{j.wheelDX+=c;j.wheelDY+=d;}}}function f6(c,e,d){if(typeof e=="string"){e=gM[e];if(!e){return false;}}if(c.display.pollingFast&&lP(c)){c.display.pollingFast=false;}var a=c.display.shift,b=false;try{if(lt(c)){c.state.suppressEdits=true;}if(d){c.display.shift=false;}b=e(c)!=kL;}finally{c.display.shift=a;c.state.suppressEdits=false;}return b;}function kR(b){var a=b.state.keyMaps.slice(0);if(b.options.extraKeys){a.push(b.options.extraKeys);}a.push(b.options.keyMap);return a;}var lf;function hg(d,e){var c=f2(d.options.keyMap),g=c.auto;clearTimeout(lf);if(g&&!gO(e)){lf=setTimeout(function(){if(f2(d.options.keyMap)==c){d.options.keyMap=(g.call?g.call(null,d):g);gF(d);}},50);}var a=iw(e,true),f=false;if(!a){return false;}var b=kR(d);if(e.shiftKey){f=iR("Shift-"+a,b,function(h){return f6(d,h,true);})||iR(a,b,function(h){if(typeof h=="string"?/^go[A-Z]/.test(h):h.motion){return f6(d,h);}});}else{f=iR(a,b,function(h){return f6(d,h);});}if(f){h7(e);iy(d);lD(d,"keyHandled",d,a,e);}return f;}function h8(d,a,c){var b=iR("'"+c+"'",kR(d),function(e){return f6(d,e,true);});if(b){h7(a);iy(d);lD(d,"keyHandled",d,"'"+c+"'",a);}return b;}var k6=null;function iu(a){var d=this;ik(d);if(ma(d,a)){return;}if(gz&&a.keyCode==27){a.returnValue=false;}var c=a.keyCode;d.display.shift=c==16||a.shiftKey;var b=hg(d,a);if(i5){k6=b?c:null;if(!b&&c==88&&!jG&&(k0?a.metaKey:a.ctrlKey)){d.replaceSelection("",null,"cut");}}if(c==18&&!/\bCodeMirror-crosshair\b/.test(d.display.lineDiv.className)){k7(d);}}function k7(b){var a=b.display.lineDiv;gm(a,"CodeMirror-crosshair");function c(d){if(d.keyCode==18||!d.altKey){i0(a,"CodeMirror-crosshair");ix(document,"keyup",c);ix(document,"mouseover",c);}}lk(document,"keyup",c);lk(document,"mouseover",c);}function fQ(a){if(ma(this,a)){return;}if(a.keyCode==16){this.doc.sel.shift=false;}}function iE(e){var d=this;if(ma(d,e)){return;}var a=e.keyCode,c=e.charCode;if(i5&&a==k6){k6=null;h7(e);return;}if(((i5&&(!e.which||e.which<10))||fW)&&hg(d,e)){return;}var b=String.fromCharCode(c==null?a:c);if(h8(d,e,b)){return;}if(hp&&!kN){d.display.inputHasSelection=null;}kF(d);}function ir(a){if(a.options.readOnly=="nocursor"){return;}if(!a.state.focused){kK(a,"focus",a);a.state.focused=true;gm(a.display.wrapper,"CodeMirror-focused");if(!a.curOp&&a.display.selForContextMenu!=a.doc.sel){g4(a);if(ki){setTimeout(iI(g4,a,true),0);}}}kA(a);iy(a);}function l7(a){if(a.state.focused){kK(a,"blur",a);a.state.focused=false;i0(a.display.wrapper,"CodeMirror-focused");}clearInterval(a.display.blinker);setTimeout(function(){if(!a.state.focused){a.display.shift=false;}},150);}function kT(c,h){if(ma(c,h,"contextmenu")){return;}var f=c.display;if(fX(f,h)||lg(c,h)){return;}var d=i8(c,h),b=f.scroller.scrollTop;if(!d||i5){return;}var j=c.options.resetSelectionOnContextMenu;if(j&&c.doc.sel.contains(d)==-1){kb(c,lr)(c.doc,gt(d),jq);}var g=f.input.style.cssText;f.inputDiv.style.position="absolute";f.input.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(h.clientY-5)+"px; left: "+(h.clientX-5)+"px; z-index: 1000; background: "+(hp?"rgba(255, 255, 255, .05)":"transparent")+"; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";gT(c);g4(c);if(!c.somethingSelected()){f.input.value=f.prevInput=" ";}f.selForContextMenu=c.doc.sel;clearTimeout(f.detectingSelectAll);function i(){if(f.input.selectionStart!=null){var l=c.somethingSelected();var k=f.input.value="\u200b"+(l?f.input.value:"");f.prevInput=l?"":"\u200b";f.input.selectionStart=1;f.input.selectionEnd=k.length;f.selForContextMenu=c.doc.sel;}}function e(){f.inputDiv.style.position="relative";f.input.style.cssText=g;if(kN){f.scrollbarV.scrollTop=f.scroller.scrollTop=b;}kA(c);if(f.input.selectionStart!=null){if(!hp||kN){i();}var l=0,k=function(){if(f.selForContextMenu==c.doc.sel&&f.input.selectionStart==0){kb(c,gM.selectAll)(c);}else{if(l++<10){f.detectingSelectAll=setTimeout(k,500);}else{g4(c);}}};f.detectingSelectAll=setTimeout(k,200);}}if(hp&&!kN){i();}if(gS){jP(h);var a=function(){ix(window,"mouseup",a);setTimeout(e,20);};lk(window,"mouseup",a);}else{setTimeout(e,50);}}function lg(b,a){if(!hh(b,"gutterContextMenu")){return false;}return gD(b,a,"gutterContextMenu",false,kK);}var kr=km.changeEnd=function(a){if(!a.text){return a.to;}return jy(a.from.line+a.text.length-1,gf(a.text).length+(a.text.length==1?a.from.ch:0));};function lh(a,b){if(lT(a,b.from)<0){return a;}if(lT(a,b.to)<=0){return kr(b);}var d=a.line+b.text.length-(b.to.line-b.from.line)-1,c=a.ch;if(a.line==b.to.line){c+=kr(b).ch-b.to.ch;}return jy(d,c);}function he(a,e){var c=[];for(var b=0;b<a.sel.ranges.length;b++){var d=a.sel.ranges[b];c.push(new jh(lh(d.anchor,e),lh(d.head,e)));}return iH(c,a.sel.primIndex);}function kc(a,b,c){if(a.line==b.line){return jy(c.line,a.ch-b.ch+c.ch);}else{return jy(c.line+(a.line-b.line),a.ch);}}function lB(d,g,a){var l=[];var b=jy(d.first,0),c=b;for(var j=0;j<g.length;j++){var h=g[j];var e=kc(h.from,b,c);var f=kc(kr(h),b,c);b=h.to;c=f;if(a=="around"){var i=d.sel.ranges[j],k=lT(i.head,i.anchor)<0;l[j]=new jh(k?f:e,k?e:f);}else{l[j]=new jh(e,e);}}return new fZ(l,d.sel.primIndex);}function ha(c,a,b){var d={canceled:false,from:a.from,to:a.to,text:a.text,origin:a.origin,cancel:function(){this.canceled=true;}};if(b){d.update=function(e,f,g,h){if(e){this.from=gd(c,e);}if(f){this.to=gd(c,f);}if(g){this.text=g;}if(h!==undefined){this.origin=h;}};}kK(c,"beforeChange",c,d);if(c.cm){kK(c.cm,"beforeChange",c.cm,d);}if(d.canceled){return null;}return{from:d.from,to:d.to,text:d.text,origin:d.origin};}function fS(a,e,b){if(a.cm){if(!a.cm.curOp){return kb(a.cm,fS)(a,e,b);}if(a.cm.state.suppressEdits){return;}}if(hh(a,"beforeChange")||a.cm&&hh(a.cm,"beforeChange")){e=ha(a,e,true);if(!e){return;}}var c=gL&&!b&&h5(a,e.from,e.to);if(c){for(var d=c.length-1;d>=0;--d){kh(a,{from:c[d].from,to:c[d].to,text:d?[""]:e.text});}}else{kh(a,e);}}function kh(b,a){if(a.text.length==1&&a.text[0]==""&&lT(a.from,a.to)==0){return;}var c=he(b,a);ga(b,a,c,b.cm?b.cm.curOp.id:NaN);iv(b,a,c,h4(b,a));var d=[];iO(b,function(e,f){if(!f&&lc(d,e.history)==-1){hw(e.history,a);d.push(e.history);}iv(e,a,null,h4(e,a));});}function kX(e,g,c){if(e.cm&&e.cm.state.suppressEdits){return;}var h=e.history,n,l=e.sel;var b=g=="undo"?h.done:h.undone,d=g=="undo"?h.undone:h.done;for(var k=0;k<b.length;k++){n=b[k];if(c?n.ranges&&!n.equals(e.sel):!n.ranges){break;}}if(k==b.length){return;}h.lastOrigin=h.lastSelOrigin=null;for(;;){n=b.pop();if(n.ranges){kH(n,d);if(c&&!n.equals(e.sel)){lr(e,n,{clearRedo:false});return;}l=n;}else{break;}}var i=[];kH(l,d);d.push({changes:i,generation:h.generation});h.generation=n.generation||++h.maxGeneration;var m=hh(e,"beforeChange")||e.cm&&hh(e.cm,"beforeChange");for(var k=n.changes.length-1;k>=0;--k){var f=n.changes[k];f.origin=g;if(m&&!ha(e,f,false)){b.length=0;return;}i.push(hO(e,f));var a=k?he(e,f,null):gf(b);iv(e,f,a,iK(e,f));if(!k&&e.cm){e.cm.scrollIntoView(f);}var j=[];iO(e,function(o,p){if(!p&&lc(j,o.history)==-1){hw(o.history,f);j.push(o.history);}iv(o,f,null,iK(o,f));});}}function g8(c,a){if(a==0){return;}c.first+=a;c.sel=new fZ(lv(c.sel.ranges,function(e){return new jh(jy(e.anchor.line+a,e.anchor.ch),jy(e.head.line+a,e.head.ch));}),c.sel.primIndex);if(c.cm){lx(c.cm,c.first,c.first-a,a);for(var b=c.cm.display,d=b.viewFrom;d<b.viewTo;d++){jU(c.cm,d,"gutter");}}}function iv(f,e,a,c){if(f.cm&&!f.cm.curOp){return kb(f.cm,iv)(f,e,a,c);}if(e.to.line<f.first){g8(f,e.text.length-1-(e.to.line-e.from.line));return;}if(e.from.line>f.lastLine()){return;}if(e.from.line<f.first){var d=e.text.length-1-(f.first-e.from.line);g8(f,d);e={from:jy(f.first,0),to:jy(e.to.line+d,e.to.ch),text:[gf(e.text)],origin:e.origin};}var b=f.lastLine();if(e.to.line>b){e={from:e.from,to:jy(b,hn(f,b).text.length),text:[e.text[0]],origin:e.origin};}e.removed=fY(f,e.from,e.to);if(!a){a=he(f,e,null);}if(f.cm){mf(f.cm,e,c);}else{hY(f,e,c);}jY(f,a,jq);}function mf(d,h,j){var e=d.doc,i=d.display,g=h.from,f=h.to;var b=false,k=g.line;if(!d.options.lineWrapping){k=lE(hS(hn(e,g.line)));e.iter(k,f.line+1,function(n){if(n==i.maxLine){b=true;return true;}});}if(e.sel.contains(h.from,h.to)>-1){jC(d);}hY(e,h,j,fU(d));if(!d.options.lineWrapping){e.iter(k,g.line+h.text.length,function(o){var n=hX(o);if(n>i.maxLineLength){i.maxLine=o;i.maxLineLength=n;i.maxLineChanged=true;b=false;}});if(b){d.curOp.updateMaxLine=true;}}e.frontier=Math.min(e.frontier,g.line);ip(d,400);var c=h.text.length-(f.line-g.line)-1;if(g.line==f.line&&h.text.length==1&&!g7(d.doc,h)){jU(d,g.line,"text");}else{lx(d,g.line,f.line+1,c);}var m=hh(d,"changes"),l=hh(d,"change");if(l||m){var a={from:g,to:f,text:h.text,removed:h.removed,origin:h.origin};if(l){lD(d,"change",d,a);}if(m){(d.curOp.changeObjs||(d.curOp.changeObjs=[])).push(a);}}d.display.selForContextMenu=null;}function lX(a,b,e,f,d){if(!f){f=e;}if(lT(f,e)<0){var c=f;f=e;e=c;}if(typeof b=="string"){b=lZ(b);}fS(a,{from:e,to:f,text:b,origin:d});}function iT(c,f){var e=c.display,b=e.sizer.getBoundingClientRect(),d=null;if(f.top+b.top<0){d=true;}else{if(f.bottom+b.top>(window.innerHeight||document.documentElement.clientHeight)){d=false;}}if(d!=null&&!ii){var a=f0("div","\u200b",null,"position: absolute; top: "+(f.top-e.viewOffset-hA(c.display))+"px; height: "+(f.bottom-f.top+kE)+"px; left: "+f.left+"px; width: 2px;");c.display.lineSpace.appendChild(a);a.scrollIntoView(d);c.display.lineSpace.removeChild(a);}}function ky(c,e,h,i){if(i==null){i=0;}for(;;){var g=false,d=g5(c,e);var b=!h||h==e?d:g5(c,h);var j=kq(c,Math.min(d.left,b.left),Math.min(d.top,b.top)-i,Math.max(d.left,b.left),Math.max(d.bottom,b.bottom)+i);var f=c.doc.scrollTop,a=c.doc.scrollLeft;if(j.scrollTop!=null){j7(c,j.scrollTop);if(Math.abs(c.doc.scrollTop-f)>1){g=true;}}if(j.scrollLeft!=null){jF(c,j.scrollLeft);if(Math.abs(c.doc.scrollLeft-a)>1){g=true;}}if(!g){return d;}}}function kx(d,b,f,c,a){var e=kq(d,b,f,c,a);if(e.scrollTop!=null){j7(d,e.scrollTop);}if(e.scrollLeft!=null){jF(d,e.scrollLeft);}}function kq(n,f,q,g,r){var i=n.display,j=l5(n.display);if(q<0){q=0;}var k=n.curOp&&n.curOp.scrollTop!=null?n.curOp.scrollTop:i.scroller.scrollTop;var a=i.scroller.clientHeight-kE,l={};var d=n.doc.height+jo(i);var c=q<j,h=r>d-j;if(q<k){l.scrollTop=c?0:q;}else{if(r>k+a){var m=Math.min(q,(h?d:r)-a);if(m!=k){l.scrollTop=m;}}}var b=n.curOp&&n.curOp.scrollLeft!=null?n.curOp.scrollLeft:i.scroller.scrollLeft;var o=i.scroller.clientWidth-kE;f+=i.gutters.offsetWidth;g+=i.gutters.offsetWidth;var p=i.gutters.offsetWidth;var e=f<p+10;if(f<b+p||e){if(e){f=0;}l.scrollLeft=Math.max(0,f-10-p);}else{if(g>o+b-3){l.scrollLeft=g+10-o;}}return l;}function hT(c,a,b){if(a!=null||b!=null){gk(c);}if(a!=null){c.curOp.scrollLeft=(c.curOp.scrollLeft==null?c.doc.scrollLeft:c.curOp.scrollLeft)+a;}if(b!=null){c.curOp.scrollTop=(c.curOp.scrollTop==null?c.doc.scrollTop:c.curOp.scrollTop)+b;}}function gg(d){gk(d);var c=d.getCursor(),a=c,b=c;if(!d.options.lineWrapping){a=c.ch?jy(c.line,c.ch-1):c;b=jy(c.line,c.ch+1);}d.curOp.scrollToPos={from:a,to:b,margin:d.options.cursorScrollMargin,isCursor:true};}function gk(d){var b=d.curOp.scrollToPos;if(b){d.curOp.scrollToPos=null;var e=hq(d,b.from),a=hq(d,b.to);var c=kq(d,Math.min(e.left,a.left),Math.min(e.top,a.top)-b.margin,Math.max(e.right,a.right),Math.max(e.bottom,a.bottom)+b.margin);d.scrollTo(c.scrollLeft,c.scrollTop);}}function lF(d,n,e,o){var f=d.doc,a;if(e==null){e="add";}if(e=="smart"){if(!d.doc.mode.indent){e="prev";}else{a=hC(d,n);}}var j=d.options.tabSize;var c=hn(f,n),k=ls(c.text,null,j);if(c.stateAfter){c.stateAfter=null;}var b=c.text.match(/^\s*/)[0],h;if(!o&&!/\S/.test(c.text)){h=0;e="not";}else{if(e=="smart"){h=d.doc.mode.indent(a,c.text.slice(b.length),c.text);if(h==kL){if(!o){return;}e="prev";}}}if(e=="prev"){if(n>f.first){h=ls(hn(f,n-1).text,null,j);}else{h=0;}}else{if(e=="add"){h=k+d.options.indentUnit;}else{if(e=="subtract"){h=k-d.options.indentUnit;}else{if(typeof e=="number"){h=k+e;}}}}h=Math.max(0,h);var g="",i=0;if(d.options.indentWithTabs){for(var m=Math.floor(h/j);m;--m){i+=j;g+="\t";}}if(i<h){g+=i1(h-i);}if(g!=b){lX(d.doc,g,jy(n,0),jy(n,b.length),"+input");}else{for(var m=0;m<f.sel.ranges.length;m++){var l=f.sel.ranges[m];if(l.head.line==n&&l.head.ch<b.length){var i=jy(n,b.length);i3(f,m,new jh(i,i));break;}}}c.stateAfter=null;}function gY(c,a,d,e){var f=a,b=a,g=c.doc;if(typeof a=="number"){b=hn(g,j1(g,a));}else{f=lE(a);}if(f==null){return null;}if(e(b,f)){jU(c,f,d);}return b;}function hQ(d,e){var c=d.doc.sel.ranges,g=[];for(var a=0;a<c.length;a++){var b=e(c[a]);while(g.length&&lT(b.from,gf(g).to)<=0){var f=g.pop();if(lT(f.from,b.from)<0){b.from=f.from;break;}}g.push(b);}hR(d,function(){for(var h=g.length-1;h>=0;h--){lX(d.doc,"",g[h].from,g[h].to,"+delete");}gg(d);});}function j6(c,q,i,j,o){var l=q.line,k=q.ch,d=i;var a=hn(c,l);var f=true;function e(){var t=l+i;if(t<c.first||t>=c.first+c.size){return(f=false);}l=t;return a=hn(c,t);}function g(t){var u=(o?h6:lu)(a,k,i,true);if(u==null){if(!t&&e()){if(o){k=(i<0?kv:ia)(a);}else{k=i<0?a.text.length:0;}}else{return(f=false);}}else{k=u;}return true;}if(j=="char"){g();}else{if(j=="column"){g(true);}else{if(j=="word"||j=="group"){var h=null,n=j=="group";var b=c.cm&&c.cm.getHelper(q,"wordChars");for(var p=true;;p=false){if(i<0&&!g(!p)){break;}var s=a.text.charAt(k)||"\n";var r=it(s,b)?"w":n&&s=="\n"?"n":!n||/\s/.test(s)?null:"p";if(n&&!p&&!r){r="s";}if(h&&h!=r){if(i<0){i=1;g();}break;}if(r){h=r;}if(i>0&&!g(!p)){break;}}}}}var m=lp(c,jy(l,k),d,true);if(!f){m.hitSide=true;}return m;}function kn(c,h,b,d){var e=c.doc,f=h.left,g;if(d=="page"){var i=Math.min(c.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);g=h.top+b*(i-(b<0?1.5:0.5)*l5(c.display));}else{if(d=="line"){g=b>0?h.bottom+3:h.top-3;}}for(;;){var a=f8(c,f,g);if(!a.outside){break;}if(b<0?g<=0:g>=e.height){a.hitSide=true;break;}g+=b*5;}return a;}function k5(e,g){var f=e.doc,d=hn(f,g.line).text;var a=g.ch,h=g.ch;if(d){var i=e.getHelper(g,"wordChars");if((g.xRel<0||h==d.length)&&a){--a;}else{++h;}var c=d.charAt(a);var b=it(c,i)?function(j){return it(j,i);}:/\s/.test(c)?function(j){return/\s/.test(j);}:function(j){return !/\s/.test(j)&&!it(j);};while(a>0&&b(d.charAt(a-1))){--a;}while(h<d.length&&b(d.charAt(h))){++h;}}return new jh(jy(g.line,a),jy(g.line,h));}km.prototype={constructor:km,focus:function(){window.focus();gT(this);kF(this);},setOption:function(b,a){var c=this.options,d=c[b];if(c[b]==a&&b!="mode"){return;}c[b]=a;if(fT.hasOwnProperty(b)){kb(this,fT[b])(this,a,d);}},getOption:function(a){return this.options[a];},getDoc:function(){return this.doc;},addKeyMap:function(a,b){this.state.keyMaps[b?"push":"unshift"](a);},removeKeyMap:function(b){var a=this.state.keyMaps;for(var c=0;c<a.length;++c){if(a[c]==b||(typeof a[c]!="string"&&a[c].name==b)){a.splice(c,1);return true;}}},addOverlay:jQ(function(c,b){var a=c.token?c:km.getMode(this.options,c);if(a.startState){throw new Error("Overlays may not be stateful.");}this.state.overlays.push({mode:a,modeSpec:c,opaque:b&&b.opaque});this.state.modeGen++;lx(this);}),removeOverlay:jQ(function(d){var b=this.state.overlays;for(var c=0;c<b.length;++c){var a=b[c].modeSpec;if(a==d||typeof d=="string"&&a.name==d){b.splice(c,1);this.state.modeGen++;lx(this);return;}}}),indentLine:jQ(function(a,c,b){if(typeof c!="string"&&typeof c!="number"){if(c==null){c=this.options.smartIndent?"smart":"prev";}else{c=c?"add":"subtract";}}if(kS(this.doc,a)){lF(this,a,c,b);}}),indentSelection:jQ(function(g){var c=this.doc.sel.ranges,d=-1;for(var h=0;h<c.length;h++){var b=c[h];if(!b.empty()){var e=Math.max(d,b.from().line);var f=b.to();d=Math.min(this.lastLine(),f.line-(f.ch?0:1))+1;for(var a=e;a<d;++a){lF(this,a,g);}}else{if(b.head.line>d){lF(this,b.head.line,g,true);d=b.head.line;if(h==this.doc.sel.primIndex){gg(this);}}}}}),getTokenAt:function(e,c){var h=this.doc;e=gd(h,e);var a=hC(this,e.line,c),f=this.doc.mode;var d=hn(h,e.line);var g=new gr(d.text,this.options.tabSize);while(g.pos<e.ch&&!g.eol()){g.start=g.pos;var b=gQ(f,g,a);}return{start:g.start,end:g.pos,string:g.current(),type:b||null,state:a};},getTokenTypeAt:function(e){e=gd(this.doc,e);var a=jV(this,hn(this.doc,e.line));var g=0,f=(a.length-1)/2,b=e.ch;var c;if(b==0){c=a[2];}else{for(;;){var d=(g+f)>>1;if((d?a[d*2-1]:0)>=b){f=d;}else{if(a[d*2+1]<b){g=d+1;}else{c=a[d*2+2];break;}}}}var h=c?c.indexOf("cm-overlay "):-1;return h<0?c:h==0?null:c.slice(0,h-1);},getModeAt:function(a){var b=this.doc.mode;if(!b.innerMode){return b;}return km.innerMode(b,this.getTokenAt(a).state).mode;},getHelper:function(a,b){return this.getHelpers(a,b)[0];},getHelpers:function(e,b){var a=[];if(!g6.hasOwnProperty(b)){return g6;}var d=g6[b],f=this.getModeAt(e);if(typeof f[b]=="string"){if(d[f[b]]){a.push(d[f[b]]);}}else{if(f[b]){for(var c=0;c<f[b].length;c++){var g=d[f[b][c]];if(g){a.push(g);}}}else{if(f.helperType&&d[f.helperType]){a.push(d[f.helperType]);}else{if(d[f.name]){a.push(d[f.name]);}}}}for(var c=0;c<d._global.length;c++){var h=d._global[c];if(h.pred(f,this)&&lc(a,h.val)==-1){a.push(h.val);}}return a;},getStateAfter:function(b,c){var a=this.doc;b=j1(a,b==null?a.first+a.size-1:b);return hC(this,b+1,c);},cursorCoords:function(a,c){var b,d=this.doc.sel.primary();if(a==null){b=d.head;}else{if(typeof a=="object"){b=gd(this.doc,a);}else{b=a?d.from():d.to();}}return g5(this,b,c||"page");},charCoords:function(a,b){return hW(this,gd(this.doc,a),b||"page");},coordsChar:function(b,a){b=gH(this,b,a||"page");return f8(this,b.left,b.top);},lineAtHeight:function(b,a){b=gH(this,{top:b,left:0},a||"page").top;return jv(this.doc,b+this.display.viewOffset);},heightAtLine:function(c,e){var d=false,a=this.doc.first+this.doc.size-1;if(c<this.doc.first){c=this.doc.first;}else{if(c>a){c=a;d=true;}}var b=hn(this.doc,c);return gu(this,b,{top:0,left:0},e||"page").top+(d?this.doc.height-lG(b):0);},defaultTextHeight:function(){return l5(this.display);},defaultCharWidth:function(){return hy(this.display);},setGutterMarker:jQ(function(c,b,a){return gY(this,c,"gutter",function(d){var e=d.gutterMarkers||(d.gutterMarkers={});e[b]=a;if(!a&&gq(e)){d.gutterMarkers=null;}return true;});}),clearGutter:jQ(function(b){var d=this,a=d.doc,c=a.first;a.iter(function(e){if(e.gutterMarkers&&e.gutterMarkers[b]){e.gutterMarkers[b]=null;jU(d,c,"gutter");if(gq(e.gutterMarkers)){e.gutterMarkers=null;}}++c;});}),addLineClass:jQ(function(a,b,c){return gY(this,a,"class",function(d){var e=b=="text"?"textClass":b=="background"?"bgClass":"wrapClass";if(!d[e]){d[e]=c;}else{if(new RegExp("(?:^|\\s)"+c+"(?:$|\\s)").test(d[e])){return false;}else{d[e]+=" "+c;}}return true;});}),removeLineClass:jQ(function(a,b,c){return gY(this,a,"class",function(h){var e=b=="text"?"textClass":b=="background"?"bgClass":"wrapClass";var f=h[e];if(!f){return false;}else{if(c==null){h[e]=null;}else{var g=f.match(new RegExp("(?:^|\\s+)"+c+"(?:$|\\s+)"));if(!g){return false;}var d=g.index+g[0].length;h[e]=f.slice(0,g.index)+(!g.index||d==f.length?"":" ")+f.slice(d)||null;}}return true;});}),addLineWidget:jQ(function(a,b,c){return jt(this,a,b,c);}),removeLineWidget:function(a){a.clear();},lineInfo:function(b){if(typeof b=="number"){if(!kS(this.doc,b)){return null;}var a=b;b=hn(this.doc,b);if(!b){return null;}}else{var a=lE(b);if(a==null){return null;}}return{line:a,handle:b,text:b.text,gutterMarkers:b.gutterMarkers,textClass:b.textClass,bgClass:b.bgClass,wrapClass:b.wrapClass,widgets:b.widgets};},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo};},addWidget:function(g,j,e,i,c){var h=this.display;g=g5(this,gd(this.doc,g));var f=g.bottom,a=g.left;j.style.position="absolute";h.sizer.appendChild(j);if(i=="over"){f=g.top;}else{if(i=="above"||i=="near"){var b=Math.max(h.wrapper.clientHeight,this.doc.height),d=Math.max(h.sizer.clientWidth,h.lineSpace.clientWidth);if((i=="above"||g.bottom+j.offsetHeight>b)&&g.top>j.offsetHeight){f=g.top-j.offsetHeight;}else{if(g.bottom+j.offsetHeight<=b){f=g.bottom;}}if(a+j.offsetWidth>d){a=d-j.offsetWidth;}}}j.style.top=f+"px";j.style.left=j.style.right="";if(c=="right"){a=h.sizer.clientWidth-j.offsetWidth;j.style.right="0px";}else{if(c=="left"){a=0;}else{if(c=="middle"){a=(h.sizer.clientWidth-j.offsetWidth)/2;}}j.style.left=a+"px";}if(e){kx(this,a,f,a+j.offsetWidth,f+j.offsetHeight);}},triggerOnKeyDown:jQ(iu),triggerOnKeyPress:jQ(iE),triggerOnKeyUp:jQ(fQ),execCommand:function(a){if(gM.hasOwnProperty(a)){return gM[a](this);}},findPosH:function(e,a,g,c){var d=1;if(a<0){d=-1;a=-a;}for(var b=0,f=gd(this.doc,e);b<a;++b){f=j6(this.doc,f,d,g,c);if(f.hitSide){break;}}return f;},moveH:jQ(function(b,a){var c=this;c.extendSelectionsBy(function(d){if(c.display.shift||c.doc.extend||d.empty()){return j6(c.doc,d.head,b,a,c.options.rtlMoveVisually);}else{return b<0?d.from():d.to();}},ks);}),deleteH:jQ(function(d,c){var b=this.doc.sel,a=this.doc;if(b.somethingSelected()){a.replaceSelection("",null,"+delete");}else{hQ(this,function(e){var f=j6(a,e.head,d,c,false);return d<0?{from:f,to:e.head}:{from:e.head,to:f};});}}),findPosV:function(f,i,e,c){var b=1,g=c;if(i<0){b=-1;i=-i;}for(var a=0,d=gd(this.doc,f);a<i;++a){var h=g5(this,d,"div");if(g==null){g=h.left;}else{h.left=g;}d=kn(this,h,b,e);if(d.hitSide){break;}}return d;},moveV:jQ(function(c,a){var d=this,f=this.doc,g=[];var e=!d.display.shift&&!f.extend&&f.sel.somethingSelected();f.extendSelectionsBy(function(j){if(e){return c<0?j.from():j.to();}var h=g5(d,j.head,"div");if(j.goalColumn!=null){h.left=j.goalColumn;}g.push(h.left);var i=kn(d,h,c,a);if(a=="page"&&j==f.sel.primary()){hT(d,null,hW(d,i,"div").top-h.top);}return i;},ks);if(g.length){for(var b=0;b<f.sel.ranges.length;b++){f.sel.ranges[b].goalColumn=g[b];}}}),toggleOverwrite:function(a){if(a!=null&&a==this.state.overwrite){return;}if(this.state.overwrite=!this.state.overwrite){gm(this.display.cursorDiv,"CodeMirror-overwrite");}else{i0(this.display.cursorDiv,"CodeMirror-overwrite");}kK(this,"overwriteToggle",this,this.state.overwrite);},hasFocus:function(){return hf()==this.display.input;},scrollTo:jQ(function(b,a){if(b!=null||a!=null){gk(this);}if(b!=null){this.curOp.scrollLeft=b;}if(a!=null){this.curOp.scrollTop=a;}}),getScrollInfo:function(){var b=this.display.scroller,a=kE;return{left:b.scrollLeft,top:b.scrollTop,height:b.scrollHeight-a,width:b.scrollWidth-a,clientHeight:b.clientHeight-a,clientWidth:b.clientWidth-a};},scrollIntoView:jQ(function(b,a){if(b==null){b={from:this.doc.sel.primary().head,to:null};if(a==null){a=this.options.cursorScrollMargin;}}else{if(typeof b=="number"){b={from:jy(b,0),to:null};}else{if(b.from==null){b={from:b,to:null};}}}if(!b.to){b.to=b.from;}b.margin=a||0;if(b.from.line!=null){gk(this);this.curOp.scrollToPos=b;}else{var c=kq(this,Math.min(b.from.left,b.to.left),Math.min(b.from.top,b.to.top)-b.margin,Math.max(b.from.right,b.to.right),Math.max(b.from.bottom,b.to.bottom)+b.margin);this.scrollTo(c.scrollLeft,c.scrollTop);}}),setSize:jQ(function(a,c){function b(d){return typeof d=="number"||/^\d+$/.test(String(d))?d+"px":d;}if(a!=null){this.display.wrapper.style.width=b(a);}if(c!=null){this.display.wrapper.style.height=b(c);}if(this.options.lineWrapping){md(this);}this.curOp.forceUpdate=true;kK(this,"refresh",this);}),operation:function(a){return hR(this,a);},refresh:jQ(function(){var a=this.display.cachedTextHeight;lx(this);this.curOp.forceUpdate=true;lq(this);this.scrollTo(this.doc.scrollLeft,this.doc.scrollTop);j5(this);if(a==null||Math.abs(a-l5(this.display))>0.5){jw(this);}kK(this,"refresh",this);}),swapDoc:jQ(function(a){var b=this.doc;b.cm=null;iF(this,a);lq(this);g4(this);this.scrollTo(a.scrollLeft,a.scrollTop);lD(this,"swapDoc",this,b);return b;}),getInputField:function(){return this.display.input;},getWrapperElement:function(){return this.display.wrapper;},getScrollerElement:function(){return this.display.scroller;},getGutterElement:function(){return this.display.gutters;}};jW(km);var hH=km.defaults={};var fT=km.optionHandlers={};function ie(d,a,b,c){km.defaults[d]=a;if(b){fT[d]=c?function(g,e,f){if(f!=l0){b(g,e,f);}}:b;}}var l0=km.Init={toString:function(){return"CodeMirror.Init";}};ie("value","",function(b,a){b.setValue(a);},true);ie("mode",null,function(b,a){b.doc.modeOption=a;kl(b);},true);ie("indentUnit",2,kl,true);ie("indentWithTabs",false);ie("smartIndent",true);ie("tabSize",4,function(a){h1(a);lq(a);lx(a);},true);ie("specialChars",/[\t\u0000-\u0019\u00ad\u200b\u2028\u2029\ufeff]/g,function(b,a){b.options.specialChars=new RegExp(a.source+(a.test("\t")?"":"|\t"),"g");b.refresh();},true);ie("specialCharPlaceholder",hr,function(a){a.refresh();},true);ie("electricChars",true);ie("rtlMoveVisually",!mc);ie("wholeLineUpdateBefore",true);ie("theme","default",function(a){kG(a);hN(a);},true);ie("keyMap","default",gF);ie("extraKeys",null);ie("lineWrapping",false,gG,true);ie("gutters",[],function(a){lW(a.options);hN(a);},true);ie("fixedGutter",true,function(b,a){b.display.gutters.style.left=a?jj(b.display)+"px":"0";b.refresh();},true);ie("coverGutterNextToScrollbar",false,hP,true);ie("lineNumbers",false,function(a){lW(a.options);hN(a);},true);ie("firstLineNumber",1,hN,true);ie("lineNumberFormatter",function(a){return a;},hN,true);ie("showCursorWhenSelecting",false,jL,true);ie("resetSelectionOnContextMenu",true);ie("readOnly",false,function(b,a){if(a=="nocursor"){l7(b);b.display.input.blur();b.display.disabled=true;}else{b.display.disabled=false;if(!a){g4(b);}}});ie("disableInput",false,function(b,a){if(!a){g4(b);}},true);ie("dragDrop",true);ie("cursorBlinkRate",530);ie("cursorScrollMargin",0);ie("cursorHeight",1);ie("workTime",100);ie("workDelay",100);ie("flattenSpans",true,h1,true);ie("addModeClass",false,h1,true);ie("pollInterval",100);ie("undoDepth",200,function(b,a){b.doc.history.undoDepth=a;});ie("historyEventDelay",1250);ie("viewportMargin",10,function(a){a.refresh();},true);ie("maxHighlightLength",10000,h1,true);ie("moveInputWithCursor",true,function(b,a){if(!a){b.display.inputDiv.style.top=b.display.inputDiv.style.left=0;}});ie("tabindex",null,function(b,a){b.display.input.tabIndex=a||"";});ie("autofocus",null);var kU=km.modes={},l9=km.mimeModes={};km.defineMode=function(c,a){if(!km.defaults.mode&&c!="null"){km.defaults.mode=c;}if(arguments.length>2){a.dependencies=[];for(var b=2;b<arguments.length;++b){a.dependencies.push(arguments[b]);}}kU[c]=a;};km.defineMIME=function(a,b){l9[a]=b;};km.resolveMode=function(b){if(typeof b=="string"&&l9.hasOwnProperty(b)){b=l9[b];}else{if(b&&typeof b.name=="string"&&l9.hasOwnProperty(b.name)){var a=l9[b.name];if(typeof a=="string"){a={name:a};}b=jf(a,b);b.name=a.name;}else{if(typeof b=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(b)){return km.resolveMode("application/xml");}}}if(typeof b=="string"){return{name:b};}else{return b||{name:"null"};}};km.getMode=function(c,d){var d=km.resolveMode(d);var a=kU[d.name];if(!a){return km.getMode(c,"text/plain");}var f=a(c,d);if(k2.hasOwnProperty(d.name)){var b=k2[d.name];for(var e in b){if(!b.hasOwnProperty(e)){continue;}if(f.hasOwnProperty(e)){f["_"+e]=f[e];}f[e]=b[e];}}f.name=d.name;if(d.helperType){f.helperType=d.helperType;}if(d.modeProps){for(var e in d.modeProps){f[e]=d.modeProps[e];}}return f;};km.defineMode("null",function(){return{token:function(a){a.skipToEnd();}};});km.defineMIME("text/plain","null");var k2=km.modeExtensions={};km.extendMode=function(a,b){var c=k2.hasOwnProperty(a)?k2[a]:(k2[a]={});me(b,c);};km.defineExtension=function(b,a){km.prototype[b]=a;};km.defineDocExtension=function(b,a){ld.prototype[b]=a;};km.defineOption=ie;var lK=[];km.defineInitHook=function(a){lK.push(a);};var g6=km.helpers={};km.registerHelper=function(b,c,a){if(!g6.hasOwnProperty(b)){g6[b]=km[b]={_global:[]};}g6[b][c]=a;};km.registerGlobalHelper=function(b,c,d,a){km.registerHelper(b,c,a);g6[b]._global.push({pred:d,val:a});};var k8=km.copyState=function(a,d){if(d===true){return d;}if(a.copyState){return a.copyState(d);}var b={};for(var e in d){var c=d[e];if(c instanceof Array){c=c.concat([]);}b[e]=c;}return b;};var le=km.startState=function(a,b,c){return a.startState?a.startState(b,c):true;};km.innerMode=function(a,c){while(a.innerMode){var b=a.innerMode(c);if(!b||b.mode==a){break;}c=b.state;a=b.mode;}return b||{mode:a,state:c};};var gM=km.commands={selectAll:function(a){a.setSelection(jy(a.firstLine(),0),jy(a.lastLine()),jq);},singleSelection:function(a){a.setSelection(a.getCursor("anchor"),a.getCursor("head"),jq);},killLine:function(a){hQ(a,function(b){if(b.empty()){var c=hn(a.doc,b.head.line).text.length;if(b.head.ch==c&&b.head.line<a.lastLine()){return{from:b.head,to:jy(b.head.line+1,0)};}else{return{from:b.head,to:jy(b.head.line,c)};}}else{return{from:b.from(),to:b.to()};}});},deleteLine:function(a){hQ(a,function(b){return{from:jy(b.from().line,0),to:gd(a.doc,jy(b.to().line+1,0))};});},delLineLeft:function(a){hQ(a,function(b){return{from:jy(b.from().line,0),to:b.from()};});},undo:function(a){a.undo();},redo:function(a){a.redo();},undoSelection:function(a){a.undoSelection();},redoSelection:function(a){a.redoSelection();},goDocStart:function(a){a.extendSelection(jy(a.firstLine(),0));},goDocEnd:function(a){a.extendSelection(jy(a.lastLine()));},goLineStart:function(a){a.extendSelectionsBy(function(b){return kd(a,b.head.line);},ks);},goLineStartSmart:function(a){a.extendSelectionsBy(function(b){var e=kd(a,b.head.line);var c=a.getLineHandle(e.line);var d=ji(c);if(!d||d[0].level==0){var f=Math.max(0,c.text.search(/\S/));var g=b.head.line==e.line&&b.head.ch<=f&&b.head.ch;return jy(e.line,g?0:f);}return e;},ks);},goLineEnd:function(a){a.extendSelectionsBy(function(b){return hd(a,b.head.line);},ks);},goLineRight:function(a){a.extendSelectionsBy(function(c){var b=a.charCoords(c.head,"div").top+5;return a.coordsChar({left:a.display.lineDiv.offsetWidth+100,top:b},"div");},ks);},goLineLeft:function(a){a.extendSelectionsBy(function(c){var b=a.charCoords(c.head,"div").top+5;return a.coordsChar({left:0,top:b},"div");},ks);},goLineUp:function(a){a.moveV(-1,"line");},goLineDown:function(a){a.moveV(1,"line");},goPageUp:function(a){a.moveV(-1,"page");},goPageDown:function(a){a.moveV(1,"page");},goCharLeft:function(a){a.moveH(-1,"char");},goCharRight:function(a){a.moveH(1,"char");},goColumnLeft:function(a){a.moveH(-1,"column");},goColumnRight:function(a){a.moveH(1,"column");},goWordLeft:function(a){a.moveH(-1,"word");},goGroupRight:function(a){a.moveH(1,"group");},goGroupLeft:function(a){a.moveH(-1,"group");},goWordRight:function(a){a.moveH(1,"word");},delCharBefore:function(a){a.deleteH(-1,"char");},delCharAfter:function(a){a.deleteH(1,"char");},delWordBefore:function(a){a.deleteH(-1,"word");},delWordAfter:function(a){a.deleteH(1,"word");},delGroupBefore:function(a){a.deleteH(-1,"group");},delGroupAfter:function(a){a.deleteH(1,"group");},indentAuto:function(a){a.indentSelection("smart");},indentMore:function(a){a.indentSelection("add");},indentLess:function(a){a.indentSelection("subtract");},insertTab:function(a){a.replaceSelection("\t");},insertSoftTab:function(d){var b=[],c=d.listSelections(),f=d.options.tabSize;for(var g=0;g<c.length;g++){var e=c[g].from();var a=ls(d.getLine(e.line),e.ch,f);b.push(new Array(f-a%f+1).join(" "));}d.replaceSelections(b);},defaultTab:function(a){if(a.somethingSelected()){a.indentSelection("add");}else{a.execCommand("insertTab");}},transposeChars:function(a){hR(a,function(){var b=a.listSelections(),c=[];for(var g=0;g<b.length;g++){var e=b[g].head,d=hn(a.doc,e.line).text;if(d){if(e.ch==d.length){e=new jy(e.line,e.ch-1);}if(e.ch>0){e=new jy(e.line,e.ch+1);a.replaceRange(d.charAt(e.ch-1)+d.charAt(e.ch-2),jy(e.line,e.ch-2),e,"+transpose");}else{if(e.line>a.doc.first){var f=hn(a.doc,e.line-1).text;if(f){a.replaceRange(d.charAt(0)+"\n"+f.charAt(f.length-1),jy(e.line-1,f.length-1),jy(e.line,1),"+transpose");}}}}c.push(new jh(e,e));}a.setSelections(c);});},newlineAndIndent:function(a){hR(a,function(){var d=a.listSelections().length;for(var b=0;b<d;b++){var c=a.listSelections()[b];a.replaceRange("\n",c.anchor,c.head,"+input");a.indentLine(c.from().line+1,null,true);gg(a);}});},toggleOverwrite:function(a){a.toggleOverwrite();}};var hx=km.keyMap={};hx.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"};hx.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"};hx.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delLineLeft","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection",fallthrough:["basic","emacsy"]};hx.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"};hx["default"]=k0?hx.macDefault:hx.pcDefault;function f2(a){if(typeof a=="string"){return hx[a];}else{return a;}}var iR=km.lookupKey=function(c,e,a){function f(g){g=f2(g);var h=g[c];if(h===false){return"stop";}if(h!=null&&a(h)){return true;}if(g.nofallthrough){return"stop";}var i=g.fallthrough;if(i==null){return false;}if(Object.prototype.toString.call(i)!="[object Array]"){return f(i);}for(var j=0;j<i.length;++j){var k=f(i[j]);if(k){return k;}}return false;}for(var b=0;b<e.length;++b){var d=f(e[b]);if(d){return d!="stop";}}};var gO=km.isModifierKey=function(a){var b=hl[a.keyCode];return b=="Ctrl"||b=="Alt"||b=="Shift"||b=="Mod";};var iw=km.keyName=function(b,a){if(i5&&b.keyCode==34&&b["char"]){return false;}var c=hl[b.keyCode];if(c==null||b.altGraphKey){return false;}if(b.altKey){c="Alt-"+c;}if(ly?b.metaKey:b.ctrlKey){c="Ctrl-"+c;}if(ly?b.ctrlKey:b.metaKey){c="Cmd-"+c;}if(!a&&b.shiftKey){c="Shift-"+c;}return c;};km.fromTextArea=function(d,c){if(!c){c={};}c.value=d.value;if(!c.tabindex&&d.tabindex){c.tabindex=d.tabindex;}if(!c.placeholder&&d.placeholder){c.placeholder=d.placeholder;}if(c.autofocus==null){var b=hf();c.autofocus=b==d||d.getAttribute("autofocus")!=null&&b==document.body;}function g(){d.value=e.getValue();}if(d.form){lk(d.form,"submit",g);if(!c.leaveSubmitMethodAlone){var a=d.form,f=a.submit;try{var h=a.submit=function(){g();a.submit=f;a.submit();a.submit=h;};}catch(i){}}}d.style.display="none";var e=km(function(j){d.parentNode.insertBefore(j,d.nextSibling);},c);e.save=g;e.getTextArea=function(){return d;};e.toTextArea=function(){g();d.parentNode.removeChild(e.getWrapperElement());d.style.display="";if(d.form){ix(d.form,"submit",g);if(typeof d.form.submit=="function"){d.form.submit=f;}}};return e;};var gr=km.StringStream=function(b,a){this.pos=this.start=0;this.string=b;this.tabSize=a||8;this.lastColumnPos=this.lastColumnValue=0;this.lineStart=0;};gr.prototype={eol:function(){return this.pos>=this.string.length;},sol:function(){return this.pos==this.lineStart;},peek:function(){return this.string.charAt(this.pos)||undefined;},next:function(){if(this.pos<this.string.length){return this.string.charAt(this.pos++);}},eat:function(c){var a=this.string.charAt(this.pos);if(typeof c=="string"){var b=a==c;}else{var b=a&&(c.test?c.test(a):c(a));}if(b){++this.pos;return a;}},eatWhile:function(b){var a=this.pos;while(this.eat(b)){}return this.pos>a;},eatSpace:function(){var a=this.pos;while(/[\s\u00a0]/.test(this.string.charAt(this.pos))){++this.pos;}return this.pos>a;},skipToEnd:function(){this.pos=this.string.length;},skipTo:function(b){var a=this.string.indexOf(b,this.pos);if(a>-1){this.pos=a;return true;}},backUp:function(a){this.pos-=a;},column:function(){if(this.lastColumnPos<this.start){this.lastColumnValue=ls(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue);this.lastColumnPos=this.start;}return this.lastColumnValue-(this.lineStart?ls(this.string,this.lineStart,this.tabSize):0);},indentation:function(){return ls(this.string,null,this.tabSize)-(this.lineStart?ls(this.string,this.lineStart,this.tabSize):0);},match:function(f,c,d){if(typeof f=="string"){var e=function(g){return d?g.toLowerCase():g;};var a=this.string.substr(this.pos,f.length);if(e(a)==e(f)){if(c!==false){this.pos+=f.length;}return true;}}else{var b=this.string.slice(this.pos).match(f);if(b&&b.index>0){return null;}if(b&&c!==false){this.pos+=b[0].length;}return b;}},current:function(){return this.string.slice(this.start,this.pos);},hideFirstChars:function(a,b){this.lineStart+=a;try{return b();}finally{this.lineStart-=a;}}};var j0=km.TextMarker=function(a,b){this.lines=[];this.type=b;this.doc=a;};jW(j0);j0.prototype.clear=function(){if(this.explicitlyCleared){return;}var e=this.doc.cm,a=e&&!e.curOp;if(a){h0(e);}if(hh(this,"clear")){var d=this.find();if(d){lD(this,"clear",d.from,d.to);}}var j=null,g=null;for(var i=0;i<this.lines.length;++i){var c=this.lines[i];var f=hz(c.markedSpans,this);if(e&&!this.collapsed){jU(e,lE(c),"text");}else{if(e){if(f.to!=null){g=lE(c);}if(f.from!=null){j=lE(c);}}}c.markedSpans=gE(c.markedSpans,f);if(f.from==null&&this.collapsed&&!h9(this.doc,c)&&e){gZ(c,l5(e.display));}}if(e&&this.collapsed&&!e.options.lineWrapping){for(var i=0;i<this.lines.length;++i){var b=hS(this.lines[i]),h=hX(b);if(h>e.display.maxLineLength){e.display.maxLine=b;e.display.maxLineLength=h;e.display.maxLineChanged=true;}}}if(j!=null&&e&&this.collapsed){lx(e,j,g+1);}this.lines.length=0;this.explicitlyCleared=true;if(this.atomic&&this.doc.cantEdit){this.doc.cantEdit=false;if(e){g0(e.doc);}}if(e){lD(e,"markerCleared",e,this);}if(a){lo(e);}if(this.parent){this.parent.clear();}};j0.prototype.find=function(a,c){if(a==null&&this.type=="bookmark"){a=1;}var e,f;for(var b=0;b<this.lines.length;++b){var d=this.lines[b];var g=hz(d.markedSpans,this);if(g.from!=null){e=jy(c?d:lE(d),g.from);if(a==-1){return e;}}if(g.to!=null){f=jy(c?d:lE(d),g.to);if(a==1){return f;}}}return e&&{from:e,to:f};};j0.prototype.changed=function(){var a=this.find(-1,true),b=this,c=this.doc.cm;if(!a||!c){return;}hR(c,function(){var h=a.line,g=lE(a.line);var d=hu(c,g);if(d){k9(d);c.curOp.selectionChanged=c.curOp.forceUpdate=true;}c.curOp.updateMaxLine=true;if(!h9(b.doc,h)&&b.height!=null){var e=b.height;b.height=null;var f=ko(b)-e;if(f){gZ(h,h.height+f);}}});};j0.prototype.attachLine=function(b){if(!this.lines.length&&this.doc.cm){var a=this.doc.cm.curOp;if(!a.maybeHiddenMarkers||lc(a.maybeHiddenMarkers,this)==-1){(a.maybeUnhiddenMarkers||(a.maybeUnhiddenMarkers=[])).push(this);}}this.lines.push(b);};j0.prototype.detachLine=function(b){this.lines.splice(lc(this.lines,b),1);if(!this.lines.length&&this.doc.cm){var a=this.doc.cm.curOp;(a.maybeHiddenMarkers||(a.maybeHiddenMarkers=[])).push(this);}};var lQ=0;function gI(e,g,f,c,i){if(c&&c.shared){return j4(e,g,f,c,i);}if(e.cm&&!e.cm.curOp){return kb(e.cm,gI)(e,g,f,c,i);}var j=new j0(e,i),d=lT(g,f);if(c){me(c,j,false);}if(d>0||d==0&&j.clearWhenEmpty!==false){return j;}if(j.replacedWith){j.collapsed=true;j.widgetNode=f0("span",[j.replacedWith],"CodeMirror-widget");if(!c.handleMouseEvents){j.widgetNode.ignoreEvents=true;}if(c.insertLeft){j.widgetNode.insertLeft=true;}}if(j.collapsed){if(kJ(e,g.line,g,f,j)||g.line!=f.line&&kJ(e,f.line,g,f,j)){throw new Error("Inserting collapsed marker partially overlapping an existing one");}lL=true;}if(j.addToHistory){ga(e,{from:g,to:f,origin:"markText"},e.sel,NaN);}var a=g.line,h=e.cm,b;e.iter(a,f.line+1,function(l){if(h&&j.collapsed&&!h.options.lineWrapping&&hS(l)==h.display.maxLine){b=true;}if(j.collapsed&&a!=g.line){gZ(l,0);}lY(l,new id(j,a==g.line?g.ch:null,a==f.line?f.ch:null));++a;});if(j.collapsed){e.iter(g.line,f.line+1,function(l){if(h9(e,l)){gZ(l,0);}});}if(j.clearOnEnter){lk(j,"beforeCursorEnter",function(){j.clear();});}if(j.readOnly){gL=true;if(e.history.done.length||e.history.undone.length){e.clearHistory();}}if(j.collapsed){j.id=++lQ;j.atomic=true;}if(h){if(b){h.curOp.updateMaxLine=true;}if(j.collapsed){lx(h,g.line,f.line+1);}else{if(j.className||j.title||j.startStyle||j.endStyle){for(var k=g.line;k<=f.line;k++){jU(h,k,"text");}}}if(j.atomic){g0(h.doc);}lD(h,"markerAdded",h,j);}return j;}var hV=km.SharedTextMarker=function(a,b){this.markers=a;this.primary=b;for(var c=0;c<a.length;++c){a[c].parent=this;}};jW(hV);hV.prototype.clear=function(){if(this.explicitlyCleared){return;}this.explicitlyCleared=true;for(var a=0;a<this.markers.length;++a){this.markers[a].clear();}lD(this,"clear");};hV.prototype.find=function(a,b){return this.primary.find(a,b);};function j4(h,e,f,d,b){d=me(d);d.shared=false;var g=[gI(h,e,f,d,b)],c=g[0];var a=d.widgetNode;iO(h,function(i){if(a){d.widgetNode=a.cloneNode(true);}g.push(gI(i,gd(i,e),gd(i,f),d,b));for(var j=0;j<i.linked.length;++j){if(i.linked[j].isParent){return;}}c=gf(g);});return new hV(g,c);}function gv(a){return a.findMarks(jy(a.first,0),a.clipPos(jy(a.lastLine())),function(b){return b.parent;});}function hv(g,f){for(var a=0;a<f.length;a++){var c=f[a],e=c.find();var d=g.clipPos(e.from),h=g.clipPos(e.to);if(lT(d,h)){var b=gI(g,d,h,c.primary,c.primary.type);c.markers.push(b);b.parent=c;}}}function j3(a){for(var b=0;b<a.length;b++){var d=a[b],e=[d.primary.doc];iO(d.primary.doc,function(g){e.push(g);});for(var c=0;c<d.markers.length;c++){var f=d.markers[c];if(lc(e,f.doc)==-1){f.parent=null;d.markers.splice(c--,1);}}}}function id(c,a,b){this.marker=c;this.from=a;this.to=b;}function hz(b,d){if(b){for(var c=0;c<b.length;++c){var a=b[c];if(a.marker==d){return a;}}}}function gE(c,b){for(var a,d=0;d<c.length;++d){if(c[d]!=b){(a||(a=[])).push(c[d]);}}return a;}function lY(b,a){b.markedSpans=b.markedSpans?b.markedSpans.concat([a]):[a];a.marker.attachLine(b);}function mb(a,i,e){if(a){for(var g=0,d;g<a.length;++g){var c=a[g],f=c.marker;var b=c.from==null||(f.inclusiveLeft?c.from<=i:c.from<i);if(b||c.from==i&&f.type=="bookmark"&&(!e||!c.marker.insertLeft)){var h=c.to==null||(f.inclusiveRight?c.to>=i:c.to>i);(d||(d=[])).push(new id(f,c.from,h?null:c.to));}}}return d;}function kO(a,h,e){if(a){for(var g=0,d;g<a.length;++g){var c=a[g],f=c.marker;var i=c.to==null||(f.inclusiveRight?c.to>=h:c.to>h);if(i||c.from==h&&f.type=="bookmark"&&(!e||c.marker.insertLeft)){var b=c.from==null||(f.inclusiveLeft?c.from<=h:c.from<h);(d||(d=[])).push(new id(f,b?null:c.from-h,c.to==null?null:c.to-h));}}}return d;}function h4(g,j){var k=kS(g,j.from.line)&&hn(g,j.from.line).markedSpans;var d=kS(g,j.to.line)&&hn(g,j.to.line).markedSpans;if(!k&&!d){return null;}var a=j.from.ch,o=j.to.ch,l=lT(j.from,j.to)==0;var m=mb(k,a,l);var e=kO(d,o,l);var f=j.text.length==1,q=gf(j.text).length+(f?a:0);if(m){for(var p=0;p<m.length;++p){var h=m[p];if(h.to==null){var c=hz(e,h.marker);if(!c){h.to=a;}else{if(f){h.to=c.to==null?null:c.to+q;}}}}}if(e){for(var p=0;p<e.length;++p){var h=e[p];if(h.to!=null){h.to+=q;}if(h.from==null){var c=hz(m,h.marker);if(!c){h.from=q;if(f){(m||(m=[])).push(h);}}}else{h.from+=q;if(f){(m||(m=[])).push(h);}}}}if(m){m=io(m);}if(e&&e!=m){e=io(e);}var n=[m];if(!f){var i=j.text.length-2,b;if(i>0&&m){for(var p=0;p<m.length;++p){if(m[p].to==null){(b||(b=[])).push(new id(m[p].marker,null,null));}}}for(var p=0;p<i;++p){n.push(b);}n.push(e);}return n;}function io(b){for(var c=0;c<b.length;++c){var a=b[c];if(a.from!=null&&a.from==a.to&&a.marker.clearWhenEmpty!==false){b.splice(c--,1);}}if(!b.length){return null;}return b;}function iK(d,f){var b=k3(d,f);var c=h4(d,f);if(!b){return c;}if(!c){return b;}for(var i=0;i<b.length;++i){var h=b[i],g=c[i];if(h&&g){spans:for(var j=0;j<g.length;++j){var e=g[j];for(var a=0;a<h.length;++a){if(h[a].marker==e.marker){continue spans;}}h.push(e);}}else{if(g){b[i]=g;}}}return b;}function h5(c,e,d){var k=null;c.iter(e.line,d.line+1,function(n){if(n.markedSpans){for(var p=0;p<n.markedSpans.length;++p){var o=n.markedSpans[p].marker;if(o.readOnly&&(!k||lc(k,o)==-1)){(k||(k=[])).push(o);}}}});if(!k){return null;}var j=[{from:e,to:d}];for(var i=0;i<k.length;++i){var h=k[i],m=h.find(0);for(var l=0;l<j.length;++l){var a=j[l];if(lT(a.to,m.from)<0||lT(a.from,m.to)>0){continue;}var f=[l,1],b=lT(a.from,m.from),g=lT(a.to,m.to);if(b<0||!h.inclusiveLeft&&!b){f.push({from:a.from,to:m.from});}if(g>0||!h.inclusiveRight&&!g){f.push({from:m.to,to:a.to});}j.splice.apply(j,f);l+=f.length-1;}}return j;}function gU(c){var a=c.markedSpans;if(!a){return;}for(var b=0;b<a.length;++b){a[b].marker.detachLine(c);}c.markedSpans=null;}function j9(c,a){if(!a){return;}for(var b=0;b<a.length;++b){a[b].marker.attachLine(c);}c.markedSpans=a;}function h3(a){return a.inclusiveLeft?-1:0;}function ln(a){return a.inclusiveRight?1:0;}function hc(a,c){var f=a.lines.length-c.lines.length;if(f!=0){return f;}var b=a.find(),e=c.find();var d=lT(b.from,e.from)||h3(a)-h3(c);if(d){return -d;}var g=lT(b.to,e.to)||ln(a)-ln(c);if(g){return g;}return c.id-a.id;}function lO(c,e){var d=lL&&c.markedSpans,f;if(d){for(var a,b=0;b<d.length;++b){a=d[b];if(a.marker.collapsed&&(e?a.from:a.to)==null&&(!f||hc(f,a.marker)<0)){f=a.marker;}}}return f;}function gw(a){return lO(a,true);}function jB(a){return lO(a,false);}function kJ(f,l,h,g,j){var c=hn(f,l);var b=lL&&c.markedSpans;if(b){for(var k=0;k<b.length;++k){var a=b[k];if(!a.marker.collapsed){continue;}var d=a.marker.find(0);var e=lT(d.from,h)||h3(a.marker)-h3(j);var i=lT(d.to,g)||ln(a.marker)-ln(j);if(e>=0&&i<=0||e<=0&&i>=0){continue;}if(e<=0&&(lT(d.to,h)||ln(a.marker)-h3(j))>0||e>=0&&(lT(d.from,g)||h3(a.marker)-ln(j))<0){return true;}}}}function hS(a){var b;while(b=gw(a)){a=b.find(-1,true).line;}return a;}function iV(a){var c,b;while(c=jB(a)){a=c.find(1,true).line;(b||(b=[])).push(a);}return b;}function l6(a,c){var d=hn(a,c),b=hS(d);if(d==b){return c;}return lE(b);}function i2(a,b){if(b>a.lastLine()){return b;}var c=hn(a,b),d;if(!h9(a,c)){return b;}while(d=jB(c)){c=d.find(1,true).line;}return lE(c)+1;}function h9(e,c){var d=lL&&c.markedSpans;if(d){for(var a,b=0;b<d.length;++b){a=d[b];if(!a.marker.collapsed){continue;}if(a.from==null){return true;}if(a.marker.widgetNode){continue;}if(a.from==0&&a.marker.inclusiveLeft&&jK(e,c,a)){return true;}}}}function jK(e,c,a){if(a.to==null){var d=a.marker.find(1,true);return jK(e,d.line,hz(d.line.markedSpans,a.marker));}if(a.marker.inclusiveRight&&a.to==c.text.length){return true;}for(var f,b=0;b<c.markedSpans.length;++b){f=c.markedSpans[b];if(f.marker.collapsed&&!f.marker.widgetNode&&f.from==a.to&&(f.to==null||f.to!=a.from)&&(f.marker.inclusiveLeft||a.marker.inclusiveRight)&&jK(e,c,f)){return true;}}}var hB=km.LineWidget=function(d,a,c){if(c){for(var b in c){if(c.hasOwnProperty(b)){this[b]=c[b];}}}this.cm=d;this.node=a;};jW(hB);function jb(c,b,a){if(lG(b)<((c.curOp&&c.curOp.scrollTop)||c.doc.scrollTop)){hT(c,null,a);}}hB.prototype.clear=function(){var c=this.cm,a=this.line.widgets,b=this.line,e=lE(b);if(e==null||!a){return;}for(var f=0;f<a.length;++f){if(a[f]==this){a.splice(f--,1);}}if(!a.length){b.widgets=null;}var d=ko(this);hR(c,function(){jb(c,b,-d);jU(c,e,"widget");gZ(b,Math.max(0,b.height-d));});};hB.prototype.changed=function(){var c=this.height,d=this.cm,b=this.line;this.height=null;var a=ko(this)-c;if(!a){return;}hR(d,function(){d.curOp.forceUpdate=true;jb(d,b,a);gZ(b,b.height+a);});};function ko(a){if(a.height!=null){return a.height;}if(!gP(document.body,a.node)){lw(a.cm.display.measure,f0("div",[a.node],null,"position: relative"));}return a.height=a.node.offsetHeight;}function jt(d,e,b,c){var a=new hB(d,b,c);if(a.noHScroll){d.display.alignWidgets=true;}gY(d,e,"widget",function(g){var f=g.widgets||(g.widgets=[]);if(a.insertAt==null){f.push(a);}else{f.splice(Math.min(f.length-1,Math.max(0,a.insertAt)),0,a);}a.line=g;if(!h9(d.doc,g)){var h=lG(g)<d.doc.scrollTop;gZ(g,g.height+ko(a));if(h){hT(d,null,a.height);}d.curOp.forceUpdate=true;}return true;});return a;}var gW=km.Line=function(a,b,c){this.text=a;j9(this,b);this.height=c?c(this):1;};jW(gW);gW.prototype.lineNo=function(){return lE(this);};function hU(c,e,b,d){c.text=e;if(c.stateAfter){c.stateAfter=null;}if(c.styles){c.styles=null;}if(c.order!=null){c.order=null;}gU(c);j9(c,b);var a=d?d(c):1;if(a!=c.height){gZ(c,a);}}function jR(a){a.parent=null;gU(a);}function la(b,c){if(b){for(;;){var d=b.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!d){break;}b=b.slice(0,d.index)+b.slice(d.index+d[0].length);var a=d[1]?"bgClass":"textClass";if(c[a]==null){c[a]=d[2];}else{if(!(new RegExp("(?:^|s)"+d[2]+"(?:$|s)")).test(c[a])){c[a]+=" "+d[2];}}}}return b;}function iA(a,b){if(a.blankLine){return a.blankLine(b);}if(!a.innerMode){return;}var c=km.innerMode(a,b);if(c.mode.blankLine){return c.mode.blankLine(c.state);}}function gQ(e,a,b){for(var d=0;d<10;d++){var c=e.token(a,b);if(a.pos>a.start){return c;}}throw new Error("Mode "+e.name+" failed to advance stream.");}function hZ(f,d,k,a,j,m,l){var n=k.flattenSpans;if(n==null){n=f.options.flattenSpans;}var h=0,i=null;var e=new gr(d,f.options.tabSize),b;if(d==""){la(iA(k,a),m);}while(!e.eol()){if(e.pos>f.options.maxHighlightLength){n=false;if(l){hL(f,d,a,e.pos);}e.pos=d.length;b=null;}else{b=la(gQ(k,e,a),m);}if(f.options.addModeClass){var c=km.innerMode(k,a).mode.name;if(c){b="m-"+(b?c+" "+b:c);}}if(!n||i!=b){if(h<e.start){j(e.start,i);}h=e.start;i=b;}e.start=e.pos;}while(h<e.pos){var g=Math.min(e.pos,h+50000);j(g,i);h=g;}}function gn(e,c,b,h){var d=[e.state.modeGen],i={};hZ(e,c.text,e.doc.mode,b,function(l,k){d.push(l,k);},i,h);for(var a=0;a<e.state.overlays.length;++a){var g=e.state.overlays[a],f=1,j=0;hZ(e,c.text,g.mode,true,function(n,l){var o=f;while(j<n){var m=d[f];if(m>n){d.splice(f,1,n,d[f+1],m);}f+=2;j=Math.min(n,m);}if(!l){return;}if(g.opaque){d.splice(o,f-o,n,"cm-overlay "+l);f=o+2;}else{for(;o<f;o+=2){var k=d[o+1];d[o+1]=(k?k+" ":"")+"cm-overlay "+l;}}},i);}return{styles:d,classes:i.bgClass||i.textClass?i:null};}function jV(b,a){if(!a.styles||a.styles[0]!=b.state.modeGen){var c=gn(b,a,a.stateAfter=hC(b,lE(a)));a.styles=c.styles;if(c.classes){a.styleClasses=c.classes;}else{if(a.styleClasses){a.styleClasses=null;}}}return a.styles;}function hL(d,e,b,c){var f=d.doc.mode;var a=new gr(e,d.options.tabSize);a.start=a.pos=c||0;if(e==""){iA(f,b);}while(!a.eol()&&a.pos<=d.options.maxHighlightLength){gQ(f,a,b);a.start=a.pos;}}var g2={},lb={};function go(a,b){if(!a||/^\s*$/.test(a)){return null;}var c=b.addModeClass?lb:g2;return c[a]||(c[a]=a.replace(/\S+/g,"cm-$&"));}function gs(c,f){var e=f0("span",null,null,ki?"padding-right: .1px":null);var a={pre:f0("pre",[e]),content:e,col:0,pos:0,cm:c};f.measure={};for(var g=0;g<=(f.rest?f.rest.length:0);g++){var b=g?f.rest[g-1]:f.line,d;a.pos=0;a.addToken=ib;if((hp||ki)&&c.getOption("lineWrapping")){a.addToken=gh(a.addToken);}if(lC(c.display.measure)&&(d=ji(b))){a.addToken=jH(a.addToken,d);}a.map=[];kp(b,a,jV(c,b));if(b.styleClasses){if(b.styleClasses.bgClass){a.bgClass=f5(b.styleClasses.bgClass,a.bgClass||"");}if(b.styleClasses.textClass){a.textClass=f5(b.styleClasses.textClass,a.textClass||"");}}if(a.map.length==0){a.map.push(0,0,a.content.appendChild(kw(c.display.measure)));}if(g==0){f.measure.map=a.map;f.measure.cache={};}else{(f.measure.maps||(f.measure.maps=[])).push(a.map);(f.measure.caches||(f.measure.caches=[])).push({});}}kK(c,"renderLine",c,f.line,a.pre);if(a.pre.className){a.textClass=f5(a.pre.className,a.textClass||"");}return a;}function hr(a){var b=f0("span","\u2022","cm-invalidchar");b.title="\\u"+a.charCodeAt(0).toString(16);return b;}function ib(n,d,b,p,c,e){if(!d){return;}var i=n.cm.options.specialChars,j=false;if(!i.test(d)){n.col+=d.length;var k=document.createTextNode(d);n.map.push(n.pos,n.pos+d.length,k);if(kN){j=true;}n.pos+=d.length;}else{var k=document.createDocumentFragment(),g=0;while(true){i.lastIndex=g;var a=i.exec(d);var l=a?a.index-g:d.length-g;if(l){var o=document.createTextNode(d.slice(g,g+l));if(kN){k.appendChild(f0("span",[o]));}else{k.appendChild(o);}n.map.push(n.pos,n.pos+l,o);n.col+=l;n.pos+=l;}if(!a){break;}g+=l+1;if(a[0]=="\t"){var m=n.cm.options.tabSize,h=m-n.col%m;var o=k.appendChild(f0("span",i1(h),"cm-tab"));n.col+=h;}else{var o=n.cm.options.specialCharPlaceholder(a[0]);if(kN){k.appendChild(f0("span",[o]));}else{k.appendChild(o);}n.col+=1;}n.map.push(n.pos,n.pos+1,o);n.pos++;}}if(b||p||c||j){var f=b||"";if(p){f+=p;}if(c){f+=c;}var q=f0("span",[k],f);if(e){q.title=e;}return n.content.appendChild(q);}n.content.appendChild(k);}function gh(b){function a(d){var c=" ";for(var e=0;e<d.length-2;++e){c+=e%2?" ":"\u00a0";}c+=" ";return c;}return function(c,e,h,d,f,g){b(c,e.replace(/ {3,}/g,a),h,d,f,g);};}function jH(a,b){return function(f,d,l,h,c,e){l=l?l+" cm-force-border":"cm-force-border";var k=f.pos,i=k+d.length;for(;;){for(var g=0;g<b.length;g++){var j=b[g];if(j.to>k&&j.from<=k){break;}}if(j.to>=i){return a(f,d,l,h,c,e);}a(f,d.slice(0,j.to-k),l,h,null,e);h=null;d=d.slice(j.to-k);k=j.to;}};}function lH(c,a,d,b){var e=!b&&d.widgetNode;if(e){c.map.push(c.pos,c.pos+a,e);c.content.appendChild(e);}c.pos+=a;}function kp(o,i,p){var s=o.markedSpans,q=o.text,k=0;if(!s){for(var f=1;f<p.length;f+=2){i.addToken(i,q.slice(k,k=p[f]),go(p[f+1],i.cm.options));}return;}var e=q.length,t=0,f=1,m="",d;var x=0,b,c,l,v,w;for(;;){if(x==t){b=c=l=v="";w=null;x=Infinity;var r=[];for(var h=0;h<s.length;++h){var g=s[h],j=g.marker;if(g.from<=t&&(g.to==null||g.to>t)){if(g.to!=null&&x>g.to){x=g.to;c="";}if(j.className){b+=" "+j.className;}if(j.startStyle&&g.from==t){l+=" "+j.startStyle;}if(j.endStyle&&g.to==x){c+=" "+j.endStyle;}if(j.title&&!v){v=j.title;}if(j.collapsed&&(!w||hc(w.marker,j)<0)){w=g;}}else{if(g.from>t&&x>g.from){x=g.from;}}if(j.type=="bookmark"&&g.from==t&&j.widgetNode){r.push(j);}}if(w&&(w.from||0)==t){lH(i,(w.to==null?e+1:w.to)-t,w.marker,w.from==null);if(w.to==null){return;}}if(!w&&r.length){for(var h=0;h<r.length;++h){lH(i,0,r[h]);}}}if(t>=e){break;}var n=Math.min(e,x);while(true){if(m){var a=t+m.length;if(!w){var u=a>n?m.slice(0,n-t):m;i.addToken(i,u,d?d+b:b,l,t+u.length==x?c:"",v);}if(a>=n){m=m.slice(n-t);t=n;break;}t=a;l="";}m=q.slice(k,k=p[f++]);d=go(p[f++],i.cm.options);}}}function g7(b,a){return a.from.ch==0&&a.to.ch==0&&gf(a.text)==""&&(!b.cm||b.cm.options.wholeLineUpdateBefore);}function hY(e,j,b,n){function d(q){return b?b[q]:null;}function a(s,q,r){hU(s,q,r,n);lD(s,"change",s,j);}var g=j.from,f=j.to,c=j.text;var i=hn(e,g.line),h=hn(e,f.line);var k=gf(c),o=d(c.length-1),l=f.line-g.line;if(g7(e,j)){for(var p=0,m=[];p<c.length-1;++p){m.push(new gW(c[p],d(p),n));}a(h,h.text,o);if(l){e.remove(g.line,l);}if(m.length){e.insert(g.line,m);}}else{if(i==h){if(c.length==1){a(i,i.text.slice(0,g.ch)+k+i.text.slice(f.ch),o);}else{for(var m=[],p=1;p<c.length-1;++p){m.push(new gW(c[p],d(p),n));}m.push(new gW(k+i.text.slice(f.ch),o,n));a(i,i.text.slice(0,g.ch)+c[0],d(0));e.insert(g.line+1,m);}}else{if(c.length==1){a(i,i.text.slice(0,g.ch)+c[0]+h.text.slice(f.ch),d(0));e.remove(g.line+1,l);}else{a(i,i.text.slice(0,g.ch)+c[0],d(0));a(h,k+h.text.slice(f.ch),o);for(var p=1,m=[];p<c.length-1;++p){m.push(new gW(c[p],d(p),n));}if(l>1){e.remove(g.line+1,l-1);}e.insert(g.line+1,m);}}}lD(e,"change",e,j);}function hM(b){this.lines=b;this.parent=null;for(var a=0,c=0;a<b.length;++a){b[a].parent=this;c+=b[a].height;}this.height=c;}hM.prototype={chunkSize:function(){return this.lines.length;},removeInner:function(d,e){for(var b=d,a=d+e;b<a;++b){var c=this.lines[b];this.height-=c.height;jR(c);lD(c,"delete");}this.lines.splice(d,e);},collapse:function(a){a.push.apply(a,this.lines);},insertInner:function(c,b,d){this.height+=d;this.lines=this.lines.slice(0,c).concat(b).concat(this.lines.slice(c));for(var a=0;a<b.length;++a){b[a].parent=this;}},iterN:function(d,a,b){for(var c=d+a;d<c;++d){if(b(this.lines[d])){return true;}}}};function h2(a){this.children=a;var b=0,d=0;for(var c=0;c<a.length;++c){var e=a[c];b+=e.chunkSize();d+=e.height;e.parent=this;}this.size=b;this.height=d;this.parent=null;}h2.prototype={chunkSize:function(){return this.size;},removeInner:function(d,e){this.size-=e;for(var b=0;b<this.children.length;++b){var f=this.children[b],h=f.chunkSize();if(d<h){var a=Math.min(e,h-d),g=f.height;f.removeInner(d,a);this.height-=g-f.height;if(h==a){this.children.splice(b--,1);f.parent=null;}if((e-=a)==0){break;}d=0;}else{d-=h;}}if(this.size-e<25&&(this.children.length>1||!(this.children[0] instanceof hM))){var c=[];this.collapse(c);this.children=[new hM(c)];this.children[0].parent=this;}},collapse:function(b){for(var a=0;a<this.children.length;++a){this.children[a].collapse(b);}},insertInner:function(c,b,d){this.size+=b.length;this.height+=d;for(var g=0;g<this.children.length;++g){var e=this.children[g],f=e.chunkSize();if(c<=f){e.insertInner(c,b,d);if(e.lines&&e.lines.length>50){while(e.lines.length>50){var h=e.lines.splice(e.lines.length-25,25);var a=new hM(h);e.height-=a.height;this.children.splice(g+1,0,a);a.parent=this;}this.maybeSpill();}break;}c-=f;}},maybeSpill:function(){if(this.children.length<=10){return;}var a=this;do{var c=a.children.splice(a.children.length-5,5);var b=new h2(c);if(!a.parent){var e=new h2(a.children);e.parent=a;a.children=[e,b];a=e;}else{a.size-=b.size;a.height-=b.height;var d=lc(a.parent.children,a);a.parent.children.splice(d+1,0,b);}b.parent=a.parent;}while(a.children.length>10);a.parent.maybeSpill();},iterN:function(d,e,f){for(var c=0;c<this.children.length;++c){var g=this.children[c],a=g.chunkSize();if(d<a){var b=Math.min(e,a-d);if(g.iterN(d,b,f)){return true;}if((e-=b)==0){break;}d=0;}else{d-=a;}}}};var iY=0;var ld=km.Doc=function(b,c,d){if(!(this instanceof ld)){return new ld(b,c,d);}if(d==null){d=0;}h2.call(this,[new hM([new gW("",null)])]);this.first=d;this.scrollTop=this.scrollLeft=0;this.cantEdit=false;this.cleanGeneration=1;this.frontier=d;var a=jy(d,0);this.sel=gt(a);this.history=new f4(null);this.id=++iY;this.modeOption=c;if(typeof b=="string"){b=lZ(b);}hY(this,{from:a,to:a,text:b});lr(this,gt(a),jq);};ld.prototype=jf(h2.prototype,{constructor:ld,iter:function(a,b,c){if(c){this.iterN(a-this.first,b-a,c);}else{this.iterN(this.first,this.first+this.size,a);}},insert:function(c,b){var d=0;for(var a=0;a<b.length;++a){d+=b[a].height;}this.insertInner(c-this.first,b,d);},remove:function(b,a){this.removeInner(b-this.first,a);},getValue:function(a){var b=lV(this,this.first,this.first+this.size);if(a===false){return b;}return b.join(a||"\n");},setValue:ig(function(b){var a=jy(this.first,0),c=this.first+this.size-1;fS(this,{from:a,to:jy(c,hn(this,c).text.length),text:lZ(b),origin:"setValue"},true);lr(this,gt(a));}),replaceRange:function(c,a,b,d){a=gd(this,a);b=b?gd(this,b):a;lX(this,c,a,b,d);},getRange:function(a,b,c){var d=fY(this,gd(this,a),gd(this,b));if(c===false){return d;}return d.join(c||"\n");},getLine:function(a){var b=this.getLineHandle(a);return b&&b.text;},getLineHandle:function(a){if(kS(this,a)){return hn(this,a);}},getLineNumber:function(a){return lE(a);},getLineHandleVisualStart:function(a){if(typeof a=="number"){a=hn(this,a);}return hS(a);},lineCount:function(){return this.size;},firstLine:function(){return this.first;},lastLine:function(){return this.first+this.size-1;},clipPos:function(a){return gd(this,a);},getCursor:function(a){var c=this.sel.primary(),b;if(a==null||a=="head"){b=c.head;}else{if(a=="anchor"){b=c.anchor;}else{if(a=="end"||a=="to"||a===false){b=c.to();}else{b=c.from();}}}return b;},listSelections:function(){return this.sel.ranges;},somethingSelected:function(){return this.sel.somethingSelected();},setCursor:ig(function(c,a,b){ku(this,gd(this,typeof c=="number"?jy(c,a||0):c),null,b);}),setSelection:ig(function(b,a,c){ku(this,gd(this,b),gd(this,a||b),c);}),extendSelection:ig(function(a,c,b){f3(this,gd(this,a),c&&gd(this,c),b);}),extendSelections:ig(function(a,b){kZ(this,je(this,a,b));}),extendSelectionsBy:ig(function(a,b){kZ(this,lv(this.sel.ranges,a),b);}),setSelections:ig(function(d,e,b){if(!d.length){return;}for(var a=0,c=[];a<d.length;a++){c[a]=new jh(gd(this,d[a].anchor),gd(this,d[a].head));}if(e==null){e=Math.min(d.length-1,this.sel.primIndex);}lr(this,iH(c,e),b);}),addSelection:ig(function(b,a,c){var d=this.sel.ranges.slice(0);d.push(new jh(gd(this,b),gd(this,a||b)));lr(this,iH(d,d.length-1),c);}),getSelection:function(e){var c=this.sel.ranges,d;for(var b=0;b<c.length;b++){var a=fY(this,c[b].from(),c[b].to());d=d?d.concat(a):a;}if(e===false){return d;}else{return d.join(e||"\n");}},getSelections:function(e){var a=[],d=this.sel.ranges;for(var c=0;c<d.length;c++){var b=fY(this,d[c].from(),d[c].to());if(e!==false){b=b.join(e||"\n");}a[c]=b;}return a;},replaceSelection:function(b,e,d){var a=[];for(var c=0;c<this.sel.ranges.length;c++){a[c]=b;}this.replaceSelections(a,e,d||"+input");},replaceSelections:ig(function(g,e,b){var h=[],f=this.sel;for(var a=0;a<f.ranges.length;a++){var c=f.ranges[a];h[a]={from:c.from(),to:c.to(),text:lZ(g[a]),origin:b};}var d=e&&e!="end"&&lB(this,h,e);for(var a=h.length-1;a>=0;a--){fS(this,h[a]);}if(d){hD(this,d);}else{if(this.cm){gg(this.cm);}}}),undo:ig(function(){kX(this,"undo");}),redo:ig(function(){kX(this,"redo");}),undoSelection:ig(function(){kX(this,"undo",true);}),redoSelection:ig(function(){kX(this,"redo",true);}),setExtending:function(a){this.extend=a;},getExtending:function(){return this.extend;},historySize:function(){var a=this.history,d=0,b=0;for(var c=0;c<a.done.length;c++){if(!a.done[c].ranges){++d;}}for(var c=0;c<a.undone.length;c++){if(!a.undone[c].ranges){++b;}}return{undo:d,redo:b};},clearHistory:function(){this.history=new f4(this.history.maxGeneration);},markClean:function(){this.cleanGeneration=this.changeGeneration(true);},changeGeneration:function(a){if(a){this.history.lastOp=this.history.lastOrigin=null;}return this.history.generation;},isClean:function(a){return this.history.generation==(a||this.cleanGeneration);},getHistory:function(){return{done:lA(this.history.done),undone:lA(this.history.undone)};},setHistory:function(a){var b=this.history=new f4(this.history.maxGeneration);b.done=lA(a.done.slice(0),null,true);b.undone=lA(a.undone.slice(0),null,true);},markText:function(a,b,c){return gI(this,gd(this,a),gd(this,b),c,"range");},setBookmark:function(a,c){var b={replacedWith:c&&(c.nodeType==null?c.widget:c),insertLeft:c&&c.insertLeft,clearWhenEmpty:false,shared:c&&c.shared};a=gd(this,a);return gI(this,a,a,b,"bookmark");},findMarksAt:function(e){e=gd(this,e);var a=[],c=hn(this,e.line).markedSpans;if(c){for(var d=0;d<c.length;++d){var b=c[d];if((b.from==null||b.from<=e.ch)&&(b.to==null||b.to>=e.ch)){a.push(b.marker.parent||b.marker);}}}return a;},findMarks:function(e,a,d){e=gd(this,e);a=gd(this,a);var c=[],b=e.line;this.iter(e.line,a.line+1,function(i){var g=i.markedSpans;if(g){for(var h=0;h<g.length;h++){var f=g[h];if(!(b==e.line&&e.ch>f.to||f.from==null&&b!=e.line||b==a.line&&f.from>a.ch)&&(!d||d(f.marker))){c.push(f.marker.parent||f.marker);}}}++b;});return c;},getAllMarks:function(){var a=[];this.iter(function(c){var d=c.markedSpans;if(d){for(var b=0;b<d.length;++b){if(d[b].from!=null){a.push(d[b].marker);}}}});return a;},posFromIndex:function(b){var c,a=this.first;this.iter(function(d){var e=d.text.length+1;if(e>b){c=b;return true;}b-=e;++a;});return gd(this,jy(a,c));},indexFromPos:function(a){a=gd(this,a);var b=a.ch;if(a.line<this.first||a.ch<0){return 0;}this.iter(this.first,a.line,function(c){b+=c.text.length+1;});return b;},copy:function(b){var a=new ld(lV(this,this.first,this.first+this.size),this.modeOption,this.first);a.scrollTop=this.scrollTop;a.scrollLeft=this.scrollLeft;a.sel=this.sel;a.extend=false;if(b){a.history.undoDepth=this.history.undoDepth;a.setHistory(this.getHistory());}return a;},linkedDoc:function(d){if(!d){d={};}var a=this.first,b=this.first+this.size;if(d.from!=null&&d.from>a){a=d.from;}if(d.to!=null&&d.to<b){b=d.to;}var c=new ld(lV(this,a,b),d.mode||this.modeOption,a);if(d.sharedHist){c.history=this.history;}(this.linked||(this.linked=[])).push({doc:c,sharedHist:d.sharedHist});c.linked=[{doc:this,isParent:true,sharedHist:d.sharedHist}];hv(c,gv(this));return c;},unlinkDoc:function(c){if(c instanceof km){c=c.doc;}if(this.linked){for(var b=0;b<this.linked.length;++b){var a=this.linked[b];if(a.doc!=c){continue;}this.linked.splice(b,1);c.unlinkDoc(this);j3(gv(this));break;}}if(c.history==this.history){var d=[c.id];iO(c,function(e){d.push(e.id);},true);c.history=new f4(null);c.history.done=lA(this.history.done,d);c.history.undone=lA(this.history.undone,d);}},iterLinkedDocs:function(a){iO(this,a);},getMode:function(){return this.mode;},getEditor:function(){return this.cm;}});ld.prototype.eachLine=ld.prototype.iter;var i7="iter insert remove copy getEditor".split(" ");for(var jk in ld.prototype){if(ld.prototype.hasOwnProperty(jk)&&lc(i7,jk)<0){km.prototype[jk]=(function(a){return function(){return a.apply(this.doc,arguments);};})(ld.prototype[jk]);}}jW(ld);function iO(a,b,c){function d(e,g,i){if(e.linked){for(var h=0;h<e.linked.length;++h){var j=e.linked[h];if(j.doc==g){continue;}var f=i&&j.sharedHist;if(c&&!f){continue;}b(j.doc,f);d(j.doc,e,f);}}}d(a,null,true);}function iF(b,a){if(a.cm){throw new Error("This document is already in use.");}b.doc=a;a.cm=b;jw(b);kl(b);if(!b.options.lineWrapping){iZ(b);}b.options.mode=a.modeOption;lx(b);}function hn(a,e){e-=a.first;if(e<0||e>=a.size){throw new Error("There is no line "+(e+a.first)+" in the document.");}for(var d=a;!d.lines;){for(var c=0;;++c){var f=d.children[c],b=f.chunkSize();if(e<b){d=f;break;}e-=b;}}return d.lines[e];}function fY(b,e,d){var c=[],a=e.line;b.iter(e.line,d.line+1,function(g){var f=g.text;if(a==d.line){f=f.slice(0,d.ch);}if(a==e.line){f=f.slice(e.ch);}c.push(f);++a;});return c;}function lV(c,a,b){var d=[];c.iter(a,b,function(e){d.push(e.text);});return d;}function gZ(c,d){var b=d-c.height;if(b){for(var a=c;a;a=a.parent){a.height+=b;}}}function lE(d){if(d.parent==null){return null;}var e=d.parent,a=lc(e.lines,d);for(var c=e.parent;c;e=c,c=c.parent){for(var b=0;;++b){if(c.children[b]==e){break;}a+=c.children[b].chunkSize();}}return a+e.first;}function jv(b,g){var e=b.first;outer:do{for(var a=0;a<b.children.length;++a){var f=b.children[a],h=f.height;if(g<h){b=f;continue outer;}g-=h;e+=f.chunkSize();}return e;}while(!b.lines);for(var a=0;a<b.lines.length;++a){var c=b.lines[a],d=c.height;if(g<d){break;}g-=d;}return e+a;}function lG(b){b=hS(b);var g=0,c=b.parent;for(var a=0;a<c.lines.length;++a){var d=c.lines[a];if(d==b){break;}else{g+=d.height;}}for(var f=c.parent;f;c=f,f=c.parent){for(var a=0;a<f.children.length;++a){var e=f.children[a];if(e==c){break;}else{g+=e.height;}}}return g;}function ji(a){var b=a.order;if(b==null){b=a.order=fR(a.text);}return b;}function f4(a){this.done=[];this.undone=[];this.undoDepth=Infinity;this.lastModTime=this.lastSelTime=0;this.lastOp=null;this.lastOrigin=this.lastSelOrigin=null;this.generation=this.maxGeneration=a||1;}function hO(c,a){var b={from:lM(a.from),to:kr(a),text:fY(c,a.from,a.to)};li(c,b,a.from.line,a.to.line+1);iO(c,function(d){li(d,b,a.from.line,a.to.line+1);},true);return b;}function gl(a){while(a.length){var b=gf(a);if(b.ranges){a.pop();}else{break;}}}function gx(a,b){if(b){gl(a.done);return gf(a.done);}else{if(a.done.length&&!gf(a.done).ranges){return gf(a.done);}else{if(a.done.length>1&&!a.done[a.done.length-2].ranges){a.done.pop();return gf(a.done);}}}}function ga(e,g,b,h){var i=e.history;i.undone.length=0;var a=+new Date,d;if((i.lastOp==h||i.lastOrigin==g.origin&&g.origin&&((g.origin.charAt(0)=="+"&&e.cm&&i.lastModTime>a-e.cm.options.historyEventDelay)||g.origin.charAt(0)=="*"))&&(d=gx(i,i.lastOp==h))){var c=gf(d.changes);if(lT(g.from,g.to)==0&&lT(g.from,c.to)==0){c.to=kr(g);}else{d.changes.push(hO(e,g));}}else{var f=gf(i.done);if(!f||!f.ranges){kH(e.sel,i.done);}d={changes:[hO(e,g)],generation:i.generation};i.done.push(d);while(i.done.length>i.undoDepth){i.done.shift();if(!i.done[0].ranges){i.done.shift();}}}i.done.push(b);i.generation=++i.maxGeneration;i.lastModTime=i.lastSelTime=a;i.lastOp=h;i.lastOrigin=i.lastSelOrigin=g.origin;if(!c){kK(e,"historyAdded");}}function jT(e,d,b,a){var c=d.charAt(0);return c=="*"||c=="+"&&b.ranges.length==a.ranges.length&&b.somethingSelected()==a.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500);}function gN(e,a,d,b){var f=e.history,c=b&&b.origin;if(d==f.lastOp||(c&&f.lastSelOrigin==c&&(f.lastModTime==f.lastSelTime&&f.lastOrigin==c||jT(e,c,gf(f.done),a)))){f.done[f.done.length-1]=a;}else{kH(a,f.done);}f.lastSelTime=+new Date;f.lastSelOrigin=c;f.lastOp=d;if(b&&b.clearRedo!==false){gl(f.undone);}}function kH(b,c){var a=gf(c);if(!(a&&a.ranges&&a.equals(b))){c.push(b);}}function li(c,e,f,a){var d=e["spans_"+c.id],b=0;c.iter(Math.max(c.first,f),Math.min(c.first+c.size,a),function(g){if(g.markedSpans){(d||(d=e["spans_"+c.id]={}))[b]=g.markedSpans;}++b;});}function kB(a){if(!a){return null;}for(var b=0,c;b<a.length;++b){if(a[b].marker.explicitlyCleared){if(!c){c=a.slice(0,b);}}else{if(c){c.push(a[b]);}}}return !c?a:c.length?c:null;}function k3(a,e){var b=e["spans_"+a.id];if(!b){return null;}for(var c=0,d=[];c<e.text.length;++c){d.push(kB(b[c]));}return d;}function lA(c,k,d){for(var h=0,a=[];h<c.length;++h){var l=c[h];if(l.ranges){a.push(d?fZ.prototype.deepCopy.call(l):l);continue;}var f=l.changes,e=[];a.push({changes:e});for(var i=0;i<f.length;++i){var g=f[i],j;e.push({from:g.from,to:g.to,text:g.text});if(k){for(var b in g){if(j=b.match(/^spans_(\d+)$/)){if(lc(k,Number(j[1]))>-1){gf(e)[b]=g[b];delete g[b];}}}}}}return a;}function kj(a,b,c,d){if(c<a.line){a.line+=d;}else{if(b<a.line){a.line=b;a.ch=0;}}}function hk(h,f,e,d){for(var i=0;i<h.length;++i){var b=h[i],g=true;if(b.ranges){if(!b.copied){b=h[i]=b.deepCopy();b.copied=true;}for(var a=0;a<b.ranges.length;a++){kj(b.ranges[a].anchor,f,e,d);kj(b.ranges[a].head,f,e,d);}continue;}for(var a=0;a<b.changes.length;++a){var c=b.changes[a];if(e<c.from.line){c.from=jy(c.from.line+d,c.from.ch);c.to=jy(c.to.line+d,c.to.ch);}else{if(f<=c.to.line){g=false;break;}}}if(!g){h.splice(0,i+1);i=0;}}}function hw(c,e){var a=e.from.line,b=e.to.line,d=e.text.length-(b-a)-1;hk(c.done,a,b,d);hk(c.undone,a,b,d);}var h7=km.e_preventDefault=function(a){if(a.preventDefault){a.preventDefault();}else{a.returnValue=false;}};var kY=km.e_stopPropagation=function(a){if(a.stopPropagation){a.stopPropagation();}else{a.cancelBubble=true;}};function lI(a){return a.defaultPrevented!=null?a.defaultPrevented:a.returnValue==false;}var jP=km.e_stop=function(a){h7(a);kY(a);};function ke(a){return a.target||a.srcElement;}function f9(a){var b=a.which;if(b==null){if(a.button&1){b=1;}else{if(a.button&2){b=3;}else{if(a.button&4){b=2;}}}}if(k0&&a.ctrlKey&&b==1){b=3;}return b;}var lk=km.on=function(a,c,b){if(a.addEventListener){a.addEventListener(c,b,false);}else{if(a.attachEvent){a.attachEvent("on"+c,b);}else{var e=a._handlers||(a._handlers={});var d=e[c]||(e[c]=[]);d.push(b);}}};var ix=km.off=function(e,b,a){if(e.removeEventListener){e.removeEventListener(b,a,false);}else{if(e.detachEvent){e.detachEvent("on"+b,a);}else{var d=e._handlers&&e._handlers[b];if(!d){return;}for(var c=0;c<d.length;++c){if(d[c]==a){d.splice(c,1);break;}}}}};var kK=km.signal=function(e,a){var d=e._handlers&&e._handlers[a];if(!d){return;}var c=Array.prototype.slice.call(arguments,2);for(var b=0;b<d.length;++b){d[b].apply(null,c);}};var kt,iU=0;function lD(e,f){var d=e._handlers&&e._handlers[f];if(!d){return;}var b=Array.prototype.slice.call(arguments,2);if(!kt){++iU;kt=[];setTimeout(gV,0);}function c(g){return function(){g.apply(null,b);};}for(var a=0;a<d.length;++a){kt.push(c(d[a]));}}function gV(){--iU;var b=kt;kt=null;for(var a=0;a<b.length;++a){b[a]();}}function ma(c,a,b){kK(c,b||a.type,c,a);return lI(a)||a.codemirrorIgnore;}function jC(c){var d=c._handlers&&c._handlers.cursorActivity;if(!d){return;}var a=c.curOp.cursorActivityHandlers||(c.curOp.cursorActivityHandlers=[]);for(var b=0;b<d.length;++b){if(lc(a,d[b])==-1){a.push(d[b]);}}}function hh(a,b){var c=a._handlers&&a._handlers[b];return c&&c.length>0;}function jW(a){a.prototype.on=function(c,b){lk(this,c,b);};a.prototype.off=function(c,b){ix(this,c,b);};}var kE=30;var kL=km.Pass={toString:function(){return"CodeMirror.Pass";}};var jq={scroll:false},ka={origin:"*mouse"},ks={origin:"+move"};function gB(){this.id=null;}gB.prototype.set=function(b,a){clearTimeout(this.id);this.id=setTimeout(a,b);};var ls=km.countColumn=function(a,c,g,f,b){if(c==null){c=a.search(/[^\s\u00a0]/);if(c==-1){c=a.length;}}for(var h=f||0,e=b||0;;){var d=a.indexOf("\t",h);if(d<0||d>=c){return e+(c-h);}e+=d-h;e+=g-(e%g);h=d+1;}};function jS(g,a,f){for(var e=0,b=0;;){var c=g.indexOf("\t",e);if(c==-1){c=g.length;}var d=c-e;if(c==g.length||b+d>=a){return e+Math.min(d,a-b);}b+=c-e;b+=f-(b%f);e=c+1;if(b>=a){return e;}}}var l1=[""];function i1(a){while(l1.length<=a){l1.push(gf(l1)+" ");}return l1[a];}function gf(a){return a[a.length-1];}var hj=function(a){a.select();};if(hK){hj=function(a){a.selectionStart=0;a.selectionEnd=a.value.length;};}else{if(hp){hj=function(a){try{a.select();}catch(b){}};}}function lc(a,c){for(var b=0;b<a.length;++b){if(a[b]==c){return b;}}return -1;}if([].indexOf){lc=function(a,b){return a.indexOf(b);};}function lv(a,b){var d=[];for(var c=0;c<a.length;c++){d[c]=b(a[c],c);}return d;}if([].map){lv=function(a,b){return a.map(b);};}function jf(a,d){var b;if(Object.create){b=Object.create(a);}else{var c=function(){};c.prototype=a;b=new c();}if(d){me(d,b);}return b;}function me(b,c,d){if(!c){c={};}for(var a in b){if(b.hasOwnProperty(a)&&(d!==false||!c.hasOwnProperty(a))){c[a]=b[a];}}return c;}function iI(a){var b=Array.prototype.slice.call(arguments,1);return function(){return a.apply(null,b);};}var fV=/[\u00df\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;var gj=km.isWordChar=function(a){return/\w/.test(a)||a>"\x80"&&(a.toUpperCase()!=a.toLowerCase()||fV.test(a));};function it(b,a){if(!a){return gj(b);}if(a.source.indexOf("\\w")>-1&&gj(b)){return true;}return a.test(b);}function gq(b){for(var a in b){if(b.hasOwnProperty(a)&&b[a]){return false;}}return true;}var gA=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function iB(a){return a.charCodeAt(0)>=768&&gA.test(a);}function f0(d,f,a,b){var e=document.createElement(d);if(a){e.className=a;}if(b){e.style.cssText=b;}if(typeof f=="string"){e.appendChild(document.createTextNode(f));}else{if(f){for(var c=0;c<f.length;++c){e.appendChild(f[c]);}}}return e;}var jc;if(document.createRange){jc=function(b,a,d){var c=document.createRange();c.setEnd(b,d);c.setStart(b,a);return c;};}else{jc=function(b,a,d){var c=document.body.createTextRange();c.moveToElementText(b.parentNode);c.collapse(true);c.moveEnd("character",d);c.moveStart("character",a);return c;};}function i6(a){for(var b=a.childNodes.length;b>0;--b){a.removeChild(a.firstChild);}return a;}function lw(b,a){return i6(b).appendChild(a);}function gP(b,a){if(b.contains){return b.contains(a);}while(a=a.parentNode){if(a==b){return true;}}}function hf(){return document.activeElement;}if(gz){hf=function(){try{return document.activeElement;}catch(a){return document.body;}};}function jO(a){return new RegExp("\\b"+a+"\\b\\s*");}function i0(b,c){var a=jO(c);if(a.test(b.className)){b.className=b.className.replace(a,"");}}function gm(a,b){if(!jO(b).test(a.className)){a.className+=" "+b;}}function f5(b,d){var c=b.split(" ");for(var a=0;a<c.length;a++){if(c[a]&&!jO(c[a]).test(d)){d+=" "+c[a];}}return d;}function kP(a){if(!document.body.getElementsByClassName){return;}var b=document.body.getElementsByClassName("CodeMirror");for(var c=0;c<b.length;c++){var d=b[c].CodeMirror;if(d){a(d);}}}var ij=false;function fP(){if(ij){return;}gi();ij=true;}function gi(){var a;lk(window,"resize",function(){if(a==null){a=setTimeout(function(){a=null;ju=null;kP(l8);},100);}});lk(window,"blur",function(){kP(l7);});}var gy=function(){if(kN){return false;}var a=f0("div");return"draggable" in a||"dragDrop" in a;}();var ju;function iL(b){if(ju!=null){return ju;}var a=f0("div",null,null,"width: 50px; height: 50px; overflow-x: scroll");lw(b,a);if(a.offsetWidth){ju=a.offsetHeight-a.clientHeight;}return ju||0;}var gb;function kw(b){if(gb==null){var a=f0("span","\u200b");lw(b,f0("span",[a,document.createTextNode("x")]));if(b.firstChild.offsetHeight!=0){gb=a.offsetWidth<=1&&a.offsetHeight>2&&!l2;}}if(gb){return f0("span","\u200b");}else{return f0("span","\u00a0",null,"display: inline-block; width: 1px; margin-right: -1px");}}var gc;function lC(a){if(gc!=null){return gc;}var d=lw(a,document.createTextNode("A\u062eA"));var b=jc(d,0,1).getBoundingClientRect();if(b.left==b.right){return false;}var c=jc(d,1,2).getBoundingClientRect();return gc=(c.right-b.right<3);}var lZ=km.splitLines="\n\nb".split(/\n/).length!=3?function(f){var e=0,d=[],g=f.length;while(e<=g){var a=f.indexOf("\n",e);if(a==-1){a=f.length;}var b=f.slice(e,f.charAt(a-1)=="\r"?a-1:a);var c=b.indexOf("\r");if(c!=-1){d.push(b.slice(0,c));e+=c+1;}else{d.push(b);e=a+1;}}return d;}:function(a){return a.split(/\r\n?|\n/);};var kg=window.getSelection?function(a){try{return a.selectionStart!=a.selectionEnd;}catch(b){return false;}}:function(a){try{var c=a.ownerDocument.selection.createRange();}catch(b){}if(!c||c.parentElement()!=a){return false;}return c.compareEndPoints("StartToEnd",c)!=0;};var jG=(function(){var a=f0("div");if("oncopy" in a){return true;}a.setAttribute("oncopy","return;");return typeof a.oncopy=="function";})();var hl={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",107:"=",109:"-",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};km.keyNames=hl;(function(){for(var a=0;a<10;a++){hl[a+48]=hl[a+96]=String(a);}for(var a=65;a<=90;a++){hl[a]=String.fromCharCode(a);}for(var a=1;a<=12;a++){hl[a+111]=hl[a+63235]="F"+a;}})();function iX(d,e,f,g){if(!d){return g(e,f,"ltr");}var a=false;for(var b=0;b<d.length;++b){var c=d[b];if(c.from<f&&c.to>e||e==f&&c.to==e){g(Math.max(c.from,e),Math.min(c.to,f),c.level==1?"rtl":"ltr");a=true;}}if(!a){g(e,f,"ltr");}}function hJ(a){return a.level%2?a.to:a.from;}function gJ(a){return a.level%2?a.from:a.to;}function ia(a){var b=ji(a);return b?hJ(b[0]):0;}function kv(a){var b=ji(a);if(!b){return a.text.length;}return gJ(gf(b));}function kd(c,f){var b=hn(c.doc,f);var e=hS(b);if(e!=b){f=lE(e);}var d=ji(e);var a=!d?0:d[0].level%2?kv(e):ia(e);return jy(f,a);}function hd(b,e){var c,a=hn(b.doc,e);while(c=jB(a)){a=c.find(1,true).line;e=null;}var d=ji(a);var f=!d?a.text.length:d[0].level%2?ia(a):kv(a);return jy(e==null?lE(a):e,f);}function lm(c,b,d){var a=c[0].level;if(b==a){return true;}if(d==a){return false;}return b<d;}var hI;function mh(d,e){hI=null;for(var c=0,b;c<d.length;++c){var a=d[c];if(a.from<e&&a.to>e){return c;}if((a.from==e||a.to==e)){if(b==null){b=c;}else{if(lm(d,a.level,d[b].level)){if(a.from!=a.to){hI=b;}return c;}else{if(a.from!=a.to){hI=c;}return b;}}}}return b;}function ho(d,a,c,b){if(!b){return a+c;}do{a+=c;}while(a>0&&iB(d.text.charAt(a)));return a;}function h6(d,e,b,a){var h=ji(d);if(!h){return lu(d,e,b,a);}var f=mh(h,e),c=h[f];var g=ho(d,e,c.level%2?-b:b,a);for(;;){if(g>c.from&&g<c.to){return g;}if(g==c.from||g==c.to){if(mh(h,g)==f){return g;}c=h[f+=b];return(b>0)==c.level%2?c.to:c.from;}else{c=h[f+=b];if(!c){return null;}if((b>0)==c.level%2){g=ho(d,c.to,-1,a);}else{g=ho(d,c.from,1,a);}}}}function lu(d,e,c,b){var a=e+c;if(b){while(a>0&&iB(d.text.charAt(a))){a+=c;}}return a<0||a>d.text.length?null:a;}var fR=(function(){var f="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN";var h="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm";function i(k){if(k<=247){return f.charAt(k);}else{if(1424<=k&&k<=1524){return"R";}else{if(1536<=k&&k<=1773){return h.charAt(k-1536);}else{if(1774<=k&&k<=2220){return"r";}else{if(8192<=k&&k<=8203){return"w";}else{if(k==8204){return"b";}else{return"L";}}}}}}}var b=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;var c=/[stwN]/,j=/[LRr]/,a=/[Lb1n]/,g=/[1n]/;var d="L";function e(k,l,m){this.level=k;this.from=l;this.to=m;}return function(l){if(!b.test(l)){return false;}var x=l.length,p=[];for(var y=0,t;y<x;++y){p.push(t=i(l.charCodeAt(y)));}for(var y=0,m=d;y<x;++y){var t=p[y];if(t=="m"){p[y]=m;}else{m=t;}}for(var y=0,v=d;y<x;++y){var t=p[y];if(t=="1"&&v=="r"){p[y]="n";}else{if(j.test(t)){v=t;if(t=="r"){p[y]="R";}}}}for(var y=1,m=p[0];y<x-1;++y){var t=p[y];if(t=="+"&&m=="1"&&p[y+1]=="1"){p[y]="1";}else{if(t==","&&m==p[y+1]&&(m=="1"||m=="n")){p[y]=m;}}m=t;}for(var y=0;y<x;++y){var t=p[y];if(t==","){p[y]="N";}else{if(t=="%"){for(var s=y+1;s<x&&p[s]=="%";++s){}var w=(y&&p[y-1]=="!")||(s<x&&p[s]=="1")?"1":"N";for(var A=y;A<s;++A){p[A]=w;}y=s-1;}}}for(var y=0,v=d;y<x;++y){var t=p[y];if(v=="L"&&t=="1"){p[y]="L";}else{if(j.test(t)){v=t;}}}for(var y=0;y<x;++y){if(c.test(p[y])){for(var s=y+1;s<x&&c.test(p[s]);++s){}var o=(y?p[y-1]:d)=="L";var u=(s<x?p[s]:d)=="L";var w=o||u?"L":"R";for(var A=y;A<s;++A){p[A]=w;}y=s-1;}}var z=[],k;for(var y=0;y<x;){if(a.test(p[y])){var r=y;for(++y;y<x&&a.test(p[y]);++y){}z.push(new e(0,r,y));}else{var q=y,n=z.length;for(++y;y<x&&p[y]!="L";++y){}for(var A=q;A<y;){if(g.test(p[A])){if(q<A){z.splice(n,0,new e(1,q,A));}var B=A;for(++A;A<y&&g.test(p[A]);++A){}z.splice(n,0,new e(2,B,A));q=A;}else{++A;}}if(q<y){z.splice(n,0,new e(1,q,y));}}}if(z[0].level==1&&(k=l.match(/^\s+/))){z[0].from=k[0].length;z.unshift(new e(0,0,k[0].length));}if(gf(z).level==1&&(k=l.match(/\s+$/))){gf(z).to-=k[0].length;z.push(new e(0,x-k[0].length,x));}if(z[0].level!=gf(z).level){z.push(new e(z[0].level,x,x));}return z;};})();km.version="4.2.0";return km;});(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"));}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a);}else{a(CodeMirror);}}})(function(b){var h="()[]{}''\"\"";var a="[]{}";var g=/\s/;var e=b.Pos;b.defineOption("autoCloseBrackets",false,function(i,n,j){if(j!=b.Init&&j){i.removeKeyMap("autoCloseBrackets");}if(!n){return;}var l=h,k=a;if(typeof n=="string"){l=n;}else{if(typeof n=="object"){if(n.pairs!=null){l=n.pairs;}if(n.explode!=null){k=n.explode;}}}var m=f(l);if(k){m.Enter=c(k);}i.addKeyMap(m);});function d(i,k){var j=i.getRange(e(k.line,k.ch-1),e(k.line,k.ch+1));return j.length==2?j:null;}function f(l){var m={name:"autoCloseBrackets",Backspace:function(n){if(n.getOption("disableInput")){return b.Pass;}var o=n.listSelections();for(var p=0;p<o.length;p++){if(!o[p].empty()){return b.Pass;}var q=d(n,o[p].head);if(!q||l.indexOf(q)%2!=0){return b.Pass;}}for(var p=o.length-1;p>=0;p--){var r=o[p].head;n.replaceRange("",e(r.line,r.ch-1),e(r.line,r.ch+1));}}};var k="";for(var j=0;j<l.length;j+=2){(function(n,i){if(n!=i){k+=i;}m["'"+n+"'"]=function(o){if(o.getOption("disableInput")){return b.Pass;}var p=o.listSelections(),u,t;for(var s=0;s<p.length;s++){var q=p[s],v=q.head,r;if(n=="'"&&o.getTokenTypeAt(v)=="comment"){return b.Pass;}var t=o.getRange(v,e(v.line,v.ch+1));if(!q.empty()){r="surround";}else{if(n==i&&t==i){if(o.getRange(v,e(v.line,v.ch+3))==n+n+n){r="skipThree";}else{r="skip";}}else{if(n==i&&v.ch>1&&o.getRange(e(v.line,v.ch-2),v)==n+n&&(v.ch<=2||o.getRange(e(v.line,v.ch-3),e(v.line,v.ch-2))!=n)){r="addFour";}else{if(n==i&&b.isWordChar(t)){return b.Pass;}else{if(o.getLine(v.line).length==v.ch||k.indexOf(t)>=0||g.test(t)){r="both";}else{return b.Pass;}}}}}if(!u){u=r;}else{if(u!=r){return b.Pass;}}}o.operation(function(){if(u=="skip"){o.execCommand("goCharRight");}else{if(u=="skipThree"){for(var x=0;x<3;x++){o.execCommand("goCharRight");}}else{if(u=="surround"){var w=o.getSelections();for(var x=0;x<w.length;x++){w[x]=n+w[x]+i;}o.replaceSelections(w,"around");}else{if(u=="both"){o.replaceSelection(n+i,null);o.execCommand("goCharLeft");}else{if(u=="addFour"){o.replaceSelection(n+n+n+n,"before");o.execCommand("goCharRight");}}}}}});};if(n!=i){m["'"+i+"'"]=function(o){var p=o.listSelections();for(var r=0;r<p.length;r++){var q=p[r];if(!q.empty()||o.getRange(q.head,e(q.head.line,q.head.ch+1))!=i){return b.Pass;}}o.execCommand("goCharRight");};}})(l.charAt(j),l.charAt(j+1));}return m;}function c(i){return function(j){if(j.getOption("disableInput")){return b.Pass;}var k=j.listSelections();for(var l=0;l<k.length;l++){if(!k[l].empty()){return b.Pass;}var m=d(j,k[l].head);if(!m||i.indexOf(m)%2!=0){return b.Pass;}}j.operation(function(){j.replaceSelection("\n\n",null);j.execCommand("goCharLeft");k=j.listSelections();for(var o=0;o<k.length;o++){var n=k[o].head.line;j.indentLine(n,null,true);j.indentLine(n+1,null,true);}});};}});(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"),require("../fold/xml-fold"));}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror","../fold/xml-fold"],a);}else{a(CodeMirror);}}})(function(b){b.defineOption("autoCloseTags",false,function(h,k,i){if(i!=b.Init&&i){h.removeKeyMap("autoCloseTags");}if(!k){return;}var j={name:"autoCloseTags"};if(typeof k!="object"||k.whenClosing){j["'/'"]=function(l){return e(l);};}if(typeof k!="object"||k.whenOpening){j["'>'"]=function(l){return a(l);};}h.addKeyMap(j);});var d=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"];var c=["applet","blockquote","body","button","div","dl","fieldset","form","frameset","h1","h2","h3","h4","h5","h6","head","html","iframe","layer","legend","object","ol","p","select","table","ul"];function a(w){if(w.getOption("disableInput")){return b.Pass;}var j=w.listSelections(),q=[];for(var r=0;r<j.length;r++){if(!j[r].empty()){return b.Pass;}var v=j[r].head,x=w.getTokenAt(v);var y=b.innerMode(w.getMode(),x.state),h=y.state;if(y.mode.name!="xml"||!h.tagName){return b.Pass;}var k=w.getOption("autoCloseTags"),s=y.mode.configuration=="html";var m=(typeof k=="object"&&k.dontCloseTags)||(s&&d);var u=(typeof k=="object"&&k.indentTags)||(s&&c);var p=h.tagName;if(x.end>v.ch){p=p.slice(0,p.length-x.end+v.ch);}var t=p.toLowerCase();if(!p||x.type=="string"&&(x.end!=v.ch||!/[\"\']/.test(x.string.charAt(x.string.length-1))||x.string.length==1)||x.type=="tag"&&h.type=="closeTag"||x.string.indexOf("/")==(x.string.length-1)||m&&g(m,t)>-1||f(w,p,v,h,true)){return b.Pass;}var o=u&&g(u,t)>-1;q[r]={indent:o,text:">"+(o?"\n\n":"")+"</"+p+">",newPos:o?b.Pos(v.line+1,0):b.Pos(v.line,v.ch+1)};}for(var r=j.length-1;r>=0;r--){var n=q[r];w.replaceRange(n.text,j[r].head,j[r].anchor,"+insert");var l=w.listSelections().slice(0);l[r]={head:n.newPos,anchor:n.newPos};w.setSelections(l);if(n.indent){w.indentLine(n.newPos.line,null,true);w.indentLine(n.newPos.line+1,null,true);}}}function e(h){if(h.getOption("disableInput")){return b.Pass;}var j=h.listSelections(),n=[];for(var m=0;m<j.length;m++){if(!j[m].empty()){return b.Pass;}var p=j[m].head,l=h.getTokenAt(p);var k=b.innerMode(h.getMode(),l.state),o=k.state;if(l.type=="string"||l.string.charAt(0)!="<"||l.start!=p.ch-1||k.mode.name!="xml"||!o.context||!o.context.tagName||f(h,o.context.tagName,p,o)){return b.Pass;}n[m]="/"+o.context.tagName+">";}h.replaceSelections(n);}function g(l,h){if(l.indexOf){return l.indexOf(h);}for(var j=0,k=l.length;j<k;++j){if(l[j]==h){return j;}}return -1;}function f(q,j,p,h,s){if(!b.scanForClosingTag){return false;}var k=Math.min(q.lastLine()+1,p.line+500);var r=b.scanForClosingTag(q,p,null,k);if(!r||r.tag!=j){return false;}var l=h.context;for(var n=s?1:0;l&&l.tagName==j;l=l.prev){++n;}p=r.to;for(var m=1;m<n;m++){var o=b.scanForClosingTag(q,p,null,k);if(!o||o.tag!=j){return false;}p=o.to;}return true;}});(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"));}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a);}else{a(CodeMirror);}}})(function(a){a.defineMode("javascript",function(X,ah){var j=X.indentUnit;var x=ah.statementIndent;var aw=ah.jsonld;var w=ah.json||aw;var f=ah.typescript;var ao=function(){function aM(aO){return{type:aO,style:"keyword"};}var aH=aM("keyword a"),aF=aM("keyword b"),aE=aM("keyword c");var aG=aM("operator"),aK={type:"atom",style:"atom"};var aI={"if":aM("if"),"while":aH,"with":aH,"else":aF,"do":aF,"try":aF,"finally":aF,"return":aE,"break":aE,"continue":aE,"new":aE,"delete":aE,"throw":aE,"debugger":aE,"var":aM("var"),"const":aM("var"),let:aM("var"),"function":aM("function"),"catch":aM("catch"),"for":aM("for"),"switch":aM("switch"),"case":aM("case"),"default":aM("default"),"in":aG,"typeof":aG,"instanceof":aG,"true":aK,"false":aK,"null":aK,"undefined":aK,"NaN":aK,"Infinity":aK,"this":aM("this"),module:aM("module"),"class":aM("class"),"super":aM("atom"),yield:aE,"export":aM("export"),"import":aM("import"),"extends":aE};if(f){var aN={type:"variable",style:"variable-3"};var aJ={"interface":aM("interface"),"extends":aM("extends"),constructor:aM("constructor"),"public":aM("public"),"private":aM("private"),"protected":aM("protected"),"static":aM("static"),string:aN,number:aN,bool:aN,any:aN};for(var aL in aJ){aI[aL]=aJ[aL];}}return aI;}();var M=/[+\-*&%=<>!?|~^]/;var an=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function C(aH){var aF=false,aE,aG=false;while((aE=aH.next())!=null){if(!aF){if(aE=="/"&&!aG){return;}if(aE=="["){aG=true;}else{if(aG&&aE=="]"){aG=false;}}}aF=!aF&&aE=="\\";}}var P,D;function I(aG,aF,aE){P=aG;D=aE;return aF;}function R(aI,aG){var aE=aI.next();if(aE=='"'||aE=="'"){aG.tokenize=O(aE);return aG.tokenize(aI,aG);}else{if(aE=="."&&aI.match(/^\d+(?:[eE][+\-]?\d+)?/)){return I("number","number");}else{if(aE=="."&&aI.match("..")){return I("spread","meta");}else{if(/[\[\]{}\(\),;\:\.]/.test(aE)){return I(aE);}else{if(aE=="="&&aI.eat(">")){return I("=>","operator");}else{if(aE=="0"&&aI.eat(/x/i)){aI.eatWhile(/[\da-f]/i);return I("number","number");}else{if(/\d/.test(aE)){aI.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/);return I("number","number");}else{if(aE=="/"){if(aI.eat("*")){aG.tokenize=av;return av(aI,aG);}else{if(aI.eat("/")){aI.skipToEnd();return I("comment","comment");}else{if(aG.lastType=="operator"||aG.lastType=="keyword c"||aG.lastType=="sof"||/^[\[{}\(,;:]$/.test(aG.lastType)){C(aI);aI.eatWhile(/[gimy]/);return I("regexp","string-2");}else{aI.eatWhile(M);return I("operator","operator",aI.current());}}}}else{if(aE=="`"){aG.tokenize=ax;return ax(aI,aG);}else{if(aE=="#"){aI.skipToEnd();return I("error","error");}else{if(M.test(aE)){aI.eatWhile(M);return I("operator","operator",aI.current());}else{aI.eatWhile(/[\w\$_]/);var aH=aI.current(),aF=ao.propertyIsEnumerable(aH)&&ao[aH];return(aF&&aG.lastType!=".")?I(aF.type,aF.style,aH):I("variable","variable",aH);}}}}}}}}}}}}function O(aE){return function(aI,aG){var aH=false,aF;if(aw&&aI.peek()=="@"&&aI.match(an)){aG.tokenize=R;return I("jsonld-keyword","meta");}while((aF=aI.next())!=null){if(aF==aE&&!aH){break;}aH=!aH&&aF=="\\";}if(!aH){aG.tokenize=R;}return I("string","string");};}function av(aH,aG){var aE=false,aF;while(aF=aH.next()){if(aF=="/"&&aE){aG.tokenize=R;break;}aE=(aF=="*");}return I("comment","comment");}function ax(aH,aF){var aG=false,aE;while((aE=aH.next())!=null){if(!aG&&(aE=="`"||aE=="$"&&aH.eat("{"))){aF.tokenize=R;break;}aG=!aG&&aE=="\\";}return I("quasi","string-2",aH.current());}var k="([{}])";function ar(aK,aH){if(aH.fatArrowAt){aH.fatArrowAt=null;}var aG=aK.string.indexOf("=>",aK.start);if(aG<0){return;}var aJ=0,aF=false;for(var aL=aG-1;aL>=0;--aL){var aE=aK.string.charAt(aL);var aI=k.indexOf(aE);if(aI>=0&&aI<3){if(!aJ){++aL;break;}if(--aJ==0){break;}}else{if(aI>=3&&aI<6){++aJ;}else{if(/[$\w]/.test(aE)){aF=true;}else{if(aF&&!aJ){++aL;break;}}}}}if(aF&&!aJ){aH.fatArrowAt=aL;}}var b={atom:true,number:true,variable:true,string:true,regexp:true,"this":true,"jsonld-keyword":true};function G(aJ,aF,aE,aI,aG,aH){this.indented=aJ;this.column=aF;this.type=aE;this.prev=aG;this.info=aH;if(aI!=null){this.align=aI;}}function p(aH,aG){for(var aF=aH.localVars;aF;aF=aF.next){if(aF.name==aG){return true;}}for(var aE=aH.context;aE;aE=aE.prev){for(var aF=aE.vars;aF;aF=aF.next){if(aF.name==aG){return true;}}}}function e(aI,aF,aE,aH,aJ){var aK=aI.cc;A.state=aI;A.stream=aJ;A.marked=null,A.cc=aK;if(!aI.lexical.hasOwnProperty("align")){aI.lexical.align=true;}while(true){var aG=aK.length?aK.pop():w?al:aC;if(aG(aE,aH)){while(aK.length&&aK[aK.length-1].lex){aK.pop()();}if(A.marked){return A.marked;}if(aE=="variable"&&p(aI,aH)){return"variable-2";}return aF;}}}var A={state:null,column:null,marked:null,cc:null};function Y(){for(var aE=arguments.length-1;aE>=0;aE--){A.cc.push(arguments[aE]);}}function ac(){Y.apply(null,arguments);return true;}function aq(aF){function aE(aI){for(var aH=aI;aH;aH=aH.next){if(aH.name==aF){return true;}}return false;}var aG=A.state;if(aG.context){A.marked="def";if(aE(aG.localVars)){return;}aG.localVars={name:aF,next:aG.localVars};}else{if(aE(aG.globalVars)){return;}if(ah.globalVars){aG.globalVars={name:aF,next:aG.globalVars};}}}var n={name:"this",next:{name:"arguments"}};function t(){A.state.context={prev:A.state.context,vars:A.state.localVars};A.state.localVars=n;}function u(){A.state.localVars=A.state.context.vars;A.state.context=A.state.context.prev;}function aA(aF,aG){var aE=function(){var aI=A.state,aH=aI.indented;if(aI.lexical.type=="stat"){aH=aI.lexical.indented;}aI.lexical=new G(aH,A.stream.column(),aF,null,aI.lexical,aG);};aE.lex=true;return aE;}function g(){var aE=A.state;if(aE.lexical.prev){if(aE.lexical.type==")"){aE.indented=aE.lexical.indented;}aE.lexical=aE.lexical.prev;}}g.lex=true;function o(aE){function aF(aG){if(aG==aE){return ac();}else{if(aE==";"){return Y();}else{return ac(aF);}}}return aF;}function aC(aE,aF){if(aE=="var"){return ac(aA("vardef",aF.length),c,o(";"),g);}if(aE=="keyword a"){return ac(aA("form"),al,aC,g);}if(aE=="keyword b"){return ac(aA("form"),aC,g);}if(aE=="{"){return ac(aA("}"),v,g);}if(aE==";"){return ac();}if(aE=="if"){if(A.state.lexical.info=="else"&&A.state.cc[A.state.cc.length-1]==g){A.state.cc.pop()();}return ac(aA("form"),al,aC,g,d);}if(aE=="function"){return ac(J);}if(aE=="for"){return ac(aA("form"),r,aC,g);}if(aE=="variable"){return ac(aA("stat"),aD);}if(aE=="switch"){return ac(aA("form"),al,aA("}","switch"),o("{"),v,g,g);}if(aE=="case"){return ac(al,o(":"));}if(aE=="default"){return ac(o(":"));}if(aE=="catch"){return ac(aA("form"),t,o("("),ad,o(")"),aC,g,u);}if(aE=="module"){return ac(aA("form"),t,E,u,g);}if(aE=="class"){return ac(aA("form"),T,S,g);}if(aE=="export"){return ac(aA("form"),aB,g);}if(aE=="import"){return ac(aA("form"),ae,g);}return Y(aA("stat"),al,o(";"),g);}function al(aE){return W(aE,false);}function az(aE){return W(aE,true);}function W(aF,aH){if(A.state.fatArrowAt==A.stream.start){var aE=aH?K:U;if(aF=="("){return ac(t,aA(")"),ap(h,")"),g,o("=>"),aE,u);}else{if(aF=="variable"){return Y(t,h,o("=>"),aE,u);}}}var aG=aH?i:Z;if(b.hasOwnProperty(aF)){return ac(aG);}if(aF=="function"){return ac(J,aG);}if(aF=="keyword c"){return ac(aH?ai:ag);}if(aF=="("){return ac(aA(")"),ag,au,o(")"),g,aG);}if(aF=="operator"||aF=="spread"){return ac(aH?az:al);}if(aF=="["){return ac(aA("]"),l,g,aG);}if(aF=="{"){return at(q,"}",null,aG);}if(aF=="quasi"){return Y(N,aG);}return ac();}function ag(aE){if(aE.match(/[;\}\)\],]/)){return Y();}return Y(al);}function ai(aE){if(aE.match(/[;\}\)\],]/)){return Y();}return Y(az);}function Z(aE,aF){if(aE==","){return ac(al);}return i(aE,aF,false);}function i(aE,aG,aI){var aF=aI==false?Z:i;var aH=aI==false?al:az;if(aG=="=>"){return ac(t,aI?K:U,u);}if(aE=="operator"){if(/\+\+|--/.test(aG)){return ac(aF);}if(aG=="?"){return ac(al,o(":"),aH);}return ac(aH);}if(aE=="quasi"){return Y(N,aF);}if(aE==";"){return;}if(aE=="("){return at(az,")","call",aF);}if(aE=="."){return ac(aj,aF);}if(aE=="["){return ac(aA("]"),ag,o("]"),g,aF);}}function N(aE,aF){if(aE!="quasi"){return Y();}if(aF.slice(aF.length-2)!="${"){return ac(N);}return ac(al,m);}function m(aE){if(aE=="}"){A.marked="string-2";A.state.tokenize=ax;return ac(N);}}function U(aE){ar(A.stream,A.state);if(aE=="{"){return Y(aC);}return Y(al);}function K(aE){ar(A.stream,A.state);if(aE=="{"){return Y(aC);}return Y(az);}function aD(aE){if(aE==":"){return ac(g,aC);}return Y(Z,o(";"),g);}function aj(aE){if(aE=="variable"){A.marked="property";return ac();}}function q(aE,aF){if(aE=="variable"){A.marked="property";if(aF=="get"||aF=="set"){return ac(F);}}else{if(aE=="number"||aE=="string"){A.marked=aw?"property":(aE+" property");}else{if(aE=="["){return ac(al,o("]"),H);}}}if(b.hasOwnProperty(aE)){return ac(H);}}function F(aE){if(aE!="variable"){return Y(H);}A.marked="property";return ac(J);}function H(aE){if(aE==":"){return ac(az);}if(aE=="("){return Y(J);}}function ap(aG,aE){function aF(aI){if(aI==","){var aH=A.state.lexical;if(aH.info=="call"){aH.pos=(aH.pos||0)+1;}return ac(aG,aF);}if(aI==aE){return ac();}return ac(o(aE));}return function(aH){if(aH==aE){return ac();}return Y(aG,aF);};}function at(aH,aE,aG){for(var aF=3;aF<arguments.length;aF++){A.cc.push(arguments[aF]);}return ac(aA(aE,aG),ap(aH,aE),g);}function v(aE){if(aE=="}"){return ac();}return Y(aC,v);}function Q(aE){if(f&&aE==":"){return ac(ab);}}function ab(aE){if(aE=="variable"){A.marked="variable-3";return ac();}}function c(){return Y(h,Q,aa,V);}function h(aE,aF){if(aE=="variable"){aq(aF);return ac();}if(aE=="["){return at(h,"]");}if(aE=="{"){return at(ay,"}");}}function ay(aE,aF){if(aE=="variable"&&!A.stream.match(/^\s*:/,false)){aq(aF);return ac(aa);}if(aE=="variable"){A.marked="property";}return ac(o(":"),h,aa);}function aa(aE,aF){if(aF=="="){return ac(az);}}function V(aE){if(aE==","){return ac(c);}}function d(aE,aF){if(aE=="keyword b"&&aF=="else"){return ac(aA("form","else"),aC,g);}}function r(aE){if(aE=="("){return ac(aA(")"),B,o(")"),g);}}function B(aE){if(aE=="var"){return ac(c,o(";"),z);}if(aE==";"){return ac(z);}if(aE=="variable"){return ac(s);}return Y(al,o(";"),z);}function s(aE,aF){if(aF=="in"||aF=="of"){A.marked="keyword";return ac(al);}return ac(Z,z);}function z(aE,aF){if(aE==";"){return ac(y);}if(aF=="in"||aF=="of"){A.marked="keyword";return ac(al);}return Y(al,o(";"),y);}function y(aE){if(aE!=")"){ac(al);}}function J(aE,aF){if(aF=="*"){A.marked="keyword";return ac(J);}if(aE=="variable"){aq(aF);return ac(J);}if(aE=="("){return ac(t,aA(")"),ap(ad,")"),g,aC,u);}}function ad(aE){if(aE=="spread"){return ac(ad);}return Y(h,Q);}function T(aE,aF){if(aE=="variable"){aq(aF);return ac(L);}}function L(aE,aF){if(aF=="extends"){return ac(al);}}function S(aE){if(aE=="{"){return at(q,"}");}}function E(aE,aF){if(aE=="string"){return ac(aC);}if(aE=="variable"){aq(aF);return ac(af);}}function aB(aE,aF){if(aF=="*"){A.marked="keyword";return ac(af,o(";"));}if(aF=="default"){A.marked="keyword";return ac(al,o(";"));}return Y(aC);}function ae(aE){if(aE=="string"){return ac();}return Y(am,af);}function am(aE,aF){if(aE=="{"){return at(am,"}");}if(aE=="variable"){aq(aF);}return ac();}function af(aE,aF){if(aF=="from"){A.marked="keyword";return ac(al);}}function l(aE){if(aE=="]"){return ac();}return Y(az,ak);}function ak(aE){if(aE=="for"){return Y(au,o("]"));}if(aE==","){return ac(ap(az,"]"));}return Y(ap(az,"]"));}function au(aE){if(aE=="for"){return ac(r,au);}if(aE=="if"){return ac(al,au);}}return{startState:function(aF){var aE={tokenize:R,lastType:"sof",cc:[],lexical:new G((aF||0)-j,0,"block",false),localVars:ah.localVars,context:ah.localVars&&{vars:ah.localVars},indented:0};if(ah.globalVars&&typeof ah.globalVars=="object"){aE.globalVars=ah.globalVars;}return aE;},token:function(aG,aF){if(aG.sol()){if(!aF.lexical.hasOwnProperty("align")){aF.lexical.align=false;}aF.indented=aG.indentation();ar(aG,aF);}if(aF.tokenize!=av&&aG.eatSpace()){return null;}var aE=aF.tokenize(aG,aF);if(P=="comment"){return aE;}aF.lastType=P=="operator"&&(D=="++"||D=="--")?"incdec":P;return e(aF,aE,P,D,aG);},indent:function(aK,aE){if(aK.tokenize==av){return a.Pass;}if(aK.tokenize!=R){return 0;}var aJ=aE&&aE.charAt(0),aH=aK.lexical;if(!/^\s*else\b/.test(aE)){for(var aG=aK.cc.length-1;aG>=0;--aG){var aL=aK.cc[aG];if(aL==g){aH=aH.prev;}else{if(aL!=d){break;}}}}if(aH.type=="stat"&&aJ=="}"){aH=aH.prev;}if(x&&aH.type==")"&&aH.prev.type=="stat"){aH=aH.prev;}var aI=aH.type,aF=aJ==aI;if(aI=="vardef"){return aH.indented+(aK.lastType=="operator"||aK.lastType==","?aH.info+1:0);}else{if(aI=="form"&&aJ=="{"){return aH.indented;}else{if(aI=="form"){return aH.indented+j;}else{if(aI=="stat"){return aH.indented+(aK.lastType=="operator"||aK.lastType==","?x||j:0);}else{if(aH.info=="switch"&&!aF&&ah.doubleIndentSwitch!=false){return aH.indented+(/^(?:case|default)\b/.test(aE)?j:2*j);}else{if(aH.align){return aH.column+(aF?0:1);}else{return aH.indented+(aF?0:j);}}}}}}},electricChars:":{}",blockCommentStart:w?null:"/*",blockCommentEnd:w?null:"*/",lineComment:w?null:"//",fold:"brace",helperType:w?"json":"javascript",jsonldMode:aw,jsonMode:w};});a.registerHelper("wordChars","javascript",/[\\w$]/);a.defineMIME("text/javascript","javascript");a.defineMIME("text/ecmascript","javascript");a.defineMIME("application/javascript","javascript");a.defineMIME("application/ecmascript","javascript");a.defineMIME("application/json",{name:"javascript",json:true});a.defineMIME("application/x-json",{name:"javascript",json:true});a.defineMIME("application/ld+json",{name:"javascript",jsonld:true});a.defineMIME("text/typescript",{name:"javascript",typescript:true});a.defineMIME("application/typescript",{name:"javascript",typescript:true});});(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"));}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a);}else{a(CodeMirror);}}})(function(m){m.defineMode("css",function(N,B){if(!B.propertyKeywords){B=m.resolveMode("text/css");}var H=N.indentUnit,t=B.tokenHooks,M=B.mediaTypes||{},D=B.mediaFeatures||{},A=B.propertyKeywords||{},u=B.nonStandardPropertyKeywords||{},G=B.colorKeywords||{},J=B.valueKeywords||{},w=B.fontProperties||{},E=B.allowNested;var v,F;function O(R,S){v=S;return R;}function Q(U,T){var S=U.next();if(t[S]){var R=t[S](U,T);if(R!==false){return R;}}if(S=="@"){U.eatWhile(/[\w\\\-]/);return O("def",U.current());}else{if(S=="="||(S=="~"||S=="|")&&U.eat("=")){return O(null,"compare");}else{if(S=='"'||S=="'"){T.tokenize=C(S);return T.tokenize(U,T);}else{if(S=="#"){U.eatWhile(/[\w\\\-]/);return O("atom","hash");}else{if(S=="!"){U.match(/^\s*\w*/);return O("keyword","important");}else{if(/\d/.test(S)||S=="."&&U.eat(/\d/)){U.eatWhile(/[\w.%]/);return O("number","unit");}else{if(S==="-"){if(/[\d.]/.test(U.peek())){U.eatWhile(/[\w.%]/);return O("number","unit");}else{if(U.match(/^\w+-/)){return O("meta","meta");}}}else{if(/[,+>*\/]/.test(S)){return O(null,"select-op");}else{if(S=="."&&U.match(/^-?[_a-z][_a-z0-9-]*/i)){return O("qualifier","qualifier");}else{if(/[:;{}\[\]\(\)]/.test(S)){return O(null,S);}else{if(S=="u"&&U.match("rl(")){U.backUp(1);T.tokenize=P;return O("property","word");}else{if(/[\w\\\-]/.test(S)){U.eatWhile(/[\w\\\-]/);return O("property","word");}else{return O(null,null);}}}}}}}}}}}}}function C(R){return function(V,T){var U=false,S;while((S=V.next())!=null){if(S==R&&!U){if(R==")"){V.backUp(1);}break;}U=!U&&S=="\\";}if(S==R||!U&&R!=")"){T.tokenize=null;}return O("string","string");};}function P(S,R){S.next();if(!S.match(/\s*[\"\')]/,false)){R.tokenize=C(")");}else{R.tokenize=null;}return O(null,"(");}function I(S,R,T){this.type=S;this.indent=R;this.prev=T;}function y(S,T,R){S.context=new I(R,T.indentation()+H,S.context);return R;}function K(R){R.context=R.context.prev;return R.context.type;}function s(R,T,S){return x[S.context.type](R,T,S);}function L(S,U,T,V){for(var R=V||1;R>0;R--){T.context=T.context.prev;}return s(S,U,T);}function z(S){var R=S.current().toLowerCase();if(J.hasOwnProperty(R)){F="atom";}else{if(G.hasOwnProperty(R)){F="keyword";}else{F="variable";}}}var x={};x.top=function(R,T,S){if(R=="{"){return y(S,T,"block");}else{if(R=="}"&&S.context.prev){return K(S);}else{if(R=="@media"){return y(S,T,"media");}else{if(R=="@font-face"){return"font_face_before";}else{if(/^@(-(moz|ms|o|webkit)-)?keyframes$/.test(R)){return"keyframes";}else{if(R&&R.charAt(0)=="@"){return y(S,T,"at");}else{if(R=="hash"){F="builtin";}else{if(R=="word"){F="tag";}else{if(R=="variable-definition"){return"maybeprop";}else{if(R=="interpolation"){return y(S,T,"interpolation");}else{if(R==":"){return"pseudo";}else{if(E&&R=="("){return y(S,T,"parens");}}}}}}}}}}}}return S.context.type;};x.block=function(R,U,S){if(R=="word"){var T=U.current().toLowerCase();if(A.hasOwnProperty(T)){F="property";return"maybeprop";}else{if(u.hasOwnProperty(T)){F="string-2";return"maybeprop";}else{if(E){F=U.match(/^\s*:/,false)?"property":"tag";return"block";}else{F+=" error";return"maybeprop";}}}}else{if(R=="meta"){return"block";}else{if(!E&&(R=="hash"||R=="qualifier")){F="error";return"block";}else{return x.top(R,U,S);}}}};x.maybeprop=function(R,T,S){if(R==":"){return y(S,T,"prop");}return s(R,T,S);};x.prop=function(R,T,S){if(R==";"){return K(S);}if(R=="{"&&E){return y(S,T,"propBlock");}if(R=="}"||R=="{"){return L(R,T,S);}if(R=="("){return y(S,T,"parens");}if(R=="hash"&&!/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(T.current())){F+=" error";}else{if(R=="word"){z(T);}else{if(R=="interpolation"){return y(S,T,"interpolation");}}}return"prop";};x.propBlock=function(S,R,T){if(S=="}"){return K(T);}if(S=="word"){F="property";return"maybeprop";}return T.context.type;};x.parens=function(R,T,S){if(R=="{"||R=="}"){return L(R,T,S);}if(R==")"){return K(S);}if(R=="("){return y(S,T,"parens");}if(R=="word"){z(T);}return"parens";};x.pseudo=function(R,T,S){if(R=="word"){F="variable-3";return S.context.type;}return s(R,T,S);};x.media=function(R,U,S){if(R=="("){return y(S,U,"media_parens");}if(R=="}"){return L(R,U,S);}if(R=="{"){return K(S)&&y(S,U,E?"block":"top");}if(R=="word"){var T=U.current().toLowerCase();if(T=="only"||T=="not"||T=="and"){F="keyword";}else{if(M.hasOwnProperty(T)){F="attribute";}else{if(D.hasOwnProperty(T)){F="property";}else{F="error";}}}}return S.context.type;};x.media_parens=function(R,T,S){if(R==")"){return K(S);}if(R=="{"||R=="}"){return L(R,T,S,2);}return x.media(R,T,S);};x.font_face_before=function(R,T,S){if(R=="{"){return y(S,T,"font_face");}return s(R,T,S);};x.font_face=function(R,T,S){if(R=="}"){return K(S);}if(R=="word"){if(!w.hasOwnProperty(T.current().toLowerCase())){F="error";}else{F="property";}return"maybeprop";}return"font_face";};x.keyframes=function(R,T,S){if(R=="word"){F="variable";return"keyframes";}if(R=="{"){return y(S,T,"top");}return s(R,T,S);};x.at=function(R,T,S){if(R==";"){return K(S);}if(R=="{"||R=="}"){return L(R,T,S);}if(R=="word"){F="tag";}else{if(R=="hash"){F="builtin";}}return"at";};x.interpolation=function(R,T,S){if(R=="}"){return K(S);}if(R=="{"||R==";"){return L(R,T,S);}if(R!="variable"){F="error";}return"interpolation";};return{startState:function(R){return{tokenize:null,state:"top",context:new I("top",R||0,null)};},token:function(T,S){if(!S.tokenize&&T.eatSpace()){return null;}var R=(S.tokenize||Q)(T,S);if(R&&typeof R=="object"){v=R[1];R=R[0];}F=R;S.state=x[S.state](v,T,S);return F;},indent:function(V,T){var S=V.context,U=T&&T.charAt(0);var R=S.indent;if(S.type=="prop"&&(U=="}"||U==")")){S=S.prev;}if(S.prev&&(U=="}"&&(S.type=="block"||S.type=="top"||S.type=="interpolation"||S.type=="font_face")||U==")"&&(S.type=="parens"||S.type=="media_parens")||U=="{"&&(S.type=="at"||S.type=="media"))){R=S.indent-H;S=S.prev;}return R;},electricChars:"}",blockCommentStart:"/*",blockCommentEnd:"*/",fold:"brace"};});function f(u){var t={};for(var s=0;s<u.length;++s){t[u[s]]=true;}return t;}var a=["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"],p=f(a);var r=["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid"],i=f(r);var c=["align-content","align-items","align-self","alignment-adjust","alignment-baseline","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backface-visibility","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","baseline-shift","binding","bleed","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","flow-from","flow-into","font","font-feature-settings","font-family","font-kerning","font-language-override","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-weight","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-position","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","justify-content","left","letter-spacing","line-break","line-height","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marker-offset","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","max-height","max-width","min-height","min-width","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","play-during","position","presentation-level","punctuation-trim","quotes","region-break-after","region-break-before","region-break-inside","region-fragment","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotation","rotation-point","ruby-align","ruby-overhang","ruby-position","ruby-span","shape-image-threshold","shape-inside","shape-margin","shape-outside","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-outline","text-overflow","text-shadow","text-size-adjust","text-space-collapse","text-transform","text-underline-position","text-wrap","top","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","word-break","word-spacing","word-wrap","z-index","clip-path","clip-rule","mask","enable-background","filter","flood-color","flood-opacity","lighting-color","stop-color","stop-opacity","pointer-events","color-interpolation","color-interpolation-filters","color-rendering","fill","fill-opacity","fill-rule","image-rendering","marker","marker-end","marker-mid","marker-start","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-rendering","baseline-shift","dominant-baseline","glyph-orientation-horizontal","glyph-orientation-vertical","text-anchor","writing-mode"],h=f(c);var d=["scrollbar-arrow-color","scrollbar-base-color","scrollbar-dark-shadow-color","scrollbar-face-color","scrollbar-highlight-color","scrollbar-shadow-color","scrollbar-3d-light-color","scrollbar-track-color","shape-inside","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","zoom"],d=f(d);var b=["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],k=f(b);var j=["above","absolute","activeborder","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","auto","avoid","avoid-column","avoid-page","avoid-region","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","column","compact","condensed","contain","content","content-box","context-menu","continuous","copy","cover","crop","cross","crosshair","currentcolor","cursive","dashed","decimal","decimal-leading-zero","default","default-button","destination-atop","destination-in","destination-out","destination-over","devanagari","disc","discard","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ew-resize","expanded","extra-condensed","extra-expanded","fantasy","fast","fill","fixed","flat","footnotes","forwards","from","geometricPrecision","georgian","graytext","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-table","inset","inside","intrinsic","invert","italic","justify","kannada","katakana","katakana-iroha","keep-all","khmer","landscape","lao","large","larger","left","level","lighter","line-through","linear","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","malayalam","match","media-controls-background","media-current-time-display","media-fullscreen-button","media-mute-button","media-play-button","media-return-to-realtime-button","media-rewind-button","media-seek-back-button","media-seek-forward-button","media-slider","media-sliderthumb","media-time-remaining-display","media-volume-slider","media-volume-slider-container","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menulist-text","menulist-textfield","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","myanmar","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","nw-resize","nwse-resize","oblique","octal","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","persian","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","round","row-resize","rtl","run-in","running","s-resize","sans-serif","scroll","scrollbar","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","semi-condensed","semi-expanded","separate","serif","show","sidama","single","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","solid","somali","source-atop","source-in","source-out","source-over","space","square","square-button","start","static","status-bar","stretch","stroke","sub","subpixel-antialiased","super","sw-resize","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","transparent","ultra-condensed","ultra-expanded","underline","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","vertical","vertical-text","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","x-large","x-small","xor","xx-large","xx-small"],n=f(j);var o=["font-family","src","unicode-range","font-variant","font-feature-settings","font-stretch","font-weight","font-style"],e=f(o);var l=a.concat(r).concat(c).concat(d).concat(b).concat(j);m.registerHelper("hintWords","css",l);function q(v,u){var s=false,t;while((t=v.next())!=null){if(s&&t=="/"){u.tokenize=null;break;}s=(t=="*");}return["comment","comment"];}function g(t,s){if(t.skipTo("-->")){t.match("-->");s.tokenize=null;}else{t.skipToEnd();}return["comment","comment"];}m.defineMIME("text/css",{mediaTypes:p,mediaFeatures:i,propertyKeywords:h,nonStandardPropertyKeywords:d,colorKeywords:k,valueKeywords:n,fontProperties:e,tokenHooks:{"<":function(t,s){if(!t.match("!--")){return false;}s.tokenize=g;return g(t,s);},"/":function(t,s){if(!t.eat("*")){return false;}s.tokenize=q;return q(t,s);}},name:"css"});m.defineMIME("text/x-scss",{mediaTypes:p,mediaFeatures:i,propertyKeywords:h,nonStandardPropertyKeywords:d,colorKeywords:k,valueKeywords:n,fontProperties:e,allowNested:true,tokenHooks:{"/":function(t,s){if(t.eat("/")){t.skipToEnd();return["comment","comment"];}else{if(t.eat("*")){s.tokenize=q;return q(t,s);}else{return["operator","operator"];}}},":":function(s){if(s.match(/\s*{/)){return[null,"{"];}return false;},"$":function(s){s.match(/^[\w-]+/);if(s.match(/^\s*:/,false)){return["variable-2","variable-definition"];}return["variable-2","variable"];},"#":function(s){if(!s.eat("{")){return false;}return[null,"interpolation"];}},name:"css",helperType:"scss"});m.defineMIME("text/x-less",{mediaTypes:p,mediaFeatures:i,propertyKeywords:h,nonStandardPropertyKeywords:d,colorKeywords:k,valueKeywords:n,fontProperties:e,allowNested:true,tokenHooks:{"/":function(t,s){if(t.eat("/")){t.skipToEnd();return["comment","comment"];}else{if(t.eat("*")){s.tokenize=q;return q(t,s);}else{return["operator","operator"];}}},"@":function(s){if(s.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\b/,false)){return false;}s.eatWhile(/[\w\\\-]/);if(s.match(/^\s*:/,false)){return["variable-2","variable-definition"];}return["variable-2","variable"];},"&":function(){return["atom","atom"];}},name:"css",helperType:"less"});});(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"));}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a);}else{a(CodeMirror);}}})(function(a){a.defineMode("xml",function(y,k){var p=y.indentUnit;var x=k.multilineTagIndentFactor||1;var d=k.multilineTagIndentPastTag;if(d==null){d=true;}var w=k.htmlMode?{autoSelfClosers:{area:true,base:true,br:true,col:true,command:true,embed:true,frame:true,hr:true,img:true,input:true,keygen:true,link:true,meta:true,param:true,source:true,track:true,wbr:true},implicitlyClosed:{dd:true,li:true,optgroup:true,option:true,p:true,rp:true,rt:true,tbody:true,td:true,tfoot:true,th:true,tr:true},contextGrabbers:{dd:{dd:true,dt:true},dt:{dd:true,dt:true},li:{li:true},option:{option:true,optgroup:true},optgroup:{optgroup:true},p:{address:true,article:true,aside:true,blockquote:true,dir:true,div:true,dl:true,fieldset:true,footer:true,form:true,h1:true,h2:true,h3:true,h4:true,h5:true,h6:true,header:true,hgroup:true,hr:true,menu:true,nav:true,ol:true,p:true,pre:true,section:true,table:true,ul:true},rp:{rp:true,rt:true},rt:{rp:true,rt:true},tbody:{tbody:true,tfoot:true},td:{td:true,th:true},tfoot:{tbody:true},th:{td:true,th:true},thead:{tbody:true,tfoot:true},tr:{tr:true}},doNotIndent:{pre:true},allowUnquoted:true,allowMissing:true,caseFold:true}:{autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:false,allowMissing:false,caseFold:false};var c=k.alignCDATA;var f,g;function n(F,E){function C(G){E.tokenize=G;return G(F,E);}var D=F.next();if(D=="<"){if(F.eat("!")){if(F.eat("[")){if(F.match("CDATA[")){return C(v("atom","]]>"));}else{return null;}}else{if(F.match("--")){return C(v("comment","-->"));}else{if(F.match("DOCTYPE",true,true)){F.eatWhile(/[\w\._\-]/);return C(z(1));}else{return null;}}}}else{if(F.eat("?")){F.eatWhile(/[\w\._\-]/);E.tokenize=v("meta","?>");return"meta";}else{f=F.eat("/")?"closeTag":"openTag";E.tokenize=m;return"tag bracket";}}}else{if(D=="&"){var B;if(F.eat("#")){if(F.eat("x")){B=F.eatWhile(/[a-fA-F\d]/)&&F.eat(";");}else{B=F.eatWhile(/[\d]/)&&F.eat(";");}}else{B=F.eatWhile(/[\w\.\-:]/)&&F.eat(";");}return B?"atom":"error";}else{F.eatWhile(/[^&<]/);return null;}}}function m(E,D){var C=E.next();if(C==">"||(C=="/"&&E.eat(">"))){D.tokenize=n;f=C==">"?"endTag":"selfcloseTag";return"tag bracket";}else{if(C=="="){f="equals";return null;}else{if(C=="<"){D.tokenize=n;D.state=l;D.tagName=D.tagStart=null;var B=D.tokenize(E,D);return B?B+" tag error":"tag error";}else{if(/[\'\"]/.test(C)){D.tokenize=j(C);D.stringStartCol=E.column();return D.tokenize(E,D);}else{E.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/);return"word";}}}}}function j(B){var C=function(E,D){while(!E.eol()){if(E.next()==B){D.tokenize=m;break;}}return"string";};C.isInAttribute=true;return C;}function v(C,B){return function(E,D){while(!E.eol()){if(E.match(B)){D.tokenize=n;break;}E.next();}return C;};}function z(B){return function(E,D){var C;while((C=E.next())!=null){if(C=="<"){D.tokenize=z(B+1);return D.tokenize(E,D);}else{if(C==">"){if(B==1){D.tokenize=n;break;}else{D.tokenize=z(B-1);return D.tokenize(E,D);}}}}return"meta";};}function r(C,B,D){this.prev=C.context;this.tagName=B;this.indent=C.indented;this.startOfLine=D;if(w.doNotIndent.hasOwnProperty(B)||(C.context&&C.context.noIndent)){this.noIndent=true;}}function u(B){if(B.context){B.context=B.context.prev;}}function q(D,C){var B;while(true){if(!D.context){return;}B=D.context.tagName;if(!w.contextGrabbers.hasOwnProperty(B)||!w.contextGrabbers[B].hasOwnProperty(C)){return;}u(D);}}function l(B,D,C){if(B=="openTag"){C.tagStart=D.column();return b;}else{if(B=="closeTag"){return t;}else{return l;}}}function b(B,D,C){if(B=="word"){C.tagName=D.current();g="tag";return e;}else{g="error";return b;}}function t(C,E,D){if(C=="word"){var B=E.current();if(D.context&&D.context.tagName!=B&&w.implicitlyClosed.hasOwnProperty(D.context.tagName)){u(D);}if(D.context&&D.context.tagName==B){g="tag";return s;}else{g="tag error";return A;}}else{g="error";return A;}}function s(C,B,D){if(C!="endTag"){g="error";return s;}u(D);return l;}function A(B,D,C){g="error";return s(B,D,C);}function e(E,C,F){if(E=="word"){g="attribute";return i;}else{if(E=="endTag"||E=="selfcloseTag"){var D=F.tagName,B=F.tagStart;F.tagName=F.tagStart=null;if(E=="selfcloseTag"||w.autoSelfClosers.hasOwnProperty(D)){q(F,D);}else{q(F,D);F.context=new r(F,D,B==F.indented);}return l;}}g="error";return e;}function i(B,D,C){if(B=="equals"){return o;}if(!w.allowMissing){g="error";}return e(B,D,C);}function o(B,D,C){if(B=="string"){return h;}if(B=="word"&&w.allowUnquoted){g="string";return e;}g="error";return e(B,D,C);}function h(B,D,C){if(B=="string"){return h;}return e(B,D,C);}return{startState:function(){return{tokenize:n,state:l,indented:0,tagName:null,tagStart:null,context:null};},token:function(D,C){if(!C.tagName&&D.sol()){C.indented=D.indentation();}if(D.eatSpace()){return null;}f=null;var B=C.tokenize(D,C);if((B||f)&&B!="comment"){g=null;C.state=C.state(f||B,D,C);if(g){B=g=="error"?B+" error":g;}}return B;},indent:function(G,C,F){var E=G.context;if(G.tokenize.isInAttribute){if(G.tagStart==G.indented){return G.stringStartCol+1;}else{return G.indented+p;}}if(E&&E.noIndent){return a.Pass;}if(G.tokenize!=m&&G.tokenize!=n){return F?F.match(/^(\s*)/)[0].length:0;}if(G.tagName){if(d){return G.tagStart+G.tagName.length+2;}else{return G.tagStart+p*x;}}if(c&&/<!\[CDATA\[/.test(C)){return 0;}var B=C&&/^<(\/)?([\w_:\.-]*)/.exec(C);if(B&&B[1]){while(E){if(E.tagName==B[2]){E=E.prev;break;}else{if(w.implicitlyClosed.hasOwnProperty(E.tagName)){E=E.prev;}else{break;}}}}else{if(B){while(E){var D=w.contextGrabbers[E.tagName];if(D&&D.hasOwnProperty(B[2])){E=E.prev;}else{break;}}}}while(E&&!E.startOfLine){E=E.prev;}if(E){return E.indent+p;}else{return 0;}},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"<!--",blockCommentEnd:"-->",configuration:k.htmlMode?"html":"xml",helperType:k.htmlMode?"html":"xml"};});a.defineMIME("text/xml","xml");a.defineMIME("application/xml","xml");if(!a.mimeModes.hasOwnProperty("text/html")){a.defineMIME("text/html",{name:"xml",htmlMode:true});}});(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"),require("../xml/xml"),require("../javascript/javascript"),require("../css/css"));}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror","../xml/xml","../javascript/javascript","../css/css"],a);}else{a(CodeMirror);}}})(function(a){a.defineMode("htmlmixed",function(c,d){var b=a.getMode(c,{name:"xml",htmlMode:true,multilineTagIndentFactor:d.multilineTagIndentFactor,multilineTagIndentPastTag:d.multilineTagIndentPastTag});var n=a.getMode(c,"css");var l=[],k=d&&d.scriptTypes;l.push({matches:/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^$/i,mode:a.getMode(c,"javascript")});if(k){for(var e=0;e<k.length;++e){var j=k[e];l.push({matches:j.matches,mode:j.mode&&a.getMode(c,j.mode)});}}l.push({matches:/./,mode:a.getMode(c,"text/plain")});function f(t,r){var p=r.htmlState.tagName;var q=b.token(t,r.htmlState);if(p=="script"&&/\btag\b/.test(q)&&t.current()==">"){var u=t.string.slice(Math.max(0,t.pos-100),t.pos).match(/\btype\s*=\s*("[^"]+"|'[^']+'|\S+)[^<]*$/i);u=u?u[1]:"";if(u&&/[\"\']/.test(u.charAt(0))){u=u.slice(1,u.length-1);}for(var o=0;o<l.length;++o){var s=l[o];if(typeof s.matches=="string"?u==s.matches:s.matches.test(u)){if(s.mode){r.token=m;r.localMode=s.mode;r.localState=s.mode.startState&&s.mode.startState(b.indent(r.htmlState,""));}break;}}}else{if(p=="style"&&/\btag\b/.test(q)&&t.current()==">"){r.token=g;r.localMode=n;r.localState=n.startState(b.indent(r.htmlState,""));}}return q;}function h(s,o,p){var r=s.current();var q=r.search(o),i;if(q>-1){s.backUp(r.length-q);}else{if(i=r.match(/<\/?$/)){s.backUp(r.length);if(!s.match(o,false)){s.match(r);}}}return p;}function m(o,i){if(o.match(/^<\/\s*script\s*>/i,false)){i.token=f;i.localState=i.localMode=null;return f(o,i);}return h(o,/<\/\s*script\s*>/,i.localMode.token(o,i.localState));}function g(o,i){if(o.match(/^<\/\s*style\s*>/i,false)){i.token=f;i.localState=i.localMode=null;return f(o,i);}return h(o,/<\/\s*style\s*>/,n.token(o,i.localState));}return{startState:function(){var i=b.startState();return{token:f,localMode:null,localState:null,htmlState:i};},copyState:function(o){if(o.localState){var i=a.copyState(o.localMode,o.localState);}return{token:o.token,localMode:o.localMode,localState:i,htmlState:a.copyState(b,o.htmlState)};},token:function(o,i){return i.token(o,i);},indent:function(o,i){if(!o.localMode||/^\s*<\//.test(i)){return b.indent(o.htmlState,i);}else{if(o.localMode.indent){return o.localMode.indent(o.localState,i);}else{return a.Pass;}}},innerMode:function(i){return{state:i.localState||i.htmlState,mode:i.localMode||b};}};},"xml","javascript","css");a.defineMIME("text/html","htmlmixed");});